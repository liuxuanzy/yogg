/*! 2016 Baidu Inc. All Rights Reserved */
define("babel-runtime/helpers/classCallCheck",[],function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}return e}),define("moye/ui/lib/array",["require"],function(require){function e(e){return function(){return Function.call.apply(e,arguments)}}var exports={slice:e(Array.prototype.slice),each:function(e,n,t){var i;if(null==e)return e;var r=e.length;if(r===+r)for(i=0;r>i;i++)n.call(t,e[i],i,e);else{var a=exports.keys(e);for(i=0,r=a.length;r>i;i++){var o=a[i];n.call(t,e[o],o,e)}}return e},map:function(e,n,t){var i;if(null==e)return[];var r=e.length,a=[];if(r===+r)for(i=0;r>i;i++)a[i]=n.call(t,e[i],i,e);else{var o=exports.keys(e);for(i=0,r=o.length;r>i;i++){var s=o[i];a.push(n.call(t,e[s],s,e))}}return a},reduce:function(e,n,t,i){return exports.each(e,function(e,r){t=n.call(i,t,e,r)},i),t},keys:Object.keys?function(e){return null==e?[]:Object.keys(e)}:function(e){var n=[];if(null==e)return n;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))n.push(t);return n},range:function(e,n,t){if(arguments.length<=1)n=e||0,e=0;t=t||1;for(var i=Math.max(Math.ceil((n-e)/t),0),r=Array(i),a=0;i>a;a++,e+=t)r[a]=e;return r}};return exports}),define("moye/ui/lib/browser",["require"],function(require){var e=/(opera|ie|firefox|chrome|version|edge)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/,n=navigator.userAgent.toLowerCase().match(e)||[null,"unknown",0],t="ie"===n[1]&&document.documentMode,i={name:"version"===n[1]?n[3]:n[1],version:t||parseFloat("opera"===n[1]&&n[4]?n[4]:n[2])};return i[i.name]=0|i.version,i[i.name+(0|i.version)]=!0,{browser:i}}),define("moye/ui/lib/function",["require","jquery","./array"],function(require){var e=require("jquery"),n=require("./array"),t=n.slice;return{binds:function(n,i){if("string"===e.type(i))i=~i.indexOf(",")?i.split(/\s*,\s*/):t(arguments,1);if(i&&i.length)for(var r=0,a=i.length;a>r;++r){var o=i[r],s=n[o];if(s)n[o]=e.proxy(s,n)}},throttle:function(e,n){var t=null,i=this;return function(){if(!t)return t=setTimeout(function(){t=null},n),e.apply(i,arguments);else return void 0}},debounce:function(e,n){var t,i=this;return function(){var r=arguments;if(t)clearTimeout(t);t=setTimeout(function(){return t=null,e.apply(i,r)},n)}},delay:function(e,n){var i=this;return function(){var r=t(arguments);setTimeout(function(){return e.apply(i,r)},n)}},curry:function(e){var n=t(arguments,1);return function(){return e.apply(this,n.concat(t(arguments)))}}}}),define("moye/ui/lib/type",["require","jquery","./function","./array"],function(require){function e(e,n){return Object.prototype.toString.call(n).slice(8,-1)===e}var n=require("jquery"),t=require("./function"),i=require("./array"),exports={},r=["Null","Undefined","String","Array","Function","Number","Date","Object","Boolean","RegExp"];return i.each(r,function(n){exports["is"+n]=t.curry(e,n)}),exports.isNaN=function(e){return Number.isNaN(e)},exports.isElement=function(e){return!(!e||1!==e.nodeType)},exports.isPromise=function(e){return e&&exports.isFunction(e.then)},exports.typeOf=function(e){return exports.isElement(e)?"element":n.type(e)},exports}),define("moye/ui/lib/object",["require","jquery","./type","./array"],function(require){var e=require("jquery"),n=require("./type"),t=require("./array"),i=Object.prototype.hasOwnProperty,exports={};return exports.stringify=window.JSON&&n.isFunction(JSON.stringify)?JSON.stringify:function(){var i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r=function(e){return i[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)};return function a(i){if(i&&i.toJSON)i=i.toJSON();switch(n.typeOf(i)){case"string":return'"'+i.replace(/[\x00-\x1f\\"]/g,r)+'"';case"array":return"["+e.map(i,a)+"]";case"object":var o=[];return t.each(i,function(e,n){var t=a(e);if(t)o.push(a(n)+":"+t)}),"{"+o+"}";case"number":case"boolean":return""+i;case"null":return"null"}return null}}(),exports.clone=function r(i){var a=n.isObject(i);if(!n.isArray(i)&&!a)return i;if(a&&!e.isPlainObject(i))return i;var o=i;if(n.isArray(i))return o=t.map([].slice.call(i),r);if(n.isObject(i)){o={};for(var s in i)if(i.hasOwnProperty(s))o[s]=r(i[s])}return o},exports.has=function(e,n){return null!=e&&i.call(e,n)},exports.extend=function a(i){i=i||{};for(var r=t.slice(arguments,1),o=0,s=r.length;s>o;o++){var l=r[o];if(l)for(var c in l){var d=l[c];if(d!==i&&exports.has(l,c)&&!n.isUndefined(d)){var u=e.isArray(d);if(e.isPlainObject(d)||u){var f=exports.has(i,c)?i[c]:null;if(u)f=f&&e.isArray(f)?f:[];else f=f&&e.isPlainObject(f)?f:{};i[c]=a(f,d)}else i[c]=d}else;}else;}return i},exports.toQueryString=function(e,i){var r=t.reduce(e,function(e,t,r){var a;if(i)r=i+"["+r+"]";switch(n.typeOf(t)){case"object":a=exports.toQueryString(t,r);break;case"array":for(var o={},s=t.length;s--;)o[s]=t[s];a=exports.toQueryString(o,r);break;default:a=r+"="+encodeURIComponent(t)}if(null!=t)e.push(a);return e},[]);return r.join("&")},exports}),define("moye/ui/lib/class",["require","./function","./type","./object"],function(require){function e(e){var n=e.prototype;if(n.hasOwnProperty("type")||n.hasOwnProperty("$class")){var t=n.type||n.$class;if(h[t])throw new Error('Class "'+t+'" is already defined');h[t]=e}}function n(e,n){var t=new Function;t.prototype=e.prototype;var i=new t;n=n||{},c.extend(i,n);var r=o(i);for(var a in i)if(i.hasOwnProperty(a)&&l.isFunction(i[a])){var s=i[a];s[d]=r,s[u]=a}r.$parent=e;var h=n.type||n.$class;if(h)e[f][h]=r;return r}function t(e,n){if(l.isFunction(n))n=n.prototype;return c.extend(e.prototype,n),e}function i(){var e=this.$parent.caller,n=e[d];if(!n)throw new Error("this class has no Parent Class");for(var t=e[d].$parent,i=e[u];t;)if(t.prototype.hasOwnProperty(i)){var r=t.prototype[i];if(l.isFunction(r))return t.prototype[i].apply(this,arguments);throw new Error("parent method is not function")}else t=t.$parent;throw new Error("no parent method")}function r(e,n){var t=e[f];return t[n]}function a(e){return e[f]}function o(o){var l=function(){return this.initialize?this.initialize.apply(this,arguments):this};return l.prototype=o||{},e(l),l.prototype.constructor=l,l.prototype.$parent=i,l.extend=s(n,l),l.implement=s(t,l),l.getClass=s(r,l),l.getAllClasses=s(a,l),l[f]={},l}var s=require("./function").curry,l=require("./type"),c=require("./object"),d="__class__",u="__name__",f="__classess__",h={};return{newClass:o,getClass:function(e){return h[e]}}}),define("moye/ui/lib/dom",["require","./type","./object","./browser"],function(require){var e=require("./type"),n=require("./object"),t=require("./browser").browser;return{g:function(n){return e.isString(n)?document.getElementById(n):n},fixed:function(){function e(e){return"undefined"==typeof e}function i(e){return"%"===(e+"").slice(-1)}function r(e,n){var t=parseInt(e,10);return i(e)?n+"*"+t/100:t}function a(n,t,i,a){var o={},l=s[n],c="document.documentElement."+l.offset,d="document.documentElement."+l.client;if(!e(i)&&!e(a))o[l.coordinate]="eval("+c+"+"+r(i,d)+')+"px"',o[l.size]="eval("+d+"-"+r(i,d)+"-"+r(a,d)+')+"px"';else if(e(i)&&!e(a))o[l.coordinate]="eval("+c+"+"+d+"-"+r(t,d)+"-"+r(a,d)+')+"px"';else o[l.coordinate]="eval("+c+"+"+r(i,d)+')+"px"';return o}function o(e,t){var i=a("horizontal",t.width||e.offsetWidth,t.left,t.right),r=a("vertical",t.height||e.offsetHeight,t.top,t.bottom);for(var o in r)if(n.has(r,o))i[o]=r[o];return i}var s={horizontal:{offset:"scrollLeft",client:"clientWidth",coordinate:"left",size:"width"},vertical:{offset:"scrollTop",client:"clientHeight",coordinate:"top",size:"height"}},l=document.getElementsByTagName("html")[0];if(t.ie6)l.style.backgroundAttachment="fixed",l.style.backgroundImage="url(about:blank)";return l=null,function(e,i){if(t.ie6){e.style.position="absolute";var r=o(e,i);for(var a in r)if(n.has(r,a))e.style.setExpression(a,r[a])}}}()}}),define("moye/ui/lib/interface",["require","jquery","./array","./object","./type"],function(require){var e=require("jquery"),n=require("./array"),t=require("./object"),i=require("./type");return{configurable:{setOptions:function(e){t.extend(this,this.options,e)},bindEvents:function(e){e=e||{};for(var n in e){var r=e[n];if(t.has(e,n)&&0===n.indexOf("on")&&i.isFunction(r))this.on(n.charAt(2).toLowerCase()+n.slice(3),r),delete e[n]}}},observable:{on:function(n,t){if(i.isFunction(n))t=n,n="*";this._listeners=this._listeners||{};var r=this._listeners[n]||[];if(e.inArray(t,r)<0)t.$type=n,r.push(t);return this._listeners[n]=r,this},un:function(n,t){if(i.isFunction(n))t=n,n="*";this._listeners=this._listeners||{};var r=this._listeners[n];if(r)if(t){var a=e.inArray(t,r);if(~a)r.splice(a,1)}else r.length=0,delete this._listeners[n];return this},once:function(e,n){if(i.isFunction(e))n=e,e="*";var t=this,r=function(){n.apply(t,arguments),t.un(e,r)};return this.on.call(t,e,r),this},fire:function(n,t){var i;if(n instanceof e.Event)i=n,n=i.type;else i=new e.Event(n,t);if(!i.target)i.target=this;this._listeners=this._listeners||{};for(var r=this._listeners[n]||[],a=this._listeners["*"]||[],o=[].concat(r,a),s=o.length,l=0;s>l;l++)o[l].call(this,i);return i},destroyEvents:function(){var e=this._listeners;if(e)n.each(e,function(e,n,t){t[n].length=0,t[n]=null}),this._listeners=null}}}}),define("moye/ui/lib/page",["require"],function(require){function e(e){var n=e&&e.ownerDocument||document,t=n.compatMode;return!t||"CSS1Compat"===t?n.documentElement:n.body}return{getScrollLeft:function(){return window.pageXOffset||e().scrollLeft},getScrollTop:function(){return window.pageYOffset||e().scrollTop},getViewWidth:function(){return e().clientWidth},getViewHeight:function(){return e().clientHeight}}}),define("moye/ui/lib/string",["require","jquery"],function(require){var e=require("jquery");return{guid:function(){var e="moye",n=0;return function(){return e+"-"+n++}}(),capitalize:function(e){return String(e).replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},contains:function(n,t,i){return i=i||" ",n=i+n+i,t=i+e.trim(t)+i,n.indexOf(t)>-1},pad:function(e,n){var t=0>e?"-":"",i=Math.abs(parseInt(e,10))+"",r=i.length;if(n=+n||2,n>r)i=(1<<n-r).toString(2).slice(1)+i;return t+i},format:function(){var e={"!":1,"@":2,"#":3,$:4,"%":5};return function(n,t,i,r,a,o){var s=arguments;return n.replace(/(!|@|#|\$|%)\{([\w]+)\}/g,function(n,t,i){if(t=s[e[t]],null==t)return"";if(i=t[i],null==i)return"";else return i})}}()}}),define("moye/ui/lib",["require","jquery","./lib/array","./lib/browser","./lib/class","./lib/dom","./lib/function","./lib/interface","./lib/object","./lib/page","./lib/string","./lib/type"],function(require){var e=require("jquery"),n={};return e.extend(n,require("./lib/array"),require("./lib/browser"),require("./lib/class"),require("./lib/dom"),require("./lib/function"),require("./lib/interface"),require("./lib/object"),require("./lib/page"),require("./lib/string"),require("./lib/type")),n}),define("moye/ui/Context",["require","./lib"],function(require){function e(e){for(e=e||r++;e in i;)e=r++;return e}function n(n){this.id=e(n),this.controls={},this.properties={}}var t=require("./lib"),i={},r=1416796207;return n.prototype.get=function(e){return this.controls[e]},n.prototype.add=function(e){var n=e.id;return this.controls[n]=e,delete this.properties[n],this},n.prototype.remove=function(e){return delete this.controls[e.id],this},n.prototype.fill=function(e){return t.extend(this.properties,e||{}),this},{isContext:function(e){return e instanceof n},get:function(e){return i[e]},create:function(e){var t=new n(e);return i[t.id]=t,t}}}),define("moye/ui/main",["require","./lib","./Context"],function(require){var e=require("./lib"),n=require("./Context"),t={uiPrefix:"data-ui",instanceAttr:"data-ctrl-id",uiClassPrefix:"ui",skinClassPrefix:"skin",stateClassPrefix:"state",contextAttr:"data-ctrl-context"},i=n.create("default"),exports={init:function(e,n,r){var a=t.uiPrefix+"-id",o={};return r=r||i,r.fill(n),$("["+a+"]",e).each(function(e,i){var s=i.getAttribute(a),l=i.getAttribute(t.instanceAttr);if(s&&!l){var c=n[s];if(c){var d=c.type;if(!d)throw new Error("you should specify a type to `"+s+"`");var u=$.extend({context:r},c,{id:s,main:i}),f=exports.create(d,u);f.render(),o[s]=f}}}),o},create:function(n,t){var i=e.getClass(n);if(!i)throw new Error("Class "+n+" not found");return delete t.type,new i(t)},get:function(e){return i.get(e)},getControlByDOM:function(e){e=$(e);var n=e.attr(t.instanceAttr);if(n){var i=e.attr(t.contextAttr);if(i){var r=exports.getContext(i);if(r)return r.get(n)}}},getContext:function(e){return e?n.get(e):i},getConfig:function(e){return t[e]},setConfig:function(e,n){return t[e]=n,this}};return exports}),define("moye/ui/helper/dom",["require","jquery","../lib","../main"],function(require){function e(){return t.slice(arguments).join("-")}var n=require("jquery"),t=require("../lib"),i=require("../main"),r={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,command:!0};return{getPartClasses:function(n){var t=this.control,r=t.type.toLowerCase(),a=t.skin,o=i.getConfig("uiClassPrefix"),s=i.getConfig("skinClassPrefix"),l=[];if(n){if(l.push(e(o,r,n)),a)for(var c=0,d=a.length;d>c;c++)a[c]&&l.push(e(s,a[c],r,n))}else if(l.push(e(o,r)),a)for(c=0,d=a.length;d>c;c++)a[c]&&l.push(e(s,a[c]),e(s,a[c],r));return l},getPartClassName:function(e){return this.getPartClasses(e).join(" ")},getPrimaryClassName:function(n){var t=this.control.type.toLowerCase();return n?e(i.getConfig("uiClassPrefix"),t,n):e(i.getConfig("uiClassPrefix"),t)},addPartClasses:function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main){var i=this.getPartClassName(e);n(t).addClass(i)}},removePartClasses:function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main){var i=this.getPartClassName(e);n(t).removeClass(i)}},getStateClasses:function(n){var t=this.control.type.toLowerCase(),r=[e(i.getConfig("uiClassPrefix"),t,n),e(i.getConfig("stateClassPrefix"),n)],a=this.control.skin;if(a)for(var o=i.getConfig("skinClassPrefix"),s=0,l=a.length;l>s;s++)a[s]&&r.push(e(o,a[s],n),e(o,a[s],t,n));return r},getStateClassName:function(e){return this.getStateClasses(e).join(" ")},addStateClasses:function(e){var t=this.control.main;if(t){var i=this.getStateClassName(e);n(t).addClass(i)}},removeStateClasses:function(e){var t=this.control.main;if(t){var i=this.getStateClassName(e);n(t).removeClass(i)}},getPart:function(e){return t.g(this.getPartId(e))},getPartId:function(e){var n=this.control;return"ctrl-"+n.type.toLowerCase()+"-"+n.id+(e?"-"+e:"")},getPartBeginTag:function(e,n,i){i=i?t.map(i,function(e,n){return n+'="'+e+'"'}).join(" "):"";var a="<"+n+' id="'+this.getPartId(e)+'" data-part="'+e+'"class="'+this.getPartClassName(e)+'"'+i+(r.hasOwnProperty(n)?"":">");return a},getPartEndTag:function(e,n){var t=r.hasOwnProperty(n)?" />":"</"+n+">";return t},getPartHTML:function(e,n,t,i){return n=n||"div",this.getPartBeginTag(e,n,i)+(t||"")+this.getPartEndTag(e,n)},createPart:function(e,t,i,r){return n("<"+(t||"div")+">").attr(r||{}).attr("id",this.getPartId(e)).data("part",e).addClass(this.getPartClassName(e)).html(i||"").get(0)}}}),define("moye/ui/helper/life",["require","../main","../Context"],function(require){var e=require("../main"),n=require("../Context"),t={NEW:0,INITED:1,RENDERED:2,DISPOSED:4};return{isInStage:function(e){if(null==t[e])throw new Error("Invalid life cycle stage: "+e);return this.stage===t[e]},changeStage:function(e){if(null===t[e])throw new Error("Invalid life cycle stage: "+e);return this.stage=t[e],this},initContext:function(){var t=this.control,i=t.context;if(!n.isContext(i))i=n.get(i)||e.getContext();return t.setContext(i),this},dispose:function(){}}}),define("moye/ui/helper/children",["require","../main","../lib"],function(require){var e=require("../main"),n=require("../lib");return{initChildren:function(){var t=this.control,i=t.context,r=e.init(t.main,i.properties,i);return n.each(r,function(e,n){t.addChild(e,e.childName||n)}),this},traversalChildren:function(e){for(var t=n.slice(this.control.children),i=0,r=t.length;r>i;++i)e.call(this,t[i],i);return this},disposeChildren:function(){var e=this.control;return this.traversalChildren(function(e){e.dispose()}),e.children=[],e.childrenIndex={},this},disableChildren:function(){return this.traversalChildren(function(e){e.disable()})},enableChildren:function(){return this.traversalChildren(function(e){e.enable()})}}}),define("moye/ui/plugin/Plugin",["require","../lib"],function(require){var e=require("../lib"),n=e.newClass({$class:"Plugin",options:{},initialize:function(n){e.extend(this,this.options,n)},activate:function(e){this.active=!0},inactivate:function(){this.active=!1},isActivated:function(){return!!this.active},dispose:function(){}});return n}),define("moye/ui/helper/plugin",["require","../lib","../plugin/Plugin"],function(require){var e=require("../lib"),n=require("../plugin/Plugin");return{createPluginInstance:function(t){var i,r={};if(t instanceof n)return t;var a=e.typeOf(t);if("function"===a)i=t;else if("string"===a)i=e.getClass(t);else if("object"===a)i=e.getClass(t.type),r=t.options||r;if(!i)throw new Error("moye Plugin ["+t+"] cannot found");return new i(r)},initPlugins:function(){var n=this.control,t=n.plugins;if(t&&t.length)return n.plugins=e.map(t,function(e){var t=this.createPluginInstance(e);return t.activate(n),t},this),this;else return void 0},traversalPlugins:function(e){var n=this.control.plugins;if(n)for(var t=n.length-1;t>=0;t--)e.call(this,n[t]);return this},activatePlugins:function(){return this.traversalPlugins(function(e){e.activate()})},inactivatePlugins:function(){return this.traversalPlugins(function(e){e.inactivate()})},disposePlugins:function(){return this.traversalPlugins(function(e){e.inactivate(),e.dispose()}),this.control.plugins=[],this}}}),define("moye/ui/helper/event",["require","jquery"],function(require){var e=require("jquery");return{delegate:function(n,t,i,r,a){var o=this.control;if(null==a&&null==r)a=i,i=r=null;else if(null==a)a=r,r=null;return a=e.proxy(a,o),t+="."+o.id+"."+a.guid,e(n).on(t,i,r,a),this},undelegate:function(n,t,i,r){if(t=t||"",t+="."+this.control.id,r&&r.guid)t+="."+r.guid;return e(n).off(t,i,r),this}}}),define("moye/ui/Helper",["require","jquery","./helper/dom","./helper/life","./helper/children","./helper/plugin","./helper/event"],function(require){function e(e){this.control=e}var n=require("jquery");return n.extend(e.prototype,require("./helper/dom"),require("./helper/life"),require("./helper/children"),require("./helper/plugin"),require("./helper/event")),e}),define("moye/ui/Control",["require","jquery","./lib","./main","./Helper"],function(require){var e=require("jquery"),n=require("./lib"),t=require("./main"),i=require("./Helper"),r="hidden",a="disabled",o="readOnly",s=n.newClass({type:"Control",ignoreStates:["disable"],delegate:function(){var e=this.helper;return e.delegate.apply(e,arguments),this},undelegate:function(){var e=this.helper;return e.undelegate.apply(e,arguments),this},initialize:function(e){var t=this.helper=new i(this);if(t.changeStage("NEW"),this.currentStates={},e=e||{},this.bindEvents(e),this.init(e),this.main=this.main?n.g(this.main):this.createMain(),this.id=this.id||n.guid(),this.hasOwnProperty("states")){var r=this.states;if(n.isString(r))this.states=[r]}if(this.hasOwnProperty("skin")){var a=this.skin;if(n.isString(a))this.skin=[a]}t.initContext(),this.children=[],this.childrenIndex={},t.initPlugins(),t.changeStage("INITED")},init:function(e){if(this.helper.isInStage("NEW"))this.setOptions(e)},render:function(){var n=this.helper;if(n.isInStage("INITED"))if(this.fire("beforerender"),this.initStructure(),this.initEvents(),e(this.main).attr(t.getConfig("instanceAttr"),this.id),n.addPartClasses(),this.states&&this.states.length)for(var i=this.states.length-1;i>=0;i--)this.addState(this.states[i]);if(this.repaint(),n.isInStage("INITED"))n.changeStage("RENDERED"),this.fire("afterrender");return this},initStructure:function(){return this},initEvents:function(){return this},repaint:function(e,t){if(this.helper.isInStage("INITED")){if(this[a])this.disable(),delete this[a];if(this[r])this.hide(),delete this[r];if(n.isFunction(this.getValue))this.setReadOnly(!!this[o]),delete this[o]}return this},set:function(t,i){var r;if(n.isObject(t))r=t;else r={},r[t]=i;if(!this.helper.isInStage("RENDERED"))return e.extend(this,r),this;var a=[],o={};for(var s in r)if(r.hasOwnProperty(s)){var l=r[s],c=this[s],d=this.isPropertyChanged(s,l,c);if(d){this[s]=l;var u={name:s,oldValue:c,newValue:l};a.push(u),o[s]=u}}if(a.length)this.repaint(a,o);return o},get:function(e){return this[e]},isPropertyChanged:function(e,n,t){return n!==t},appendTo:function(e){if(this.helper.isInStage("INITED"))this.render();return e.appendChild(this.main),this},query:function(n){return e("."+n,this.main).toArray()},createMain:function(){return document.createElement("div")},addState:function(e){if(this.hasState(e))return this;else return this.currentStates[e]=!0,this.helper.addStateClasses(e),this.fire("statechange",{state:e,action:"add"}),this},removeState:function(e){var n=this;if(!n.hasState(e))return n;else return n.currentStates[e]=!1,this.helper.removeStateClasses(e),n.fire("statechange",{state:e,action:"remove"}),n},toggleState:function(e){return this.hasState(e)?this.removeState(e):this.addState(e),this},hasState:function(e){return!!this.currentStates[e]},show:function(){return this.removeState(r)},hide:function(){return this.addState(r)},toggle:function(){return this.toggleState(r)},disable:function(){return this.addState(a),this.helper.disableChildren(),this.fire("disable"),this},enable:function(){return this.removeState(a),this.helper.enableChildren(),this.fire("enable"),this},isDisabled:function(){return this.hasState(a)},isReadOnly:function(){return this.hasState(o)},setReadOnly:function(e){if(e)this.addState(o);else this.removeState(o);return this},addChild:function(e,n){var t=this.children,i=this.childrenIndex,r=e.getParent();if(r)r.removeChild(e);if(e.setParent(this),n=n||e.childName)i[n]=e;return e.setContext(this.context),t.push(e),this},removeChild:function(e){for(var n=this.children,t=this.childrenIndex,i=n.length-1;i>=0;i--)if(n[i]===e)n.splice(i,1);var r=e.childName;return delete t[r],e.setParent(null),this},getChild:function(e){return this.childrenIndex[e]},setParent:function(e){return this.parent=e,this},getParent:function(){return this.parent},initChildren:function(){return this.helper.initChildren(),this},setContext:function(n){var i=this.context;if(n!==i||i.get(this.id)!==this){if(i)this.context.remove(this);return n.add(this),e(this.main).attr(t.getConfig("contextAttr"),n.id),this.context=n,this}},dispose:function(){this.fire("beforedispose"),this.helper.disposePlugins(),this.helper.disposeChildren(),this.destroyEvents(),this.helper.changeStage("DISPOSED"),this.fire("afterdispose")},destroy:function(){if(this.dispose(),this.main)e(this.main).remove(),this.main=null},use:function(e){var n=this.plugins;if(!this.plugins)n=this.plugins=[];if(e=this.helper.createPluginInstance(e),n.push(e),!this.helper.isInStage("NEW"))e.activate(this);return this}}).implement(n.observable).implement(n.configurable);return s}),define("moye/ui/painter",["require","./lib"],function(require){var e=require("./lib");return{createRepaint:function(){var n=e.slice(arguments);return function(t,i){for(var r=e.extend({},i),a=0;a<n.length;a++){var o=n[a];if("function"!=typeof o){var s=[].concat(o.name),l=!t,c=s.length;if(!l)for(var d=0;c>d;d++){var u=s[d];if(i.hasOwnProperty(u)){l=!0;break}}if(l){var f=[o];for(d=0;c>d;d++)u=s[d],f.push(this[u]),delete r[u];o.paint.apply(this,f)}else;}else o.apply(this,arguments)}return this}}}}),define("moye/ui/Popup",["require","jquery","./lib","./Control","./painter"],function(require){var e=require("jquery"),n=require("./lib"),t=require("./Control"),i=t.extend({type:"Popup",options:{target:"",triggers:"",liveTriggers:"",content:"",dir:"bl",mode:"click",showDelay:50,hideDelay:50,offset:{x:0,y:0}},init:function(e){if(this.$parent(e),e.target)this.target=n.g(e.target);if("over"===e.mode)this.showDelay=e.showDelay>0?e.showDelay:50,this.hideDelay=e.hideDelay>0?e.hideDelay:50},initStructure:function(){var n=this.content=this.content||this.main.innerHTML;e(this.main).css("left","-2000px").appendTo(document.body).html(n)},initEvents:function(){if(this.onWindowResize=n.debounce.call(this,this.onWindowResize,100),this.showBound=e.proxy(this.onShow,this),this.hideBound=e.proxy(this.onHide,this),this.bindTriggersEvents(this.triggers,this.liveTriggers),this.delegate(this.main,"click",this.onMainClick),"over"===this.mode)this.delegate(this.main,"mouseenter",this.onMainMouseEnter),this.delegate(this.main,"mouseleave",this.onMainMouseLeave)},repaint:require("./painter").createRepaint(t.prototype.repaint,{name:"content",paint:function(e,n){this.setContent(n)}},function(e,n){if(!this.helper.isInStage("RENDERED"))return this;var t=n.liveTriggers,i=n.triggers;if(!t&&!i)return this;else return this.clearTriggersEvents(i.oldValue,t.oldValue),void this.bindTriggersEvents(i.newValue,t.newValue)}),setTarget:function(e){return this.target=e,this},bindTriggersEvents:function(n,t){var i,r=this.mode,a=this.showBound,o=this.hideBound,s=null;if("static"!==r){if(t)i=e(t),s=n;else i=e(n);if("over"===r)i.on("mouseenter",s,a).on("mouseleave",s,o),e(this.main).on("mouseenter",a).on("mouseleave",o);else i.on("click",s,a)}},clearTriggersEvents:function(n,t){var i,r=this.mode,a=null;if("static"!==r){if(t)i=e(t),a=n;else i=e(n);if("over"===r)i.off("mouseenter",a,this.showBound).off("mouseleave",a,this.hideBound),this.undelegate(this.main,"mouseenter",this.onMainMouseEnter),this.undelegate(this.main,"mouseleave",this.onMainMouseLeave);else e(n).off("click",this.showBound)}},startGlobalListener:function(){var e=this.mode;if("click"===e)this.delegate(document,"click",this.onHide);return this.delegate(window,"resize",this.onWindowResize),this},stopGlobalListener:function(){var e=this.mode;if("click"===e)this.undelegate(document,"click",this.onHide);return this.undelegate(window,"resize",this.onWindowResize),this},show:function(){var e=this;if(!e.hasState("show")){e.addState("show");var n=function(){e.locate(e.target||e.trigger),e.startGlobalListener(),e._isVisible=!0,e.fire("show",{target:e.trigger})};if(e.showDelay)e._showTimer=setTimeout(n,e.showDelay);else n();return clearTimeout(e._hideTimer),this}},hide:function(){var n=this;if(n.hasState("show")){n.removeState("show");var t=function(){e(n.main).css("left","-2000px"),n.stopGlobalListener(),n.trigger=null,n._isVisible=!1,n.fire("hide")};if(n.hideDelay)n._hideTimer=setTimeout(t,n.hideDelay);else t();return clearTimeout(n._showTimer),this}},onWindowResize:function(){var e=this.target||this.trigger;e&&this.isVisible()&&this.locate(e)},onShow:function(n){if(!this.isDisabled()){var t=n.target,i=this.main,r=t===i||e.contains(i,t),a=r?this.trigger:e(n.target).closest(this.triggers)[0];if(a){var o=this.trigger;if(o)if(this.hide(),"over"!==this.mode&&!r&&a===o)return;var s=new e.Event("beforeshow",{target:a});if(this.fire(s),!s.isDefaultPrevented())this.trigger=a,this.show()}}},onHide:function(n){var t=n.target,i=this.main;if("mouseleave"===n.type||i!==t&&!~e.inArray(t,e(this.triggers))&&!e.contains(i,t))this.hide()},onMainClick:function(e){this.fire(e)},onMainMouseEnter:function(e){this.clear(),this.fire("mouseenter",{target:this.trigger})},onMainMouseLeave:function(e){this.clear(),this.addState("show"),this.hide(),this.fire("mouseleave",{target:this.trigger})},locate:function(n){n=e(n||this.target||this.trigger||document.body);var t=e(this.main),i=this.dir,r=n.offset(),a=r.top,o=r.left,s=n.outerWidth(),l=n.outerHeight(),c=o+s,d=a+l,u=o+s/2,f=a+l/2,h=t.outerWidth(),p=t.outerHeight(),m=e(window),g=m.scrollTop(),v=m.scrollLeft(),y=v+m.width(),b=g+m.height(),M=n.attr("data-popup")||n.attr("data-tooltips");if(M)i=/[trblc]{2}/.test(M)?M:"1";var C,w;if(!i||"1"===i){var R=s>h||o-(h-s)/2>0&&y>=c+(h-s)/2?"c":o+h>y?"r":"l",S=l>p||a-(p-l)/2>0&&b>=d+(p-l)/2?"c":a+p>b?"b":"t";if(b>=d+p)w="b",C=R;else if(y>=c+h)w="r",C=S;else if(a-p>=g)w="t",C=R;else if(o-h>=v)w="l",C=S;i=w+C}else w=i.charAt(0),C=i.charAt(1);this._dir=i;var x=this.offset;if({t:1,b:1}[w])o={l:o+x.x,c:u-h/2,r:c-h-x.x}[C],a={t:a-p-x.y,b:d+x.y}[w];else if({l:1,r:1}[w])a={t:a+x.y,c:f-p/2,b:d-p-x.y}[C],o={l:o-h-x.x,r:c+x.x}[w];t.css({left:o+"px",top:a+"px"})},setContent:function(n){this.content=n||"",e(this.main).html(this.content)},isVisible:function(){return!!this._isVisible},clear:function(){clearTimeout(this._showTimer),clearTimeout(this._hideTimer)},dispose:function(){this.stopGlobalListener(),this.clearTriggersEvents(this.triggers,this.liveTriggers),this.clear(),this.$parent()}});return i}),define("moye/ui/Select",["require","jquery","./lib","./Control","./Popup","./painter"],function(require){var e=require("jquery"),n=require("./lib"),t=require("./Control"),i=require("./Popup"),r=t.extend({type:"Select",options:{maxLength:16,ellipsis:"...",columns:1,selectedClass:"selected",datasource:[],valueUseIndex:!1,emptyText:"请选择",mode:"click",adapter:{toOption:function(e){return e},toLabel:function(e){return e.name}},indicator:{normal:"&#xe604;",expanded:"&#xe603;"}},init:function(e){this.$parent(e),this.datasource=this.datasource||[];var n=this.handleValue(this.value),t=this.getOption(n);this.value=t?this.handleValue(t.value):null},handleValue:function(e){return null==e?"":e+""},getOption:function(e){for(var n=0,t=this.datasource,i=t.length;i>n;++n){var r=this.adapter.toOption.call(this,t[n]);if(r.value===e)return r}return null},initStructure:function(){var n=["select"],t=+this.columns;if(t)n.push("select-columns"+t);var r=this.helper,a=this.popup=new i({main:r.createPart("popup"),target:this.main,triggers:[this.main],skin:n,mode:this.mode});a.on("click",e.proxy(this.onPopupClick,this)).on("show",e.proxy(this.onPopupShow,this)).on("hide",e.proxy(this.onPopupHide,this)).render(),r.addPartClasses("popup",a.main),this.addChild(a),this.main.innerHTML=""+r.getPartHTML("input","input","",{type:"hidden",value:this.value})+r.getPartHTML("label","a","",{href:"#"})+this.getIndicatorHTML()},initEvents:function(){this.delegate(this.main,"click",this.onMainClicked)},repaint:require("./painter").createRepaint(t.prototype.repaint,{name:["datasource"],paint:function(e,t){if(!n.isArray(t))t=(t+"").split(/\s*[,]\s*/);for(var i=[],r=!!this.valueUseIndex,a=0,o=t.length;o>a;++a){var s=t[a];if(!n.isObject(s)){var l=s.split(/\s*[:]\s*/);s={text:l[0]},s.value=l.length>1?l[1]:r?a:l[0]}i.push(this.getOptionHTML(s,a))}this.popup.main.innerHTML=i.join("")}},{name:["value"],paint:function(t,i){var r=this.helper,a=this.datasource||[],o=r.getPartClassName("option-selected"),s=r.getPrimaryClassName("option");i=this.handleValue(i);var l,c=n.reduce(e("."+s,this.popup.main),function(n,t,r){var s=e(t),l=this.adapter.toOption.call(this,a[r]);if(this.handleValue(l.value)!==i)s.removeClass(o);else s.addClass(o),n=l;return n},null,this),d=r.getPart("input");if(c)l=this.adapter.toLabel.call(this,c),d.value=this.handleValue(i),this.addState("selected");else l=this.emptyText,this.value=d.value="",this.removeState("selected");r.getPart("label").innerHTML=l}}),getIndicatorHTML:function(){var e=this.indicator;if(e===!1)return"";else return this.helper.getPartHTML("indicator","i",this.hasState("expanded")?this.indicator.expanded:this.indicator.normal)},getOptionHTML:function(e,n){return e=this.adapter.toOption.call(this,e,n),'<a href="#" class="'+this.helper.getPartClassName("option")+'" data-action="select" data-value="'+e.value+'" title="'+e.name+'" data-index="'+n+'">'+e.name+"</a>"},fill:function(e){this.set("datasource",e)},pick:function(e){var n=e.getAttribute("data-value");if(n!==this.handleValue(this.value))this.set("value",n),this.fire("change",{value:n})},getValue:function(e){var n=this.helper.getPart("input").value;return e?+n:n},setValue:function(e){return this.set("value",e),this},onPopupClick:function(e){var n=e.target;if("A"===n.tagName)e.preventDefault(),
this.pick(n),this.popup.hide()},onPopupShow:function(e){if(this.isDisabled())return void e.preventDefault();if(this.fire(e),!e.isDefaultPrevented())this.addState("expanded"),this.helper.getPart("indicator").innerHTML=this.indicator.expanded},onPopupHide:function(e){if(this.fire(e),!e.isDefaultPrevented())this.removeState("expanded"),this.helper.getPart("indicator").innerHTML=this.indicator.normal},onMainClicked:function(e){e.preventDefault()},dispose:function(){this.undelegate(this.main,"click",this.onMainClicked),this.popup.destroy(),this.$parent()}});return r}),define("yogg/common/Hero",["require","babel-runtime/helpers/classCallCheck"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=function(){function n(t){e(this,n),this.current=30,this.hp=30,this.armor=0,this.mp=0,this.weapon=0,this.ap=0,this.name="",this.frozen=!1,this.cards=0,this.drawn=0,this.stack=0,this.secret=[],this.current=t.hp,this.armor=t.armor||0,this.weapon=t.weapon||0,this.ap=this.weapon,this.name=t.name,this.cards=t.cards||0,this.stack=t.stack||0}return n.prototype.dealDamage=function(e){if(this.armor-=e,this.armor<0)this.current+=this.armor,this.armor=0},n.prototype.restoreHealth=function(e){if(!this.dead())this.hp=Math.min(this.current+e,30)},n.prototype.addArmor=function(e){if(!this.dead())this.armor+=e},n.prototype.drawCard=function(e){this.drawn+=e,this.cards=Math.min(10,this.cards+e),this.stack-=e},n.prototype.supplementCard=function(e){this.cards=Math.max(0,Math.min(10,this.cards+e))},n.prototype.pushStack=function(e){this.stack+=e},n.prototype.addSecret=function(e){if(this.secret.length<5&&this.secret.indexOf(e)<0)this.secret.push(e)},n.prototype.addMp=function(e){this.mp=Math.max(0,Math.min(10,this.mp+e))},n.prototype.info=function(){return{name:this.name,dead:this.dead(),hp:this.current,armor:this.armor,mp:this.mp,weapon:this.weapon,ap:this.frozen?0:this.ap,cards:this.cards,drawn:this.drawn,stack:this.stack,secret:this.secret}},n.prototype.dead=function(){return this.current<=0},n}();return n}),define("yogg/common/Minion",["require","babel-runtime/helpers/classCallCheck"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=function(){function n(t){e(this,n),this.current=0,this.hp=0,this.ap=0,this.name="",this.frozen=!1,this.shield=!1,this.effect=[],this.current=t.hp,this.hp=t.hp,this.ap=t.ap,this.name=t.name,this.shield=t.shield||!1}return n.prototype.dealDamage=function(e){if(!this.dead())if(this.shield&&e>0)return void(this.shield=!1);else return void(this.current-=e)},n.prototype.restoreHealth=function(e){if(!this.dead())this.current=Math.min(this.current+e,this.hp)},n.prototype.changePoint=function(e,n){if(this.hp+=n,this.current+=n,this.ap+=e,this.current>this.hp)this.current=this.hp},n.prototype.setPoint=function(e,n){if(null!=e)this.ap=e;if(null!=n)if(this.hp=n,this.current>this.hp)this.current=this.hp},n.prototype.info=function(){return{name:this.name,dead:this.dead(),hp:this.current,ap:this.frozen?0:this.ap,shield:this.shield}},n.prototype.dead=function(){return this.current<=0},n}();return n}),define("yogg/common/config",[],function(){var e=[{name:"背刺",cost:0,description:"对1名未受伤的敌对随从造成2点伤害。",deal:function(e){var n=e.allRole(!0,!0).filter(function(e){return e.current!==e.hp});if(n.length){var t=Math.floor(Math.random()*n.length),i=n[t];i.dealDamage(2)}}},{name:"激活",cost:0,description:"仅在本回合中，获得2个法力水晶。"},{name:"猎人印记",cost:0,description:"在本回合内，将1个随从的生命变为1。",deal:function(e){var n=e.randRole(!0);if(n)n.current=n.hp=1}},{name:"图腾之力",cost:0,description:"使你的图腾获得+2生命值。"},{name:"牺牲契约",cost:0,description:"牺牲一个恶魔，为你的英雄恢复5点生命值。"},{name:"先祖治疗",cost:0,description:"为一个随从恢复所有生命值并使其获得嘲讽。",deal:function(e){var n=e.randRole(!0);if(n)n.current=n.hp}},{name:"月火术",cost:0,description:"造成1点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(1)}},{name:"奥术飞弹",cost:1,description:"造成3点伤害，随机分配给敌方角色。",deal:function(e){for(var n=0;3>n;n++){var t=e.randRole(!1,!0);t.dealDamage(1)}}},{name:"奥术射击",cost:1,description:"造成2点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(2)}},{name:"保护之手",cost:1,description:"使一个随从获得圣盾。",deal:function(e){var n=e.randRole(!0);if(n)n.shield=!0}},{name:"冰霜震击",cost:1,description:"对一个敌方角色造成1点伤害，并使其冻结。",deal:function(e){var n=e.randRole(!1);n.dealDamage(1),n.frozen=!0}},{name:"腐蚀术",cost:1,description:"选择一个敌方随从，在你的回合开始时，消灭该随从。"},{name:"镜像",cost:1,description:"召唤两个0/2，并具有嘲讽的随从。",deal:function(e){e.addMinion({hp:2,name:"镜像",ap:0}),e.addMinion({hp:2,name:"镜像",ap:0})}},{name:"力量祝福",cost:1,description:"使一个随从获得+3攻击力。",deal:function(e){var n=e.randRole(!0);if(n)n.ap+=3}},{name:"灵魂之火",cost:1,description:"造成4点伤害，随机弃一张牌。",deal:function(e){var n=e.randRole();n.dealDamage(4),e.hero.supplementCard(-1)}},{name:"谦逊",cost:1,description:"使一个随从的攻击力变为1。",deal:function(e){var n=e.randRole(!0);if(n)n.ap=1}},{name:"神圣惩击",cost:1,description:"造成2点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(2)}},{name:"石化武器",cost:1,description:"在本回合中，使一个友方角色获得+3攻击力。",deal:function(e){var n=[e.hero].concat(e.friendlyMinions.filter(function(e){return!e.dead()})),t=Math.floor(Math.random()*n.length),i=n[t];i.ap+=3}},{name:"死亡缠绕",cost:1,description:"对一个随从造成1点伤害，如果死亡缠绕将其杀死，抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)if(n.dealDamage(1),n.dead())e.hero.drawCard(1)}},{name:"心灵视界",cost:1,description:"随机复制你的对手手牌中的一张牌，将其置入你的手牌。",deal:function(e){e.hero.supplementCard(1)}},{name:"旋风斩",cost:1,description:"对所有随从造成1点伤害。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.dealDamage(1)}},{name:"影袭",cost:1,description:"对敌方英雄造成3点伤害。",deal:function(e){e.enemy.dealDamage(3)}},{name:"斩杀",cost:1,description:"消灭一个受过伤害的敌方随从。",deal:function(e){var n=e.allRole(!0).filter(function(e){return e.current<e.hp});if(n.length){var t=Math.floor(Math.random()*n.length),i=n[t];i.current=0}}},{name:"爪击",cost:1,description:"使你的英雄获得2点护甲值，并在本回合中获得+2攻击力。",deal:function(e){e.hero.addArmor(2),e.hero.ap+=2}},{name:"真言术：盾",cost:1,description:"使一个随从获得+2生命值。抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)n.current+=2,n.hp+=2,e.hero.drawCard(1)}},{name:"致命药膏",cost:1,description:"使你的武器获得+2攻击力。"},{name:"追踪术",cost:1,description:"查看你卡堆顶部的3张牌，抽取1张，弃掉其它2张。",deal:function(e){e.hero.drawCard(1),e.hero.pushStack(-2)}},{name:"暗言术：痛",cost:2,description:"消灭一个攻击力小于或等于3的随从。",deal:function(e){var n=e.allRole(!0).filter(function(e){return e.ap<=3});if(n.length){var t=Math.floor(Math.random()*n.length),i=n[t];if(i)i.current=0}}},{name:"毒刃",cost:2,description:"造成1点伤害，抽一张牌。",deal:function(e){var n=e.randRole();n.dealDamage(1),e.hero.drawCard(1)}},{name:"风怒",cost:2,description:"使一个随从获得风怒。"},{name:"寒冰箭",cost:2,description:"对一个角色造成3点伤害，并使其冻结。",deal:function(e){var n=e.randRole();n.dealDamage(3),n.frozen=!0}},{name:"闷棍",cost:2,description:"将一个敌方随从移回其拥有者的手牌。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0,e.enemy.supplementCard(1)}},{name:"魔爆术",cost:2,description:"对所有敌方随从造成1点伤害。",deal:function(e){for(var n,t=e.allRole(!0,!0),i=0;n=t[i];i++)n.dealDamage(1)}},{name:"神圣之灵",cost:2,description:"使一个随从的生命值翻倍。",deal:function(e){var n=e.randRole(!0);if(n)n.current*=2,n.hp*=2}},{name:"圣光术",cost:2,description:"恢复6点生命值。",deal:function(e){var n=e.randRole();if(n)n.restoreHealth(6)}},{name:"顺劈斩",cost:2,description:"对2个随机敌方随从造成2点伤害。",deal:function(e){for(var n,t=e.randTwoEnemy(),i=0;n=t[i];i++)n.dealDamage(2)}},{name:"心灵震爆",cost:2,description:"对敌方英雄造成5点伤害。",deal:function(e){e.enemy.dealDamage(5)}},{name:"野性成长",cost:2,description:"获得一颗空的法力水晶。",deal:function(e){e.hero.supplementCard(1)}},{name:"野性印记",cost:2,description:"使1个随从获得嘲讽以及+2/+2。",deal:function(e){var n=e.randRole(!0);if(n)n.current+=2,n.hp+=2,n.ap+=2}},{name:"英勇打击",cost:2,description:"在本回合中，使你的英雄获得+4攻击力。",deal:function(e){e.hero.ap+=4}},{name:"暗言术：灭",cost:3,description:"消灭一个攻击力大于或等于5的随从。",deal:function(e){var n=e.allRole(!0).filter(function(e){return e.ap>=5});if(n.length){var t=Math.floor(Math.random()*n.length),i=n[t];if(i)i.current=0}}},{name:"暗影箭",cost:3,description:"对1名随从造成4点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(4)}},{name:"奥术智慧",cost:3,description:"抽2张牌。",deal:function(e){e.hero.drawCard(2)}},{name:"冰霜新星",cost:3,description:"冻结所有敌方随从。",deal:function(e){for(var n,t=e.allRole(!0,!0),i=0;n=t[i];i++)n.frozen=!0}},{name:"冲锋",cost:3,description:"使一个友方随从获得+2攻击力和冲锋。",deal:function(e){var n=e.friendlyMinions.filter(function(e){return!e.dead()});if(n.length){var t=Math.floor(Math.random()*n.length),i=n[t];i.ap+=2}}},{name:"刀扇",cost:3,description:"对所有敌方随从造成1点伤害，抽一张牌。",deal:function(e){for(var n,t=e.allRole(!0,!0),i=0;n=t[i];i++)n.dealDamage(1);e.hero.drawCard(1)}},{name:"动物伙伴",cost:3,description:"随机召唤1头野兽宠物。",deal:function(e){var n=Math.floor(3*Math.random());if(1===n)e.addMinion({name:"雷欧克",ap:2,hp:4});else if(2===n)e.addMinion({name:"霍夫",ap:4,hp:2});else e.addMinion({name:"米莎",ap:4,hp:4})}},{name:"盾牌格挡",cost:3,description:"获得5点护甲。抽1张牌。",deal:function(e){e.hero.addArmor(5),e.hero.drawCard(1)}},{name:"杀戮命令",cost:3,description:"造成3点伤害。如果你有野兽，那么造成5点伤害取而代之。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3)}},{name:"吸取生命",cost:3,description:"造成2点伤害，为你的英雄恢复2点生命值。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(4);e.hero.restoreHealth(2)}},{name:"妖术",cost:3,description:"使一个随从变形成为一个0/1并具有嘲讽的青蛙。",data:function(e){var n=e.randRole(!0);if(n)n.current=0;e.addMinion({hp:1,ap:0,name:"青蛙"})}},{name:"野蛮咆哮",cost:3,description:"在本回合中，使你的所有角色获得+2攻击力。",deal:function(e){for(var n,t=[e.hero].concat(e.friendlyMinions.filter(function(e){return!e.dead()})),i=0;n=t[i];i++)n.ap+=2}},{name:"治疗之触",cost:3,description:"恢复8点生命值。",deal:function(e){var n=e.randRole();if(n)n.restoreHealth(8)}},{name:"变形术",cost:4,description:"使一个随从变形成为1/1的绵羊。",data:function(e){var n=e.randRole(!0);if(n)n.current=0;e.addMinion({hp:1,ap:1,name:"绵羊"})}},{name:"地狱烈焰",cost:4,description:"对所有角色造成3点伤害。",deal:function(e){for(var n,t=e.allRole(),i=0;n=t[i];i++)n.dealDamage(3)}},{name:"多重射击",cost:4,description:"随机对2名敌对随从造成3点伤害。",deal:function(e){for(var n,t=e.randTwoEnemy(),i=0;n=t[i];i++)n.dealDamage(3)}},{name:"愤怒之锤",cost:4,description:"造成3点伤害，抽一张牌。",deal:function(e){var n=e.randRole();n.dealDamage(3),e.hero.drawCard(1)}},{name:"奉献",cost:4,description:"对所有敌人造成2点伤害。",deal:function(e){for(var n,t=e.allRole(!1,!0),i=0;n=t[i];i++)n.dealDamage(2)}},{name:"横扫",cost:4,description:"对一个敌人造成4点伤害，并对所有其他敌人造成1点伤害。",deal:function(e){for(var n,t=e.allRole(!1,!0),i=e.randRole(!1,!0),r=0;n=t[r];r++)if(n!==i)n.dealDamage(1);else n.dealDamage(4)}},{name:"火球术",cost:4,description:"造成6点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(6)}},{name:"王者祝福",cost:4,description:"使一个随从获得+4/+4。",deal:function(e){var n=e.randRole(!0);if(n)n.hp+=4,n.current+=4,n.ap+=4}},{name:"刺杀",cost:5,description:"消灭一个敌方随从。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0}},{name:"神圣新星",cost:5,description:"对所有敌方角色造成2点伤害，为所有友方角色恢复2点生命值。",deal:function(e){for(var n,t=e.allRole(!1,!0),i=0;n=t[i];i++)n.dealDamage(2);t=[e.hero].concat(e.friendlyMinions.filter(function(e){return!e.dead()}));for(var n,i=0;n=t[i];i++)n.restoreHealth(2)}},{name:"嗜血",cost:5,description:"在本回合中，使你的随从获得+3攻击力。",deal:function(e){for(var n,t=e.friendlyMinions.filter(function(e){return!e.dead()}),i=0;n=t[i];i++)n.ap+=3}},{name:"消失",cost:6,description:"将所有随从移回其拥有者的手牌。",deal:function(e){for(var n,t=e.allRole(!0,!0).length,i=e.allRole(!0),r=0;n=i[r];r++)n.current=0;e.hero.supplementCard(i.length-t),e.enemy.supplementCard(t)}},{name:"星火术",cost:6,description:"造成5点伤害，抽1张牌。",deal:function(e){var n=e.randRole();n.dealDamage(5),e.hero.drawCard(1)}},{name:"疾跑",cost:7,description:"抽4张牌。",deal:function(e){e.hero.drawCard(4)}},{name:"烈焰风暴",cost:7,description:"对所有敌方随从造成4点伤害。",deal:function(e){for(var n,t=e.allRole(!0,!0),i=0;n=t[i];i++)n.dealDamage(4)}},{name:"精神控制",cost:10,description:"获得一个敌方随从的控制权。",deal:function(e){var n=e.randRole(!0,!0);if(n){var t=e.enemyMinions.indexOf(n);if(e.enemyMinions.splice(t,1),e.friendlyMinions.filter(function(e){return!e.dead()}).length<=6)e.friendlyMinions.push(n)}}},{name:"暗影步",cost:0,description:"使一个友方随从移回你的手牌，它的法力值消耗减少(2)点。",deal:function(e){var n=e.friendlyMinions.filter(function(e){return!e.dead()}),t=Math.floor(Math.random()*n.length),i=n[t];if(i)i.current=0,e.hero.supplementCard(1)}},{name:"沉默",cost:0,description:"沉默一个随从。"},{name:"怒火中烧",cost:0,description:"对一个随从造成1点伤害，该随从获得+2攻击力。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(1),n.ap+=2}},{name:"伺机待发",cost:0,description:"在本回合中，你所施放的下一个法术的法力值消耗减少(3)点。"},{name:"治疗之环",cost:0,description:"为所有随从恢复4点生命值。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.restoreHealth(4)}},{name:"冰枪术",cost:1,description:"使一个角色冻结，如果它已经被冻结，则改为对其造成4点伤害。",deal:function(e){var n=e.randRole();if(n.frozen)n.dealDamage(4);n.frozen=!0}},{name:"叉状闪电",cost:1,description:"对2个随机敌方随从造成2点伤害，过载：(2)",deal:function(e){for(var n,t=e.randTwoEnemy(),i=0;n=t[i];i++)n.dealDamage(2)}},{name:"忏悔",cost:1,description:"奥秘：当你的对手召唤一个随从，使该随从的生命值降为1。",deal:function(e){e.hero.addSecret("忏悔")}},{name:"崇高牺牲",cost:1,description:"奥秘：每当一个敌人攻击时，召唤一个2/1的防御者，并使其成为攻击的目标。",deal:function(e){e.hero.addSecret("崇高牺牲")}},{name:"大地震击",cost:1,description:"沉默一个随从，然后对其造成1点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.shield=!1,n.dealDamage(1)}},{name:"盾牌猛击",cost:1,description:"你每有1点护甲值，便对一个随从造成1点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(e.hero.armor)}},{name:"救赎",cost:1,description:"奥秘：当一个你的随从死亡时，使其回到战场，并具有1点生命值。",deal:function(e){e.hero.addSecret("救赎")}},{name:"狂野怒火",cost:1,description:"在本回合内，使1个野兽获得+2攻击和免疫。"},{name:"冷血",cost:1,description:"使一个随从获得+2攻击力；连击：改为获得+4攻击力。",deal:function(e){var n=e.randRole(!0);if(n)n.ap+=2}},{name:"力量的代价",cost:1,description:"直到回合结束，使一个友方随从获得+4/+4，然后将其消灭。",deal:function(e){var n=e.friendlyMinions.filter(function(e){return!e.dead()});if(n){var t=Math.floor(Math.random()*n.length),i=n[t];if(i)i.hp+=4,i.current+=4,i.ap+=4}}},{name:"闪电箭",cost:1,description:"造成3点伤害，过载：(1)",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3)}},{name:"升级！",cost:1,description:"如果你有一把武器，使它获得+1/+1。否则，装备一把1/3的武器。"},{name:"心灵之火",cost:1,description:"使一个随从的攻击力等同于其生命值。",deal:function(e){var n=e.randRole(!0);if(n)n.ap=n.current}},{name:"野蛮之击",cost:1,description:"对一个随从造成等同于你的英雄攻击力的伤害。",deal:function(e){var n=e.hero.ap,t=e.randRole(!0);if(t&&n)t.dealDamage(n)}},{name:"以眼还眼",cost:1,description:"奥秘：每当你的英雄受到伤害时，对敌方英雄造成等量的伤害。",deal:function(e){e.hero.addSecret("以眼还眼")}},{name:"隐藏",cost:1,description:"直到你的下个回合，使所有友方随从获得潜行。"},{name:"智慧祝福",cost:1,description:"选择一个随从，每当它进行攻击时，抽一张牌。"},{name:"自然平衡",cost:1,description:"消灭一个随从，你的对手抽两张牌。",deal:function(e){var n=e.randRole(!0);if(n)n.current=0;e.enemy.drawCard(2)}},{name:"爆炸陷阱",cost:2,description:"奥秘：当你的英雄受到攻击时，对所有敌人造成2点伤害。",deal:function(e){e.hero.addSecret("爆炸陷阱")}},{name:"背叛",cost:2,description:"一个敌方随从对其相邻的随从造成等同于其攻击力的伤害。",deal:function(e){var n=e.randRole(!0,!0);if(n)for(var t,i=e.neighbouringRoles(n),r=0;t=i[r];r++)t.dealDamage(n.ap)}},{name:"冰冻陷阱",cost:2,description:"奥秘：当1个敌对随从攻击时，让其返回到所有者手中，并令其消耗增加(2)",deal:function(e){e.hero.addSecret("冰冻陷阱")}},{name:"刺骨",cost:2,description:"造成2点伤害。连击：造成4点伤害取而代之。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(2)}},{name:"毒蛇陷阱",cost:2,description:"奥秘：当你的1个随从遭到攻击时，召唤3条1/1毒蛇。",deal:function(e){e.hero.addSecret("毒蛇陷阱")}},{name:"恶魔之火",cost:2,description:"对一个随从造成2点伤害，如果该随从是友方恶魔，则改为使其获得+2/+2。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(2)}},{name:"愤怒",cost:2,description:"抉择：对一个随从造成3点伤害；或者造成1点伤害并抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)if(Math.random()<.5)n.dealDamage(3);else n.dealDamage(1),e.hero.drawCard(1)}},{name:"剑刃乱舞",cost:2,description:"摧毁你的武器，对所有敌方角色造成等同于其攻击力的伤害。"},{name:"狙击",cost:2,description:"奥秘：当对手打出1个随从时，对该随从造成4点伤害。",deal:function(e){e.hero.addSecret("狙击")}},{name:"狂暴",cost:2,description:"使一个受过伤害的随从获得+3/+3。",deal:function(e){var n=e.allRole(!0).filter(function(e){return e.current<e.hp});if(n.length){var t=Math.floor(Math.random()*n.length),i=n[t];i.current+=3,i.hp+=3,i.ap=3}}},{name:"猛击",cost:2,description:"对一个随从造成2点伤害，如果它依然存活，则抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)if(n.dealDamage(2),!n.dead())e.hero.drawCard(1)}},{name:"命令怒吼",cost:2,description:"本回合内，你随从的血量无法低于1点。"},{name:"生而平等",cost:2,description:"将所有随从的生命值变为1。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.current=n.hp=1}},{name:"误导",cost:2,description:"奥秘：当一个角色攻击你的英雄时，让他随机攻击另外一个角色取而代之。",deal:function(e){e.hero.addSecret("误导")}},{name:"先祖之魂",cost:2,description:"选择一个随从，当该随从被消灭时，它将返回战场。"},{name:"野性之力",cost:2,description:"抉择：使你的随从获得+1/+1；或者召唤一个3/2的猎豹。",deal:function(e){if(Math.random()<.5)e.addMinion({name:"猎豹",ap:3,hp:2});else for(var n,t=e.friendlyMinions.filter(function(e){return e.dead()}),i=0;n=t[i];i++)n.ap+=1,n.hp+=1,n.current+=1}},{name:"战斗怒火",cost:2,description:"每有一个受到伤害的友方角色，便抽一张牌。",deal:function(e){for(var n,t=[e.hero].concat(e.friendlyMinions.filter(function(e){return!e.dead()})),i=0;n=t[i];i++)if(n.current<n.hp)e.hero.drawCard(1)}},{name:"照明弹",cost:2,description:"使所有随从失去潜行效果。摧毁敌方所有奥秘。抽1张牌。",deal:function(e){e.hero.drawCard(1)}},{name:"暗影形态",cost:3,description:"你的英雄技能变为“造成2点伤害”，如果已经处于暗影形态下：改为“造成3点伤害”。"},{name:"法术反制",cost:3,description:"奥秘：当你的对手施放法术时，反制该法术。",deal:function(e){e.hero.addSecret("法术反制")}},{name:"感知恶魔",cost:3,description:"从你的牌库中随机将2张恶魔牌置入你的手牌。"},{name:"关门放狗",cost:3,description:"战场上每有一个敌方随从，便召唤一个1/1并具有冲锋的猎犬。",deal:function(e){for(var n=e.allRole(!0,!0).length,t=0;n>t;t++)e.addMinion({name:"猎犬",ap:1,hp:1})}},{name:"寒冰护体",cost:3,description:"奥秘：当你的英雄受到攻击时，获得8点护甲值。",deal:function(e){e.hero.addSecret("寒冰护体")}},{name:"寒冰屏障",cost:3,description:"奥秘：每当你的英雄将要承受致命伤害时，防止这些伤害，并使其在本回合中获得免疫。",deal:function(e){e.hero.addSecret("寒冰屏障")}},{name:"镜像实体",cost:3,description:"奥秘：当一个敌方随从进行攻击时，召唤一个该随从的复制。",deal:function(e){e.hero.addSecret("镜像实体")}},{name:"裂颅之击",cost:3,description:"对敌方英雄造成2点伤害；连击：在下个回合将其移回你的手牌。",deal:function(e){e.enemy.dealDamage(2)}},{name:"扰咒术",cost:3,description:"奥秘：当一个敌方法术以一个随从为目标时，召唤一个1/3的随从并使其成为新的目标。",deal:function(e){e.hero.addSecret("扰咒术")}},{name:"熔岩爆裂",cost:3,description:"造成5点伤害，过载：(2)",deal:function(e){var n=e.randRole();if(n)n.dealDamage(5)}},{name:"闪电风暴",cost:3,description:"对所有敌方随从造成2到3点伤害，过载：(2)",deal:function(e){for(var n,t=e.allRole(!0,!0),i=0;n=t[i];i++)n.dealDamage(2+Math.floor(2*Math.random()))}},{name:"神恩术",cost:3,description:"抽若干数量的牌，直到你的手牌数量等同于你的对手的手牌数量。"},{name:"视界术",cost:3,description:"抽一张牌，该牌的法力值消耗减少(3)点。",deal:function(e){e.hero.drawCard(1)}},{name:"思维窃取",cost:3,description:"复制对手的牌库中的2张牌，并将其置入你的手牌。",deal:function(e){e.hero.supplementCard(2)}},{name:"野性狼魂",cost:3,description:"召唤2个2/3并具有嘲讽的幽灵狼。过载：(2)",deal:function(e){e.addMinion({name:"幽灵狼",ap:2,hp:3}),e.addMinion({name:"幽灵狼",ap:2,hp:3})}},{name:"蒸发",cost:3,description:"奥秘：当一个随从攻击你的英雄，将其消灭。",deal:function(e){e.hero.addSecret("蒸发")}},{name:"致命射击",cost:3,description:"随机摧毁1个敌对随从。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0}},{name:"自然印记",cost:3,description:"抉择：使一个随从获得+4攻击力；或者+4生命值并具有嘲讽。",deal:function(e){var n=e.randRole(!0);if(n)if(Math.random()<.5)n.ap+=4;else n.hp+=4,n.current+=4}},{name:"暗影狂乱",cost:4,description:"直到回合结束，获得一个攻击力小于或等于3的敌方随从的控制权。"},{name:"暗影烈焰",cost:4,description:"消灭一个友方随从，对所有敌方随从造成等同于其攻击力的伤害。",deal:function(e){var n=e.friendlyMinions.filter(function(e){return!e.dead()});if(n.length){var t=Math.floor(Math.random()*n.length),i=n[t];n=e.allRole(!0,!0),i.current=0;for(var r,a=0;r=n[a];a++)r.dealDamage(i.ap)}}},{name:"冰锥术",cost:4,description:"冻结一个随从和其相邻的随从，并对它们造成1点伤害。",deal:function(e){var n=e.randRole(!0);if(n)for(var t,i=e.neighbouringRoles(n).concat(n),r=0;t=i[r];r++)t.frozen=!0,t.dealDamage(1)}},{name:"丛林之魂",cost:4,description:"使你的随从获得“亡语：召唤一个2/2的树人。”"},{name:"控心术",cost:4,description:"随机复制对手的牌库中的一张随从牌，并将其置入战场。"},{name:"群体驱散",cost:4,description:"沉默所有敌方随从，抽一张牌。",deal:function(e){e.hero.drawCard(1)}},{name:"撕咬",cost:4,description:"在本回合中，使你的英雄获得+4攻击力和4点护甲值。",deal:function(e){e.hero.addArmor(4),e.hero.ap+=4}},{name:"致死打击",cost:4,description:"造成4点伤害；如果你的英雄的生命值小于或等于12点，则改为造成6点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(e.hero.hp<=12?6:4)}},{name:"爆炸射击",cost:5,description:"对1个随从造成5点伤害，并对相邻目标造成2点伤害。",deal:function(e){var n=e.randRole(!0);if(n){var t=e.neighbouringRoles(n);n.dealDamage(5);for(var i,r=0;i=t[r];r++)i.dealDamage(2)}}},{name:"绝命乱斗",cost:5,description:"随机选择一个随从，消灭除了该随从外的所有其他随从。",deal:function(e){for(var n,t=e.randRole(!0),i=e.allRole(!0),r=0;n=i[r];r++)if(n!==t)n.current=0}},{name:"末日灾祸",cost:5,description:"对一个角色造成2点伤害，如果末日灾祸杀死该角色，随机召唤一个恶魔。",deal:function(e){var n=e.randRole();if(n.dealDamage(2),n.dead())e.addMinion({name:"随机恶魔",ap:4,hp:5})}},{name:"神圣愤怒",cost:5,description:"抽一张牌，并造成等同于其法力值消耗的伤害。",deal:function(e){var n=e.randRole(),t=Math.floor(13*Math.random());if(11===t)t=20;n.dealDamage(t)}},{name:"受祝福的勇士",cost:5,description:"使一个随从的攻击力翻倍。",deal:function(e){var n=e.randRole(!0);if(n)n.ap*=2}},{name:"星辰坠落",cost:5,description:"抉择：对一个随从造成5点伤害；或者对所有敌方随从造成2点伤害。",deal:function(e){if(!(Math.random()>.5))for(var n,t=e.allRole(!0,!0),i=0;n=t[i];i++)n.dealDamage(2);else{var n=e.randRole(!0);if(n)n.dealDamage(5)}}},{name:"滋养",cost:5,description:"抉择：获得2个法力水晶；或者抽3张牌。",deal:function(e){if(Math.random()<.5)e.hero.drawCard(3)}},{name:"暴风雪",cost:6,description:"对所有敌方随从造成2点伤害，并使其冻结。",deal:function(e){for(var n,t=e.allRole(!0,!0),i=0;n=t[i];i++)n.dealDamage(2),n.frozen=!0}},{name:"复仇之怒",cost:6,description:"造成8点伤害，随机分配给敌方角色。",deal:function(e){for(var n=0;8>n;n++){var t=e.randRole(!1,!0);t.dealDamage(1)}}},{name:"灵魂虹吸",cost:6,description:"消灭一个随从，为你的英雄恢复3点生命值。",deal:function(e){var n=e.randRole(!0);if(n)n.current=0,e.hero.restoreHealth(3)}},{name:"神圣之火",cost:6,description:"造成5点伤害。为你的英雄恢复5点生命值。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(5);e.hero.restoreHealth(5)}},{name:"自然之力",cost:6,description:"召唤3个2/2并具有冲锋的树人，在回合结束时，消灭这些树人。",deal:function(e){e.addMinion({name:"树人",ap:2,hp:2}),e.addMinion({name:"树人",ap:2,hp:2}),e.addMinion({name:"树人",ap:2,hp:2})}},{name:"扭曲虚空",cost:8,description:"消灭所有随从。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.current=0}},{name:"圣疗术",cost:8,description:"恢复8点生命。抽3张牌。",deal:function(e){var n=e.randRole();n.restoreHealth(8),e.hero.drawCard(3)}},{name:"炎爆术",cost:10,description:"造成10点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(10)}},{name:"复仇",cost:1,description:"奥秘：当你的随从死亡时，使一个随机友方随从获得+3/+2。",deal:function(e){e.hero.addSecret("复仇")}},{name:"转生",cost:2,description:"消灭一个随从，然后将其复活，并恢复所有生命值。",deal:function(e){var n=e.randRole(!0);if(n)n.current=n.hp}},{name:"复制",cost:3,description:"当一个友方随从死亡时，将两个该随从的复制置入你的手牌。",deal:function(e){e.hero.addSecret("复制")}},{name:"剧毒之种",cost:4,description:"消灭所有随从，并召唤等量的2/2的树人代替他们。",deal:function(e){for(var n,t=e.allRole(!0,!0).length,i=e.allRole(!0),r=0;n=i[r];r++)n.current=0;for(var a=0;t>a;a++)e.addEnemyMinion({name:"树人",ap:2,hp:2});for(var a=0;a<i.length-t;a++)e.addMinion({name:"树人",ap:2,hp:2})}},{name:"纳鲁之光",cost:1,description:"恢复3点生命值。如果该目标仍处于受伤状态，则召唤一个圣光护卫者。",deal:function(e){var n=e.randRole();if(n.restoreHealth(3),"current"in n&&n.current<n.hp||!("current"in n)&&n.hp<30)e.addMinion({name:"圣光护卫者",ap:1,hp:3})}},{name:"暗色炸弹",cost:2,description:"造成3点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3)}},{name:"不稳定的传送门",cost:2,description:"将一个随机随从卡牌加入你的手牌。该随从的法力值消耗减少(3)点。",deal:function(e){e.hero.supplementCard(1)}},{name:"光明圣印",cost:2,description:"为你的英雄恢复4点生命值，并在本回合中获得+2攻击力。",deal:function(e){e.hero.restoreHealth(4),e.hero.ap+=2}},{name:"假死",cost:2,description:"触发所有友方随从亡语效果。"},{name:"连环爆裂",cost:2,description:"造成3到6点伤害，过载：(1)。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3+Math.floor(3*Math.random()))}},{name:"烈焰轰击",cost:2,description:"对一个随机敌方随从造成4点伤害。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.dealDamage(4)}},{name:"召唤宠物",cost:2,description:"抽一张牌。如果该牌是野兽牌，则其法力值消耗减少(4)点。",deal:function(e){e.hero.drawCard(1)}},{name:"弹射之刃",cost:3,description:"对一个随机随从造成1点伤害。重复此效果，直到某个随从死亡。",deal:function(e){var n=null;do if(n=e.randRole(!0))n.dealDamage(1);while(n&&!n.dead())}},{name:"维纶的恩泽",cost:3,description:"使一个随从获得+2/+4并具有法术伤害+1。",deal:function(e){var n=e.randRole(!0);if(n)n.ap+=2,n.hp+=4,n.current+=4}},{name:"作战动员",cost:3,description:"召唤三个1/1白银之手新兵，装备一把1/4的武器。",deal:function(e){e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1})}},{name:"暗中破坏",cost:4,description:"消灭一个随机敌方随从，连击：并且摧毁你的对手的武器。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0}},{name:"麦迪文的残影",cost:4,description:"复制你的所有随从，并将其置入你的手牌。",deal:function(e){var n=e.friendlyMinions.filter(function(e){return!e.dead()}).length;e.hero.supplementCard(n)}},{name:"先祖召唤",cost:4,description:"每个玩家从手牌中将一个随机随从置入战场。"},{name:"小鬼爆破",cost:4,description:"对一个随从造成2-4点伤害。每造成1点伤害，便召唤一个1/1的小鬼。",deal:function(e){var n=2+Math.floor(3*Math.random()),t=e.randRole(!0);if(t){t.dealDamage(n);for(var i=0;n>i;i++)e.addMinion({name:"小鬼",ap:1,hp:1})}}},{name:"修补匠的磨刀油",cost:4,description:"使你的武器获得+3攻击力。连击：使一个随机友方随从获得+3攻击力。"},{name:"恶魔之心",cost:5,description:"对一个随从造成5点伤害，如果该随从是友方恶魔，则改为使其获得+5/+5。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(5)}},{name:"眼镜蛇射击",cost:5,description:"对一个随从和敌方英雄造成3点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(3);e.enemy.dealDamage(3)}},{name:"黑暗低语者",cost:6,description:"抉择：召唤5个小精灵；或者使一个随从获得+5/+5并具有嘲讽。",deal:function(e){if(Math.random()<.5){var n=e.randRole(!0);if(n)n.hp+=5,n.current+=5,n.ap+=5;else e.addMinion({name:"小精灵",ap:1,hp:1}),e.addMinion({name:"小精灵",ap:1,hp:1}),e.addMinion({name:"小精灵",ap:1,hp:1}),e.addMinion({name:"小精灵",ap:1,hp:1}),e.addMinion({name:"小精灵",ap:1,hp:1})}}},{name:"回收",cost:6,description:"将一个敌方随从洗回你的对手的牌库。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0,e.enemy.pushStack(1)}},{name:"圣光炸弹",cost:6,description:"对所有随从造成等同于其攻击力的伤害。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.dealDamage(n.ap)}},{name:"重碾",cost:7,description:"消灭一个随从。如果你控制任何受伤的随从，该法术的法力值消耗减少(4)点。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0}},{name:"生命之树",cost:9,description:"为所有角色恢复所有生命值。",deal:function(e){for(var n,t=e.allRole(),i=0;n=t[i];i++)if("current"in n)n.current=n.hp;else n.hp=30}},{name:"复仇打击",cost:2,description:"对所有随从造成1点伤害。如果你的生命值小于或等于12点，则改为造成3点伤害。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.dealDamage(e.hero.hp<=12?3:1)}},{name:"复活术",cost:2,description:"随机召唤一个在本局对战中死亡的友方随从。"},{name:"快速射击",cost:2,description:"造成3点伤害。如果你没有其他手牌，则抽一张牌。",deal:function(e){var n=e.randRole();n.dealDamage(3)}},{name:"熔岩震击",cost:2,description:"造成2点伤害。将你所有过载的法力水晶解锁。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(2)}},{name:"夜幕奇袭",cost:2,description:"选择一个随从。将该随从的3个复制洗入你的牌库。",deal:function(e){var n=e.randRole(!0);if(n)e.hero.pushStack(3)}},{name:"恶魔之怒",cost:3,description:"对所有非恶魔随从造成2点伤害。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.dealDamage(2)}},{name:"龙息术",cost:5,description:"造成4点伤害。在本回合中每有一个随从死亡，该牌的法力值消耗就减少(1)点。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(4)}},{name:"严正警戒",cost:5,description:"抽两张牌。在本回合中每有一个随从死亡，该牌的法力值消耗就减少(1)点。",deal:function(e){e.hero.drawCard(2)}},{name:"奥数冲击",cost:1,description:"对一个随从造成2点伤害。该法术在受到法术伤害的增益效果时，效果翻倍。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(2)}},{name:"活体根须",cost:1,description:"抉择：造成2点伤害；或者召唤两个1/1的树苗。",deal:function(e){if(Math.random()<.5){var n=e.randRole();n.dealDamage(2)}else e.addMinion({name:"树苗",ap:1,hp:1}),e.addMinion({name:"树苗",ap:1,hp:1})}},{name:"快速治疗",cost:1,description:"恢复5点生命值。",deal:function(e){var n=e.randRole();if(n)n.restoreHealth(5)}},{name:"真言术：耀",cost:1,description:"选择一个随从。每当其进行攻击，为你的英雄恢复4点生命值。"},{name:"争强好胜",cost:1,description:"奥秘：在你的回合开始时，使你的随从获得+1/+1。",deal:function(e){e.hero.addSecret("争强好胜")}},{name:"捕熊陷阱",cost:2,description:"奥秘：在你的英雄受到攻击后，召唤一个3/3并具有嘲讽的灰熊",deal:function(e){e.hero.addSecret("捕熊陷阱")}},{name:"策反",cost:2,description:"复制一个敌方随从，并将其置入你的手牌。",deal:function(e){e.hero.supplementCard(1)}},{name:"恶魔融合",cost:2,description:"使一个恶魔获得+3/+3，使你的对手获得一个法力水晶。"},{name:"加固",cost:2,description:"使你具有嘲讽的随从获得+2/+2。"},{name:"迷乱",cost:2,description:"使所有随从的攻击力和生命值互换。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.hp=n.ap,n.ap=n.current,n.current=n.hp}},{name:"先祖知识",cost:2,description:"抽两张牌。过载：(2)",deal:function(e){e.hero.drawCard(2)}},{name:"子弹上膛",cost:2,description:"在本回合中，每当你施放一个法术，随机将一张猎人职业牌置入你的手牌。"},{name:"变形术：野猪",cost:3,description:"使一个随从变形为4/2并具有冲锋的野猪。",deal:function(e){var n=e.randRole(!0);if(n)n.hp=n.current=2,n.current=4,n.name="野猪"}},{name:"腐根",cost:3,description:"消灭一个随从。随机将一个随从置入你对手的手牌。",deal:function(e){var n=e.randRole(!0);if(n)n.current=0,e.enemy.supplementCard(1)}},{name:"轮回",cost:3,description:"奥秘：当一个友方随从死亡时，随机召唤一个法力值消耗相同的随从。",deal:function(e){e.hero.addSecret("轮回")}},{name:"怒袭",cost:3,description:"造成3点伤害。获得3点护甲值。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3);e.hero.addArmor(3)}},{name:"剽窃",cost:3,description:"随机将两张（你的对手职业的）职业卡牌加入你的手牌。",deal:function(e){e.hero.supplementCard(2)}},{name:"潜于地下",cost:3,description:"将三张“伏击”牌洗入你对手的牌库，当你的对手抽到该牌时，你召唤一个4/4的蛛魔。",deal:function(e){e.enemy.pushStack(3)}},{name:"强风射击",cost:3,description:"对一个随从及其相邻的随从造成2点伤害。",deal:function(e){var n=e.randRole(!0);if(n){var t=e.neighbouringRoles(n);n.dealDamage(2);for(var i,r=0;i=t[r];r++)i.dealDamage(2)}}},{name:"英勇圣印",cost:3,description:"使一个随从获得+3攻击力，并具有圣盾。",deal:function(e){var n=e.randRole(!0);if(n)n.ap+=3,n.shield=!0}},{name:"元素毁灭",cost:3,description:"对所有随从造成4-5点伤害。过载：(5)",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.dealDamage(4+Math.floor(2*Math.random()))}},{name:"治疗波",cost:3,description:"恢复7点生命值。揭示双方牌库里的一张随从牌，如果你的牌法力消耗较大，则恢复14点生命值。",deal:function(e){var n=e.randRole();if(n.restoreHealth(7),Math.random()<.5)n.restoreHealth(7)}},{name:"加拉克苏斯之拳",cost:4,description:"当你打出或丢弃该牌时，对一个随机敌人造成4点伤害。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.dealDamage(4)}},{name:"星界沟通",cost:4,description:"获得十个法力水晶。弃掉你的手牌。"},{name:"烈焰长枪",cost:5,description:"对一个随从造成8点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(8)}},{name:"黑暗契约",cost:6,description:"随机消灭两个敌方随从。随机弃两张牌。",deal:function(e){for(var n,t=e.randTwoEnemy(),i=0;n=t[i];i++)n.current=0;e.hero.supplementCard(-2)}},{name:"精英对决",cost:6,description:"除了每个玩家攻击力最高的随从之外，消灭其他所有随从。",deal:function(e){var n=e.friendlyMinions.filter(function(e){return!e.dead()});if(n.length>1){for(var t,i=0,r=null,a=0;t=n[a];a++)if(t.ap>=i)i=t.ap,r=t;for(var t,a=0;t=n[a];a++)if(t!==r)t.current=0}if(n=e.enemyMinions.filter(function(e){return!e.dead()}),n.length>1){for(var t,i=0,r=null,a=0;t=n[a];a++)if(t.ap>=i)i=t.ap,r=t;for(var t,a=0;t=n[a];a++)if(t!==r)t.current=0}}},{name:"天降蛛群",cost:6,description:"召唤三个1/1的结网蛛。",deal:function(e){e.addMinion({name:"结网蛛",ap:1,hp:1}),e.addMinion({name:"结网蛛",ap:1,hp:1}),e.addMinion({name:"结网蛛",ap:1,hp:1})}},{name:"审判",cost:1,description:"奥秘：当你的对手打出一张随从牌时，如果他控制至少三个随从，则将其消灭。",deal:function(e){e.hero.addSecret("审判")}},{name:"乌鸦神像",cost:1,description:"抉择：发现一张随从牌；或者发现一张法术牌。",deal:function(e){e.hero.supplementCard(1)}},{name:"毒镖陷阱",cost:2,description:"奥秘：当对方使用英雄技能时，对一个随机敌人造成5点伤害。",deal:function(e){e.hero.addSecret("毒镖陷阱")}},{name:"拉法姆的诅咒",cost:2,description:"使你的对手获得一张“诅咒！”牌。在对手的回合开始时，如果它在对手的手牌中，则造成2点伤害。"},{name:"探险帽",cost:2,description:"使一个随从获得+1/+1，以及亡语：将一个探险帽置入你的手牌。",deal:function(e){var n=e.randRole(!0);if(n)n.ap+=1,n.hp+=1,n.current+=1}},{name:"老旧的火把",cost:3,description:"造成3点伤害。将一张可造成6点伤害的“炽烈的火把”洗入你的牌库。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3),e.hero.pushStack(1)}},{name:"极恶之咒",cost:5,description:"对所有随从造成3点伤害。将该牌洗入你对手的牌库。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.dealDamage(3);e.enemy.supplementCard(1)}},{name:"埋葬",cost:6,description:"选择一个敌方随从。将该随从洗入你的牌库。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.hp=0,e.hero.pushStack(1)}},{name:"鱼人恩典",cost:7,description:"使你的随从获得+2/+2。你每控制一个鱼人，该牌的法力值消耗便减少(1)点。",deal:function(e){for(var n,t=e.friendlyMinions.filter(function(e){return!e.dead()}),i=0;n=t[i];i++)n.ap+=2,n.hp+=2,n.current+=2}},{name:"亡者归来",cost:10,description:"召唤七个在本局对战中死亡的鱼人。"},{name:"禁忌畸变",cost:0,description:"消耗你所有的法力值，随机召唤一个法力值消耗相同的随从。",deal:function(e){e.addMinion({name:"小精灵",hp:1,ap:1})}},{name:"禁忌烈焰",cost:0,description:"消耗你所有的法力值，对一个随从造成等同于所消耗法力值数量的伤害。"},{name:"禁忌治疗",cost:0,description:"消耗你所有的法力值，恢复等同于所消耗法力值数量两倍的生命值。"},{
name:"弃暗投明",cost:2,description:"将你的英雄技能和术士职业牌替换成其他职业的。这些牌的法力消耗减少(1)点。"},{name:"亚煞极印记",cost:2,description:"使一个随从获得+2/+2。如果该随从是野兽，抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)n.ap+=2,n.hp+=2,n.current+=2}},{name:"寄生感染",cost:3,description:"使你的所有随从获得“亡语：随机将一张野兽牌置入你的手牌。”"},{name:"暗言术：骇",cost:4,description:"消灭所有攻击力小于或等于2的随从。",deal:function(e){for(var n,t=e.allRole(!0).filter(function(e){return e.ap<=2}),i=0;n=t[i];i++)n.current=0}},{name:"惩黑除恶",cost:5,description:"召唤五个1/1的白银之手新兵。",deal:function(e){e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1})}},{name:"秘法宝典",cost:5,description:"随机将三张法师的法术牌置入你的手牌。",deal:function(e){e.hero.supplementCard(3)}},{name:"末日降临",cost:10,description:"消灭所有随从。每消灭一个随从，便抽一张牌。",deal:function(e){for(var n,t=e.allRole(!0),i=0;n=t[i];i++)n.current=0;e.hero.drawCard(t.length)}},{name:"狂乱传染",cost:3,description:"造成9点伤害，随机分配到所有角色身上",deal:function(e){for(var n=0;9>n;n++){var t=e.randRole();t.dealDamage(1)}}}];return e}),define("yogg/common/Magic",["require","babel-runtime/helpers/classCallCheck","./config"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=require("./config"),exports={},t=function(){function n(t){if(e(this,n),this.name="",this.cost=0,this.description="",this.name=t.name,this.cost=t.cost,this.description=t.description,t.deal)this.deal=t.deal}return n.prototype.deal=function(e){},n}(),i=exports.MAGIC_LIST=n.map(function(e){return new t(e)}),r=exports.MAGIC_MAP={};i.forEach(function(e){return r[e.name]=e});exports.Magic=function(){function n(t,i,r){e(this,n),this.list=[],this.scene=null,this.scene=t;for(var a=0;i>a;a++)this.list.push(n.randomMagic(r))}return n.prototype.deal=function(){for(var e,n=0;(e=this.list[n])&&(e.deal(this.scene),!this.scene.finished());n++);},n.randomMagic=function(e){var n=Math.floor(Math.random()*(e?i.length-27:i.length));if(n>150&&e)n+=27;return i[n]},n}();return exports}),define("yogg/common/Scene",["require","babel-runtime/helpers/classCallCheck","./Hero","./Minion","./Magic"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=require("./Hero"),t=require("./Minion"),i=require("./Magic"),r=i.Magic,a=function(){function i(r){if(e(this,i),this.hero=null,this.enemy=null,this.friendlyMinions=null,this.enemyMinions=null,this.hero=new n(r.hero),this.enemy=new n(r.enemy),this.friendlyMinions=r.friendlyMinions.map(function(e){return new t(e)}),this.enemyMinions=r.enemyMinions.map(function(e){return new t(e)}),this.friendlyMinions.length>6)throw new Error("不能添加超过6个友方随从，不然没办法使用YOGG");this.friendlyMinions.push(new t({name:"尤格萨隆",hp:5,ap:7}))}return i.prototype.finished=function(){return this.hero.dead()||this.enemy.dead()},i.prototype.randRole=function(e,n){var t=this.allRole(e,n),i=Math.floor(Math.random()*t.length);return t[i]},i.prototype.randFriendlyRole=function(e){var n=this.allFriendlyRole(e),t=Math.floor(Math.random()*n.length);return n[t]},i.prototype.allRole=function(e,n){var t=[];if(!e){if(!n)t.push(this.hero);t.push(this.enemy)}if(!n)t.push.apply(t,this.friendlyMinions.filter(function(e){return!e.dead()}));return t.push.apply(t,this.enemyMinions.filter(function(e){return!e.dead()})),t},i.prototype.allFriendlyRole=function(e){var n=[];if(!e)n.push(this.hero);n.push.apply(n,this.friendlyMinions.filter(function(e){return!e.dead()}))},i.prototype.neighbouringRoles=function(e){var n=this.allRole(!0,!0),t=n.indexOf(e);if(0>t)n=this.friendlyMinions.filter(function(e){return!e.dead()}),t=n.indexOf(e);var i=[];if(t-1>=0)i.push(n[t-1]);if(t+1<n.length)i.push(n[t+1]);return i},i.prototype.randTwoEnemy=function(){var e=this.allRole(!0,!0);if(e.length<2)return[];var n=Math.floor(Math.random()*e.length),t=e[n];n=Math.floor(Math.random()*e.length);for(var i=e[n];t===i;)n=Math.floor(Math.random()*e.length),i=e[n];return[t,i]},i.prototype.addMinion=function(e){var n=this.friendlyMinions.filter(function(e){return!e.dead()});if(!(n.length>=7)){var i=new t(e);this.friendlyMinions.push(i)}},i.prototype.addEnemyMinion=function(e){var n=this.enemyMinions.filter(function(e){return!e.dead()});if(!(n.length>=7)){var i=new t(e);this.friendlyMinions.push(i)}},i.prototype.info=function(){return{hero:this.hero.info(),enemy:this.enemy.info(),friendlyMinions:this.friendlyMinions.map(function(e){return e.info()}),enemyMinions:this.enemyMinions.map(function(e){return e.info()})}},i.prototype.createMagic=function(e,n){return new r(this,e,n)},i}();return a}),define("yogg/index/index.tpl",[],function(){return'<!-- target: scene -->\n<header>\n    <label>请选择场景：</label>\n    <span data-role="scene-select"></span>\n    <!--<input type="button" data-role="scene-edit" class="btn-white" value="修改">-->\n    <input type="button" data-role="scene-load" class="btn-blue" value="加载">\n    <!-- <input type="button" data-role="scene-create" class="btn-orange" value="创建新场景"> -->\n    <span class="form-msg"></span>\n</header>\n<aside>\n    <div class="magic-title">法术列表：</div>\n    <ul data-role="magic-list"></ul>\n</aside>\n<main></main>\n<footer>\n    <label>法术数量：</label>\n    <input data-role="scene-num" type="text" value="10">\n    <label><input type="checkbox" data-role="scene-standard" checked>标准模式</label>\n    <input type="button" data-role="scene-run" class="btn-blue btn-disabled" value="运行" disabled>\n    <input type="button" data-role="scene-reset" class="btn-white btn-disabled" disabled value="重置">\n    <span class="form-msg"></span>\n</footer>\n\n<!-- target: scene-info -->\n<div class="scene-enemy">\n    <div class="scene-title">敌方信息</div>\n    <!-- use: scene-hero(data = ${enemy}) -->\n    <div class="scene-minions">\n        <!-- for: ${enemyMinions} as ${minion} -->\n        <!-- if: !${minion.dead} -->\n        <!-- use: scene-minion(data = ${minion}) -->\n        <!-- /if -->\n        <!-- /for -->\n    </div>\n    <div class="scene-dead">\n        <div class="scene-title">坟场</div>\n        <ul>\n            <!-- for: ${enemyMinions} as ${minion} -->\n            <!-- if: ${minion.dead} -->\n            <li>${minion.name}已经死亡</li>\n            <!-- /if -->\n            <!-- /for -->\n        </ul>\n    </div>\n</div>\n<div class="scene-friend">\n    <div class="scene-title">友方信息</div>\n    <!-- use: scene-hero(data = ${hero}) -->\n    <div class="scene-minions">\n        <!-- for: ${friendlyMinions} as ${minion} -->\n        <!-- if: !${minion.dead} -->\n        <!-- use: scene-minion(data = ${minion}) -->\n        <!-- /if -->\n        <!-- /for -->\n    </div>\n    <div class="scene-dead">\n        <div class="scene-title">坟场</div>\n        <ul>\n            <!-- for: ${friendlyMinions} as ${minion} -->\n            <!-- if: ${minion.dead} -->\n            <li>${minion.name}已经死亡</li>\n            <!-- /if -->\n            <!-- /for -->\n        </ul>\n    </div>\n\n    <!-- target: scene-hero -->\n    <div class="scene-hero">\n        <p class="scene-title">${data.name}</p>\n        <p>\n            <label>血量：<span class="scene-red">${data.hp}</span></label>\n            <label>护甲：<span class="scene-red">${data.armor}</span></label>\n        </p>\n        <p>\n            <label>法力：<span class="scene-red">${data.mp}</span></label>\n            <label>伤害：<span class="scene-red">${data.ap}</span></label>\n        </p>\n        <p>共有<span class="scene-yellow">${data.cards}</span>张手牌，牌库剩<span class="scene-yellow">${data.stack}</span>张</p>\n        <!-- var: secret = ${data.secret} && ${data.secret}.join(\'，\') -->\n        <!-- if: ${secret} -->\n        <p>奥秘：${secret}</p>\n        <!-- /if -->\n    </div>\n\n    <!-- target: scene-minion -->\n    <div class="scene-minion">\n        <p class="scene-minion-title">${data.name}</p>\n        <p>血量：<span class="scene-red">${data.hp}</span></p>\n        <p>攻击：<span class="scene-red">${data.ap}</span></p>\n        <!-- if: ${data.shield} -->\n        <p>圣盾</p>\n        <!-- /if -->\n    </div>'}),define("yogg/index/index",["require","babel-runtime/helpers/classCallCheck","jquery","etpl","moye/ui/Select","../common/Scene","./index.tpl"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=require("jquery"),t=require("etpl"),i=require("moye/ui/Select"),r=require("../common/Scene"),a=require("./index.tpl"),o=new t.Engine;o.compile(a);var s=function(){function t(a){var s=this;e(this,t),this.container=null,this.scenes=null,this.current=null,this.scene=null,this.container=a;var l=this.scenes=JSON.parse(localStorage.getItem("scene")||"[]");n(a).addClass("scene").html(o.render("scene"));var c=new i({main:n("[data-role=scene-select]",a)[0],skin:["scene"],datasource:Object.keys(l).map(function(e){return{value:e,name:l[e].name}})}).render();n("[data-role=scene-load]",a).click(function(e){var t=c.getValue();if(!t)n(e.target).nextAll("span.form-msg").html("请选择或者场景");else n(e.target).nextAll("span.form-msg").html(""),s.scene=new r(s.current=l[t].scene),n("[data-role=scene-reset],[data-role=scene-run]",a).removeClass("btn-disabled").prop("disabled",!1),n("[data-role=magic-list]",a).html(""),s.render()}),n("[data-role=scene-reset]",a).click(function(){s.scene=new r(s.current),n("[data-role=scene-run]",a).removeClass("btn-disabled").prop("disabled",!1),n("[data-role=magic-list]",a).html(""),s.render()}),n("[data-role=scene-edit]",a).click(function(e){n(e.target).nextAll("span.form-msg").html("")}),n("[data-role=scene-create]",a).click(function(e){n(e.target).nextAll("span.form-msg").html("")}),n("[data-role=scene-run]",a).click(function(e){var t=+n("[data-role=scene-num]",a).val();if(t!==t||0>=t||t!==Math.floor(t))return void n(e.target).nextAll("span.form-msg").html("数量必须为正整数");n("[data-role=scene-run]",a).addClass("btn-disabled").prop("disabled",!0);for(var i,r=n("[data-role=scene-standard]",a).prop("checked"),o=s.scene.createMagic(t,r),l="",c=0;i=o.list[c];c++)l+="<li><label>"+i.name+"("+i.cost+")：</label>"+i.description+"</li>";n("[data-role=magic-list]",a).html(l),o.deal(),s.render()})}return t.prototype.render=function(){var e=o.render("scene-info",this.scene.info());n(this.container).children("main").html(e)},t}();localStorage.setItem("scene",'{"1460355080065":{"name":"测试数据","scene":{"hero":{"hp":30,"armor":40,"stack":21,"cards":4,"name":"我方英雄"},"enemy":{"hp":20,"stack":15,"cards":3,"name":"敌方英雄"},"friendlyMinions":[{"hp":6,"ap":5,"name":"格斗士"}],"enemyMinions":[{"hp":4,"ap":5,"name":"囚徒"},{"hp":4,"ap":0,"name":"游学者、秋日"},{"hp":6,"ap":6,"name":"弗丁","shield":true},{"hp":7,"ap":6,"name":"毕游侠"}]}}}');var l=function(){new s(n("#scene")[0])};return l});