/*! 2016 Baidu Inc. All Rights Reserved */
define("babel-runtime/helpers/classCallCheck",[],function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}return e}),define("moye/ui/lib/array",["require"],function(require){function e(e){return function(){return Function.call.apply(e,arguments)}}var exports={slice:e(Array.prototype.slice),each:function(e,n,t){var i;if(null==e)return e;var a=e.length;if(a===+a)for(i=0;a>i;i++)n.call(t,e[i],i,e);else{var r=exports.keys(e);for(i=0,a=r.length;a>i;i++){var o=r[i];n.call(t,e[o],o,e)}}return e},map:function(e,n,t){var i;if(null==e)return[];var a=e.length,r=[];if(a===+a)for(i=0;a>i;i++)r[i]=n.call(t,e[i],i,e);else{var o=exports.keys(e);for(i=0,a=o.length;a>i;i++){var s=o[i];r.push(n.call(t,e[s],s,e))}}return r},reduce:function(e,n,t,i){return exports.each(e,function(e,a){t=n.call(i,t,e,a)},i),t},keys:Object.keys?function(e){return null==e?[]:Object.keys(e)}:function(e){var n=[];if(null==e)return n;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))n.push(t);return n},range:function(e,n,t){if(arguments.length<=1)n=e||0,e=0;t=t||1;for(var i=Math.max(Math.ceil((n-e)/t),0),a=Array(i),r=0;i>r;r++,e+=t)a[r]=e;return a}};return exports}),define("moye/ui/lib/browser",["require"],function(require){var e=/(opera|ie|firefox|chrome|version|edge)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/,n=navigator.userAgent.toLowerCase().match(e)||[null,"unknown",0],t="ie"===n[1]&&document.documentMode,i={name:"version"===n[1]?n[3]:n[1],version:t||parseFloat("opera"===n[1]&&n[4]?n[4]:n[2])};return i[i.name]=0|i.version,i[i.name+(0|i.version)]=!0,{browser:i}}),define("moye/ui/lib/function",["require","jquery","./array"],function(require){var e=require("jquery"),n=require("./array"),t=n.slice;return{binds:function(n,i){if("string"===e.type(i))i=~i.indexOf(",")?i.split(/\s*,\s*/):t(arguments,1);if(i&&i.length)for(var a=0,r=i.length;r>a;++a){var o=i[a],s=n[o];if(s)n[o]=e.proxy(s,n)}},throttle:function(e,n){var t=null,i=this;return function(){if(!t)return t=setTimeout(function(){t=null},n),e.apply(i,arguments);else return void 0}},debounce:function(e,n){var t,i=this;return function(){var a=arguments;if(t)clearTimeout(t);t=setTimeout(function(){return t=null,e.apply(i,a)},n)}},delay:function(e,n){var i=this;return function(){var a=t(arguments);setTimeout(function(){return e.apply(i,a)},n)}},curry:function(e){var n=t(arguments,1);return function(){return e.apply(this,n.concat(t(arguments)))}}}}),define("moye/ui/lib/type",["require","jquery","./function","./array"],function(require){function e(e,n){return Object.prototype.toString.call(n).slice(8,-1)===e}var n=require("jquery"),t=require("./function"),i=require("./array"),exports={},a=["Null","Undefined","String","Array","Function","Number","Date","Object","Boolean","RegExp"];return i.each(a,function(n){exports["is"+n]=t.curry(e,n)}),exports.isNaN=function(e){return Number.isNaN(e)},exports.isElement=function(e){return!(!e||1!==e.nodeType)},exports.isPromise=function(e){return e&&exports.isFunction(e.then)},exports.typeOf=function(e){return exports.isElement(e)?"element":n.type(e)},exports}),define("moye/ui/lib/object",["require","jquery","./type","./array"],function(require){var e=require("jquery"),n=require("./type"),t=require("./array"),i=Object.prototype.hasOwnProperty,exports={};return exports.stringify=window.JSON&&n.isFunction(JSON.stringify)?JSON.stringify:function(){var i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a=function(e){return i[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)};return function r(i){if(i&&i.toJSON)i=i.toJSON();switch(n.typeOf(i)){case"string":return'"'+i.replace(/[\x00-\x1f\\"]/g,a)+'"';case"array":return"["+e.map(i,r)+"]";case"object":var o=[];return t.each(i,function(e,n){var t=r(e);if(t)o.push(r(n)+":"+t)}),"{"+o+"}";case"number":case"boolean":return""+i;case"null":return"null"}return null}}(),exports.clone=function a(i){var r=n.isObject(i);if(!n.isArray(i)&&!r)return i;if(r&&!e.isPlainObject(i))return i;var o=i;if(n.isArray(i))return o=t.map([].slice.call(i),a);if(n.isObject(i)){o={};for(var s in i)if(i.hasOwnProperty(s))o[s]=a(i[s])}return o},exports.has=function(e,n){return null!=e&&i.call(e,n)},exports.extend=function r(i){i=i||{};for(var a=t.slice(arguments,1),o=0,s=a.length;s>o;o++){var l=a[o];if(l)for(var c in l){var d=l[c];if(d!==i&&exports.has(l,c)&&!n.isUndefined(d)){var f=e.isArray(d);if(e.isPlainObject(d)||f){var h=exports.has(i,c)?i[c]:null;if(f)h=h&&e.isArray(h)?h:[];else h=h&&e.isPlainObject(h)?h:{};i[c]=r(h,d)}else i[c]=d}else;}else;}return i},exports.toQueryString=function(e,i){var a=t.reduce(e,function(e,t,a){var r;if(i)a=i+"["+a+"]";switch(n.typeOf(t)){case"object":r=exports.toQueryString(t,a);break;case"array":for(var o={},s=t.length;s--;)o[s]=t[s];r=exports.toQueryString(o,a);break;default:r=a+"="+encodeURIComponent(t)}if(null!=t)e.push(r);return e},[]);return a.join("&")},exports}),define("moye/ui/lib/class",["require","./function","./type","./object"],function(require){function e(e){var n=e.prototype;if(n.hasOwnProperty("type")||n.hasOwnProperty("$class")){var t=n.type||n.$class;if(u[t])throw new Error('Class "'+t+'" is already defined');u[t]=e}}function n(e,n){var t=new Function;t.prototype=e.prototype;var i=new t;n=n||{},c.extend(i,n);var a=o(i);for(var r in i)if(i.hasOwnProperty(r)&&l.isFunction(i[r])){var s=i[r];s[d]=a,s[f]=r}a.$parent=e;var u=n.type||n.$class;if(u)e[h][u]=a;return a}function t(e,n){if(l.isFunction(n))n=n.prototype;return c.extend(e.prototype,n),e}function i(){var e=this.$parent.caller,n=e[d];if(!n)throw new Error("this class has no Parent Class");for(var t=e[d].$parent,i=e[f];t;)if(t.prototype.hasOwnProperty(i)){var a=t.prototype[i];if(l.isFunction(a))return t.prototype[i].apply(this,arguments);throw new Error("parent method is not function")}else t=t.$parent;throw new Error("no parent method")}function a(e,n){var t=e[h];return t[n]}function r(e){return e[h]}function o(o){var l=function(){return this.initialize?this.initialize.apply(this,arguments):this};return l.prototype=o||{},e(l),l.prototype.constructor=l,l.prototype.$parent=i,l.extend=s(n,l),l.implement=s(t,l),l.getClass=s(a,l),l.getAllClasses=s(r,l),l[h]={},l}var s=require("./function").curry,l=require("./type"),c=require("./object"),d="__class__",f="__name__",h="__classess__",u={};return{newClass:o,getClass:function(e){return u[e]}}}),define("moye/ui/lib/dom",["require","./type","./object","./browser"],function(require){var e=require("./type"),n=require("./object"),t=require("./browser").browser;return{g:function(n){return e.isString(n)?document.getElementById(n):n},fixed:function(){function e(e){return"undefined"==typeof e}function i(e){return"%"===(e+"").slice(-1)}function a(e,n){var t=parseInt(e,10);return i(e)?n+"*"+t/100:t}function r(n,t,i,r){var o={},l=s[n],c="document.documentElement."+l.offset,d="document.documentElement."+l.client;if(!e(i)&&!e(r))o[l.coordinate]="eval("+c+"+"+a(i,d)+')+"px"',o[l.size]="eval("+d+"-"+a(i,d)+"-"+a(r,d)+')+"px"';else if(e(i)&&!e(r))o[l.coordinate]="eval("+c+"+"+d+"-"+a(t,d)+"-"+a(r,d)+')+"px"';else o[l.coordinate]="eval("+c+"+"+a(i,d)+')+"px"';return o}function o(e,t){var i=r("horizontal",t.width||e.offsetWidth,t.left,t.right),a=r("vertical",t.height||e.offsetHeight,t.top,t.bottom);for(var o in a)if(n.has(a,o))i[o]=a[o];return i}var s={horizontal:{offset:"scrollLeft",client:"clientWidth",coordinate:"left",size:"width"},vertical:{offset:"scrollTop",client:"clientHeight",coordinate:"top",size:"height"}},l=document.getElementsByTagName("html")[0];if(t.ie6)l.style.backgroundAttachment="fixed",l.style.backgroundImage="url(about:blank)";return l=null,function(e,i){if(t.ie6){e.style.position="absolute";var a=o(e,i);for(var r in a)if(n.has(a,r))e.style.setExpression(r,a[r])}}}()}}),define("moye/ui/lib/interface",["require","jquery","./array","./object","./type"],function(require){var e=require("jquery"),n=require("./array"),t=require("./object"),i=require("./type");return{configurable:{setOptions:function(e){t.extend(this,this.options,e)},bindEvents:function(e){e=e||{};for(var n in e){var a=e[n];if(t.has(e,n)&&0===n.indexOf("on")&&i.isFunction(a))this.on(n.charAt(2).toLowerCase()+n.slice(3),a),delete e[n]}}},observable:{on:function(n,t){if(i.isFunction(n))t=n,n="*";this._listeners=this._listeners||{};var a=this._listeners[n]||[];if(e.inArray(t,a)<0)t.$type=n,a.push(t);return this._listeners[n]=a,this},un:function(n,t){if(i.isFunction(n))t=n,n="*";this._listeners=this._listeners||{};var a=this._listeners[n];if(a)if(t){var r=e.inArray(t,a);if(~r)a.splice(r,1)}else a.length=0,delete this._listeners[n];return this},once:function(e,n){if(i.isFunction(e))n=e,e="*";var t=this,a=function(){n.apply(t,arguments),t.un(e,a)};return this.on.call(t,e,a),this},fire:function(n,t){var i;if(n instanceof e.Event)i=n,n=i.type;else i=new e.Event(n,t);if(!i.target)i.target=this;this._listeners=this._listeners||{};for(var a=this._listeners[n]||[],r=this._listeners["*"]||[],o=[].concat(a,r),s=o.length,l=0;s>l;l++)o[l].call(this,i);return i},destroyEvents:function(){var e=this._listeners;if(e)n.each(e,function(e,n,t){t[n].length=0,t[n]=null}),this._listeners=null}}}}),define("moye/ui/lib/page",["require"],function(require){function e(e){var n=e&&e.ownerDocument||document,t=n.compatMode;return!t||"CSS1Compat"===t?n.documentElement:n.body}return{getScrollLeft:function(){return window.pageXOffset||e().scrollLeft},getScrollTop:function(){return window.pageYOffset||e().scrollTop},getViewWidth:function(){return e().clientWidth},getViewHeight:function(){return e().clientHeight}}}),define("moye/ui/lib/string",["require","jquery"],function(require){var e=require("jquery");return{guid:function(){var e="moye",n=0;return function(){return e+"-"+n++}}(),capitalize:function(e){return String(e).replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},contains:function(n,t,i){return i=i||" ",n=i+n+i,t=i+e.trim(t)+i,n.indexOf(t)>-1},pad:function(e,n){var t=0>e?"-":"",i=Math.abs(parseInt(e,10))+"",a=i.length;if(n=+n||2,n>a)i=(1<<n-a).toString(2).slice(1)+i;return t+i},format:function(){var e={"!":1,"@":2,"#":3,$:4,"%":5};return function(n,t,i,a,r,o){var s=arguments;return n.replace(/(!|@|#|\$|%)\{([\w]+)\}/g,function(n,t,i){if(t=s[e[t]],null==t)return"";if(i=t[i],null==i)return"";else return i})}}()}}),define("moye/ui/lib",["require","jquery","./lib/array","./lib/browser","./lib/class","./lib/dom","./lib/function","./lib/interface","./lib/object","./lib/page","./lib/string","./lib/type"],function(require){var e=require("jquery"),n={};return e.extend(n,require("./lib/array"),require("./lib/browser"),require("./lib/class"),require("./lib/dom"),require("./lib/function"),require("./lib/interface"),require("./lib/object"),require("./lib/page"),require("./lib/string"),require("./lib/type")),n}),define("moye/ui/Context",["require","./lib"],function(require){function e(e){for(e=e||a++;e in i;)e=a++;return e}function n(n){this.id=e(n),this.controls={},this.properties={}}var t=require("./lib"),i={},a=1416796207;return n.prototype.get=function(e){return this.controls[e]},n.prototype.add=function(e){var n=e.id;return this.controls[n]=e,delete this.properties[n],this},n.prototype.remove=function(e){return delete this.controls[e.id],this},n.prototype.fill=function(e){return t.extend(this.properties,e||{}),this},{isContext:function(e){return e instanceof n},get:function(e){return i[e]},create:function(e){var t=new n(e);return i[t.id]=t,t}}}),define("moye/ui/main",["require","./lib","./Context"],function(require){var e=require("./lib"),n=require("./Context"),t={uiPrefix:"data-ui",instanceAttr:"data-ctrl-id",uiClassPrefix:"ui",skinClassPrefix:"skin",stateClassPrefix:"state",contextAttr:"data-ctrl-context"},i=n.create("default"),exports={init:function(e,n,a){var r=t.uiPrefix+"-id",o={};return a=a||i,a.fill(n),$("["+r+"]",e).each(function(e,i){var s=i.getAttribute(r),l=i.getAttribute(t.instanceAttr);if(s&&!l){var c=n[s];if(c){var d=c.type;if(!d)throw new Error("you should specify a type to `"+s+"`");var f=$.extend({context:a},c,{id:s,main:i}),h=exports.create(d,f);h.render(),o[s]=h}}}),o},create:function(n,t){var i=e.getClass(n);if(!i)throw new Error("Class "+n+" not found");return delete t.type,new i(t)},get:function(e){return i.get(e)},getControlByDOM:function(e){e=$(e);var n=e.attr(t.instanceAttr);if(n){var i=e.attr(t.contextAttr);if(i){var a=exports.getContext(i);if(a)return a.get(n)}}},getContext:function(e){return e?n.get(e):i},getConfig:function(e){return t[e]},setConfig:function(e,n){return t[e]=n,this}};return exports}),define("moye/ui/helper/dom",["require","jquery","../lib","../main"],function(require){function e(){return t.slice(arguments).join("-")}var n=require("jquery"),t=require("../lib"),i=require("../main"),a={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,command:!0};return{getPartClasses:function(n){var t=this.control,a=t.type.toLowerCase(),r=t.skin,o=i.getConfig("uiClassPrefix"),s=i.getConfig("skinClassPrefix"),l=[];if(n){if(l.push(e(o,a,n)),r)for(var c=0,d=r.length;d>c;c++)r[c]&&l.push(e(s,r[c],a,n))}else if(l.push(e(o,a)),r)for(c=0,d=r.length;d>c;c++)r[c]&&l.push(e(s,r[c]),e(s,r[c],a));return l},getPartClassName:function(e){return this.getPartClasses(e).join(" ")},getPrimaryClassName:function(n){var t=this.control.type.toLowerCase();return n?e(i.getConfig("uiClassPrefix"),t,n):e(i.getConfig("uiClassPrefix"),t)},addPartClasses:function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main){var i=this.getPartClassName(e);n(t).addClass(i)}},removePartClasses:function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main){var i=this.getPartClassName(e);n(t).removeClass(i)}},getStateClasses:function(n){var t=this.control.type.toLowerCase(),a=[e(i.getConfig("uiClassPrefix"),t,n),e(i.getConfig("stateClassPrefix"),n)],r=this.control.skin;if(r)for(var o=i.getConfig("skinClassPrefix"),s=0,l=r.length;l>s;s++)r[s]&&a.push(e(o,r[s],n),e(o,r[s],t,n));return a},getStateClassName:function(e){return this.getStateClasses(e).join(" ")},addStateClasses:function(e){var t=this.control.main;if(t){var i=this.getStateClassName(e);n(t).addClass(i)}},removeStateClasses:function(e){var t=this.control.main;if(t){var i=this.getStateClassName(e);n(t).removeClass(i)}},getPart:function(e){return t.g(this.getPartId(e))},getPartId:function(e){var n=this.control;return"ctrl-"+n.type.toLowerCase()+"-"+n.id+(e?"-"+e:"")},getPartBeginTag:function(e,n,i){i=i?t.map(i,function(e,n){return n+'="'+e+'"'}).join(" "):"";var r="<"+n+' id="'+this.getPartId(e)+'" data-part="'+e+'"class="'+this.getPartClassName(e)+'"'+i+(a.hasOwnProperty(n)?"":">");return r},getPartEndTag:function(e,n){var t=a.hasOwnProperty(n)?" />":"</"+n+">";return t},getPartHTML:function(e,n,t,i){return n=n||"div",this.getPartBeginTag(e,n,i)+(t||"")+this.getPartEndTag(e,n)},createPart:function(e,t,i,a){return n("<"+(t||"div")+">").attr(a||{}).attr("id",this.getPartId(e)).data("part",e).addClass(this.getPartClassName(e)).html(i||"").get(0)}}}),define("moye/ui/helper/life",["require","../main","../Context"],function(require){var e=require("../main"),n=require("../Context"),t={NEW:0,INITED:1,RENDERED:2,DISPOSED:4};return{isInStage:function(e){if(null==t[e])throw new Error("Invalid life cycle stage: "+e);return this.stage===t[e]},changeStage:function(e){if(null===t[e])throw new Error("Invalid life cycle stage: "+e);return this.stage=t[e],this},initContext:function(){var t=this.control,i=t.context;if(!n.isContext(i))i=n.get(i)||e.getContext();return t.setContext(i),this},dispose:function(){}}}),define("moye/ui/helper/children",["require","../main","../lib"],function(require){var e=require("../main"),n=require("../lib");return{initChildren:function(){var t=this.control,i=t.context,a=e.init(t.main,i.properties,i);return n.each(a,function(e,n){t.addChild(e,e.childName||n)}),this},traversalChildren:function(e){for(var t=n.slice(this.control.children),i=0,a=t.length;a>i;++i)e.call(this,t[i],i);return this},disposeChildren:function(){var e=this.control;return this.traversalChildren(function(e){e.dispose()}),e.children=[],e.childrenIndex={},this},disableChildren:function(){return this.traversalChildren(function(e){e.disable()})},enableChildren:function(){return this.traversalChildren(function(e){e.enable()})}}}),define("moye/ui/plugin/Plugin",["require","../lib"],function(require){var e=require("../lib"),n=e.newClass({$class:"Plugin",options:{},initialize:function(n){e.extend(this,this.options,n)},activate:function(e){this.active=!0},inactivate:function(){this.active=!1},isActivated:function(){return!!this.active},dispose:function(){}});return n}),define("moye/ui/helper/plugin",["require","../lib","../plugin/Plugin"],function(require){var e=require("../lib"),n=require("../plugin/Plugin");return{createPluginInstance:function(t){var i,a={};if(t instanceof n)return t;var r=e.typeOf(t);if("function"===r)i=t;else if("string"===r)i=e.getClass(t);else if("object"===r)i=e.getClass(t.type),a=t.options||a;if(!i)throw new Error("moye Plugin ["+t+"] cannot found");return new i(a)},initPlugins:function(){var n=this.control,t=n.plugins;if(t&&t.length)return n.plugins=e.map(t,function(e){var t=this.createPluginInstance(e);return t.activate(n),t},this),this;else return void 0},traversalPlugins:function(e){var n=this.control.plugins;if(n)for(var t=n.length-1;t>=0;t--)e.call(this,n[t]);return this},activatePlugins:function(){return this.traversalPlugins(function(e){e.activate()})},inactivatePlugins:function(){return this.traversalPlugins(function(e){e.inactivate()})},disposePlugins:function(){return this.traversalPlugins(function(e){e.inactivate(),e.dispose()}),this.control.plugins=[],this}}}),define("moye/ui/helper/event",["require","jquery"],function(require){var e=require("jquery");return{delegate:function(n,t,i,a,r){var o=this.control;if(null==r&&null==a)r=i,i=a=null;else if(null==r)r=a,a=null;return r=e.proxy(r,o),t+="."+o.id+"."+r.guid,e(n).on(t,i,a,r),this},undelegate:function(n,t,i,a){if(t=t||"",t+="."+this.control.id,a&&a.guid)t+="."+a.guid;return e(n).off(t,i,a),this}}}),define("moye/ui/Helper",["require","jquery","./helper/dom","./helper/life","./helper/children","./helper/plugin","./helper/event"],function(require){function e(e){this.control=e}var n=require("jquery");return n.extend(e.prototype,require("./helper/dom"),require("./helper/life"),require("./helper/children"),require("./helper/plugin"),require("./helper/event")),e}),define("moye/ui/Control",["require","jquery","./lib","./main","./Helper"],function(require){var e=require("jquery"),n=require("./lib"),t=require("./main"),i=require("./Helper"),a="hidden",r="disabled",o="readOnly",s=n.newClass({type:"Control",ignoreStates:["disable"],delegate:function(){var e=this.helper;return e.delegate.apply(e,arguments),this},undelegate:function(){var e=this.helper;return e.undelegate.apply(e,arguments),this},initialize:function(e){var t=this.helper=new i(this);if(t.changeStage("NEW"),this.currentStates={},e=e||{},this.bindEvents(e),this.init(e),this.main=this.main?n.g(this.main):this.createMain(),this.id=this.id||n.guid(),this.hasOwnProperty("states")){var a=this.states;if(n.isString(a))this.states=[a]}if(this.hasOwnProperty("skin")){var r=this.skin;if(n.isString(r))this.skin=[r]}t.initContext(),this.children=[],this.childrenIndex={},t.initPlugins(),t.changeStage("INITED")},init:function(e){if(this.helper.isInStage("NEW"))this.setOptions(e)},render:function(){var n=this.helper;if(n.isInStage("INITED"))if(this.fire("beforerender"),this.initStructure(),this.initEvents(),e(this.main).attr(t.getConfig("instanceAttr"),this.id),n.addPartClasses(),this.states&&this.states.length)for(var i=this.states.length-1;i>=0;i--)this.addState(this.states[i]);if(this.repaint(),n.isInStage("INITED"))n.changeStage("RENDERED"),this.fire("afterrender");return this},initStructure:function(){return this},initEvents:function(){return this},repaint:function(e,t){if(this.helper.isInStage("INITED")){if(this[r])this.disable(),delete this[r];if(this[a])this.hide(),delete this[a];if(n.isFunction(this.getValue))this.setReadOnly(!!this[o]),delete this[o]}return this},set:function(t,i){var a;if(n.isObject(t))a=t;else a={},a[t]=i;if(!this.helper.isInStage("RENDERED"))return e.extend(this,a),this;var r=[],o={};for(var s in a)if(a.hasOwnProperty(s)){var l=a[s],c=this[s],d=this.isPropertyChanged(s,l,c);if(d){this[s]=l;var f={name:s,oldValue:c,newValue:l};r.push(f),o[s]=f}}if(r.length)this.repaint(r,o);return o},get:function(e){return this[e]},isPropertyChanged:function(e,n,t){return n!==t},appendTo:function(e){if(this.helper.isInStage("INITED"))this.render();return e.appendChild(this.main),this},query:function(n){return e("."+n,this.main).toArray()},createMain:function(){return document.createElement("div")},addState:function(e){if(this.hasState(e))return this;else return this.currentStates[e]=!0,this.helper.addStateClasses(e),this.fire("statechange",{state:e,action:"add"}),this},removeState:function(e){var n=this;if(!n.hasState(e))return n;else return n.currentStates[e]=!1,this.helper.removeStateClasses(e),n.fire("statechange",{state:e,action:"remove"}),n},toggleState:function(e){return this.hasState(e)?this.removeState(e):this.addState(e),this},hasState:function(e){return!!this.currentStates[e]},show:function(){return this.removeState(a)},hide:function(){return this.addState(a)},toggle:function(){return this.toggleState(a)},disable:function(){return this.addState(r),this.helper.disableChildren(),this.fire("disable"),this},enable:function(){return this.removeState(r),this.helper.enableChildren(),this.fire("enable"),this},isDisabled:function(){return this.hasState(r)},isReadOnly:function(){return this.hasState(o)},setReadOnly:function(e){if(e)this.addState(o);else this.removeState(o);return this},addChild:function(e,n){var t=this.children,i=this.childrenIndex,a=e.getParent();if(a)a.removeChild(e);if(e.setParent(this),n=n||e.childName)i[n]=e;return e.setContext(this.context),t.push(e),this},removeChild:function(e){for(var n=this.children,t=this.childrenIndex,i=n.length-1;i>=0;i--)if(n[i]===e)n.splice(i,1);var a=e.childName;return delete t[a],e.setParent(null),this},getChild:function(e){return this.childrenIndex[e]},setParent:function(e){return this.parent=e,this},getParent:function(){return this.parent},initChildren:function(){return this.helper.initChildren(),this},setContext:function(n){var i=this.context;if(n!==i||i.get(this.id)!==this){if(i)this.context.remove(this);return n.add(this),e(this.main).attr(t.getConfig("contextAttr"),n.id),this.context=n,this}},dispose:function(){this.fire("beforedispose"),this.helper.disposePlugins(),this.helper.disposeChildren(),this.destroyEvents(),this.helper.changeStage("DISPOSED"),this.fire("afterdispose")},destroy:function(){if(this.dispose(),this.main)e(this.main).remove(),this.main=null},use:function(e){var n=this.plugins;if(!this.plugins)n=this.plugins=[];if(e=this.helper.createPluginInstance(e),n.push(e),!this.helper.isInStage("NEW"))e.activate(this);return this}}).implement(n.observable).implement(n.configurable);return s}),define("moye/ui/painter",["require","./lib"],function(require){var e=require("./lib");return{createRepaint:function(){var n=e.slice(arguments);return function(t,i){for(var a=e.extend({},i),r=0;r<n.length;r++){var o=n[r];if("function"!=typeof o){var s=[].concat(o.name),l=!t,c=s.length;if(!l)for(var d=0;c>d;d++){var f=s[d];if(i.hasOwnProperty(f)){l=!0;break}}if(l){var h=[o];for(d=0;c>d;d++)f=s[d],h.push(this[f]),delete a[f];o.paint.apply(this,h)}else;}else o.apply(this,arguments)}return this}}}}),define("moye/ui/Popup",["require","jquery","./lib","./Control","./painter"],function(require){var e=require("jquery"),n=require("./lib"),t=require("./Control"),i=t.extend({type:"Popup",options:{target:"",triggers:"",liveTriggers:"",content:"",dir:"bl",mode:"click",showDelay:50,hideDelay:50,offset:{x:0,y:0}},init:function(e){if(this.$parent(e),e.target)this.target=n.g(e.target);if("over"===e.mode)this.showDelay=e.showDelay>0?e.showDelay:50,this.hideDelay=e.hideDelay>0?e.hideDelay:50},initStructure:function(){var n=this.content=this.content||this.main.innerHTML;e(this.main).css("left","-2000px").appendTo(document.body).html(n)},initEvents:function(){if(this.onWindowResize=n.debounce.call(this,this.onWindowResize,100),this.showBound=e.proxy(this.onShow,this),this.hideBound=e.proxy(this.onHide,this),this.bindTriggersEvents(this.triggers,this.liveTriggers),this.delegate(this.main,"click",this.onMainClick),"over"===this.mode)this.delegate(this.main,"mouseenter",this.onMainMouseEnter),this.delegate(this.main,"mouseleave",this.onMainMouseLeave)},repaint:require("./painter").createRepaint(t.prototype.repaint,{name:"content",paint:function(e,n){this.setContent(n)}},function(e,n){if(!this.helper.isInStage("RENDERED"))return this;var t=n.liveTriggers,i=n.triggers;if(!t&&!i)return this;else return this.clearTriggersEvents(i.oldValue,t.oldValue),void this.bindTriggersEvents(i.newValue,t.newValue)}),setTarget:function(e){return this.target=e,this},bindTriggersEvents:function(n,t){var i,a=this.mode,r=this.showBound,o=this.hideBound,s=null;if("static"!==a){if(t)i=e(t),s=n;else i=e(n);if("over"===a)i.on("mouseenter",s,r).on("mouseleave",s,o),e(this.main).on("mouseenter",r).on("mouseleave",o);else i.on("click",s,r)}},clearTriggersEvents:function(n,t){var i,a=this.mode,r=null;if("static"!==a){if(t)i=e(t),r=n;else i=e(n);if("over"===a)i.off("mouseenter",r,this.showBound).off("mouseleave",r,this.hideBound),this.undelegate(this.main,"mouseenter",this.onMainMouseEnter),this.undelegate(this.main,"mouseleave",this.onMainMouseLeave);else e(n).off("click",this.showBound)}},startGlobalListener:function(){var e=this.mode;if("click"===e)this.delegate(document,"click",this.onHide);return this.delegate(window,"resize",this.onWindowResize),this},stopGlobalListener:function(){var e=this.mode;if("click"===e)this.undelegate(document,"click",this.onHide);return this.undelegate(window,"resize",this.onWindowResize),this},show:function(){var e=this;if(!e.hasState("show")){e.addState("show");var n=function(){e.locate(e.target||e.trigger),e.startGlobalListener(),e._isVisible=!0,e.fire("show",{target:e.trigger})};if(e.showDelay)e._showTimer=setTimeout(n,e.showDelay);else n();return clearTimeout(e._hideTimer),this}},hide:function(){var n=this;if(n.hasState("show")){n.removeState("show");var t=function(){e(n.main).css("left","-2000px"),n.stopGlobalListener(),n.trigger=null,n._isVisible=!1,n.fire("hide")};if(n.hideDelay)n._hideTimer=setTimeout(t,n.hideDelay);else t();return clearTimeout(n._showTimer),this}},onWindowResize:function(){var e=this.target||this.trigger;e&&this.isVisible()&&this.locate(e)},onShow:function(n){if(!this.isDisabled()){var t=n.target,i=this.main,a=t===i||e.contains(i,t),r=a?this.trigger:e(n.target).closest(this.triggers)[0];if(r){var o=this.trigger;if(o)if(this.hide(),"over"!==this.mode&&!a&&r===o)return;var s=new e.Event("beforeshow",{target:r});if(this.fire(s),!s.isDefaultPrevented())this.trigger=r,this.show()}}},onHide:function(n){var t=n.target,i=this.main;if("mouseleave"===n.type||i!==t&&!~e.inArray(t,e(this.triggers))&&!e.contains(i,t))this.hide()},onMainClick:function(e){this.fire(e)},onMainMouseEnter:function(e){this.clear(),this.fire("mouseenter",{target:this.trigger})},onMainMouseLeave:function(e){this.clear(),this.addState("show"),this.hide(),this.fire("mouseleave",{target:this.trigger})},locate:function(n){n=e(n||this.target||this.trigger||document.body);var t=e(this.main),i=this.dir,a=n.offset(),r=a.top,o=a.left,s=n.outerWidth(),l=n.outerHeight(),c=o+s,d=r+l,f=o+s/2,h=r+l/2,u=t.outerWidth(),p=t.outerHeight(),m=e(window),v=m.scrollTop(),g=m.scrollLeft(),y=g+m.width(),b=v+m.height(),M=n.attr("data-popup")||n.attr("data-tooltips");if(M)i=/[trblc]{2}/.test(M)?M:"1";var w,C;if(!i||"1"===i){var R=s>u||o-(u-s)/2>0&&y>=c+(u-s)/2?"c":o+u>y?"r":"l",x=l>p||r-(p-l)/2>0&&b>=d+(p-l)/2?"c":r+p>b?"b":"t";if(b>=d+p)C="b",w=R;else if(y>=c+u)C="r",w=x;else if(r-p>=v)C="t",w=R;else if(o-u>=g)C="l",w=x;i=C+w}else C=i.charAt(0),w=i.charAt(1);this._dir=i;var S=this.offset;if({t:1,b:1}[C])o={l:o+S.x,c:f-u/2,r:c-u-S.x}[w],r={t:r-p-S.y,b:d+S.y}[C];else if({l:1,r:1}[C])r={t:r+S.y,c:h-p/2,b:d-p-S.y}[w],o={l:o-u-S.x,r:c+S.x}[C];t.css({left:o+"px",top:r+"px"})},setContent:function(n){this.content=n||"",e(this.main).html(this.content)},isVisible:function(){return!!this._isVisible},clear:function(){clearTimeout(this._showTimer),clearTimeout(this._hideTimer)},dispose:function(){this.stopGlobalListener(),this.clearTriggersEvents(this.triggers,this.liveTriggers),this.clear(),this.$parent()}});return i}),define("moye/ui/Select",["require","jquery","./lib","./Control","./Popup","./painter"],function(require){var e=require("jquery"),n=require("./lib"),t=require("./Control"),i=require("./Popup"),a=t.extend({type:"Select",options:{maxLength:16,ellipsis:"...",columns:1,selectedClass:"selected",datasource:[],valueUseIndex:!1,emptyText:"请选择",mode:"click",adapter:{toOption:function(e){return e},toLabel:function(e){return e.name}},indicator:{normal:"&#xe604;",expanded:"&#xe603;"}},init:function(e){this.$parent(e),this.datasource=this.datasource||[];var n=this.handleValue(this.value),t=this.getOption(n);this.value=t?this.handleValue(t.value):null},handleValue:function(e){return null==e?"":e+""},getOption:function(e){for(var n=0,t=this.datasource,i=t.length;i>n;++n){var a=this.adapter.toOption.call(this,t[n]);if(a.value===e)return a}return null},initStructure:function(){var n=["select"],t=+this.columns;if(t)n.push("select-columns"+t);var a=this.helper,r=this.popup=new i({main:a.createPart("popup"),target:this.main,triggers:[this.main],skin:n,mode:this.mode});r.on("click",e.proxy(this.onPopupClick,this)).on("show",e.proxy(this.onPopupShow,this)).on("hide",e.proxy(this.onPopupHide,this)).render(),a.addPartClasses("popup",r.main),this.addChild(r),this.main.innerHTML=""+a.getPartHTML("input","input","",{type:"hidden",value:this.value})+a.getPartHTML("label","a","",{href:"#"})+this.getIndicatorHTML()},initEvents:function(){this.delegate(this.main,"click",this.onMainClicked)},repaint:require("./painter").createRepaint(t.prototype.repaint,{name:["datasource"],paint:function(e,t){if(!n.isArray(t))t=(t+"").split(/\s*[,]\s*/);for(var i=[],a=!!this.valueUseIndex,r=0,o=t.length;o>r;++r){var s=t[r];if(!n.isObject(s)){var l=s.split(/\s*[:]\s*/);s={text:l[0]},s.value=l.length>1?l[1]:a?r:l[0]}i.push(this.getOptionHTML(s,r))}this.popup.main.innerHTML=i.join("")}},{name:["value"],paint:function(t,i){var a=this.helper,r=this.datasource||[],o=a.getPartClassName("option-selected"),s=a.getPrimaryClassName("option");i=this.handleValue(i);var l,c=n.reduce(e("."+s,this.popup.main),function(n,t,a){var s=e(t),l=this.adapter.toOption.call(this,r[a]);if(this.handleValue(l.value)!==i)s.removeClass(o);else s.addClass(o),n=l;return n},null,this),d=a.getPart("input");if(c)l=this.adapter.toLabel.call(this,c),d.value=this.handleValue(i),this.addState("selected");else l=this.emptyText,this.value=d.value="",this.removeState("selected");a.getPart("label").innerHTML=l}}),getIndicatorHTML:function(){var e=this.indicator;if(e===!1)return"";else return this.helper.getPartHTML("indicator","i",this.hasState("expanded")?this.indicator.expanded:this.indicator.normal)},getOptionHTML:function(e,n){return e=this.adapter.toOption.call(this,e,n),'<a href="#" class="'+this.helper.getPartClassName("option")+'" data-action="select" data-value="'+e.value+'" title="'+e.name+'" data-index="'+n+'">'+e.name+"</a>"},fill:function(e){this.set("datasource",e)},pick:function(e){var n=e.getAttribute("data-value");if(n!==this.handleValue(this.value))this.set("value",n),this.fire("change",{value:n})},getValue:function(e){var n=this.helper.getPart("input").value;return e?+n:n},setValue:function(e){return this.set("value",e),this},onPopupClick:function(e){var n=e.target;if("A"===n.tagName)e.preventDefault(),
this.pick(n),this.popup.hide()},onPopupShow:function(e){if(this.isDisabled())return void e.preventDefault();if(this.fire(e),!e.isDefaultPrevented())this.addState("expanded"),this.helper.getPart("indicator").innerHTML=this.indicator.expanded},onPopupHide:function(e){if(this.fire(e),!e.isDefaultPrevented())this.removeState("expanded"),this.helper.getPart("indicator").innerHTML=this.indicator.normal},onMainClicked:function(e){e.preventDefault()},dispose:function(){this.undelegate(this.main,"click",this.onMainClicked),this.popup.destroy(),this.$parent()}});return a}),define("yogg/common/Hero",["require","babel-runtime/helpers/classCallCheck"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=function(){function n(t){e(this,n),this.current=30,this.hp=30,this.armor=0,this.mp=0,this.weapon=0,this.ap=0,this.name="",this.frozen=!1,this.cards=0,this.drawn=0,this.stack=0,this.overflow=0,this.secret=[],this.current=t.hp,this.armor=t.armor||0,this.weapon=t.weapon||0,this.ap=this.weapon,this.name=t.name,this.cards=t.cards||0,this.stack=t.stack||0}return n.prototype.dealDamage=function(e){if(this.armor-=e,this.armor<0)this.current+=this.armor,this.armor=0},n.prototype.restoreHealth=function(e){if(!this.dead())this.current=Math.min(this.current+e,30)},n.prototype.addArmor=function(e){if(!this.dead())this.armor+=e},n.prototype.drawCard=function(e){this.drawn+=e,this.overflow+=Math.max(this.cards+e-10,0),this.cards=Math.min(10,this.cards+e),this.stack-=e},n.prototype.supplementCard=function(e){if(0>e)this.overflow+=Math.min(this.cards,-e);this.cards=Math.max(0,Math.min(10,this.cards+e))},n.prototype.pushStack=function(e){this.stack+=e},n.prototype.addSecret=function(e){if(this.secret.length<5&&this.secret.indexOf(e)<0)this.secret.push(e)},n.prototype.addMp=function(e){this.mp=Math.max(0,Math.min(10,this.mp+e))},n.prototype.info=function(){return{name:this.name,dead:this.dead(),hp:this.current,armor:this.armor,mp:this.mp,weapon:this.weapon,ap:this.ap,frozen:this.frozen,cards:this.cards,drawn:this.drawn,stack:this.stack,overflow:this.overflow,secret:this.secret}},n.prototype.dead=function(){return this.current<=0},n}();return n}),define("yogg/common/Minion",["require","babel-runtime/helpers/classCallCheck"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=function(){function n(t){e(this,n),this.current=0,this.hp=0,this.ap=0,this.name="",this.frozen=!1,this.shield=!1,this.effect=[],this.minHp=0,this.current=t.hp,this.hp=t.hp,this.ap=t.ap,this.name=t.name,this.shield=t.shield||!1}return n.prototype.dealDamage=function(e){if(!this.dead()){if(this.shield&&e>0)return void(this.shield=!1);if(this.current-=e,this.minHp&&this.current<this.minHp)this.current=this.minHp}},n.prototype.restoreHealth=function(e){if(!this.dead())this.current=Math.min(this.current+e,this.hp)},n.prototype.changePoint=function(e,n){if(this.hp+=n,this.current+=n,this.ap+=e,this.current>this.hp)this.current=this.hp},n.prototype.setPoint=function(e,n){if(null!=e)this.ap=e;if(null!=n)if(this.hp=n,this.current>this.hp)this.current=this.hp},n.prototype.addEffect=function(e,n){if(!n||this.effect.indexOf(e)<0)this.effect.push(e)},n.prototype.info=function t(){var t={name:this.name,dead:this.dead(),hp:this.current,ap:this.ap,frozen:this.frozen,effect:this.effect.slice(0),shield:this.shield};if(t.shield)t.effect.unshift("圣盾");if(t.frozen)t.effect.unshift("冻结");return t},n.prototype.dead=function(){return this.current<=0},n}();return n}),define("yogg/common/config",[],function(){var e=[{name:"背刺",cost:0,description:"对1名未受伤的敌对随从造成2点伤害。",deal:function(e){var n=e.randRole(!0,!0,function(e){return e.current===e.hp});if(n)n.dealDamage(2)}},{name:"激活",cost:0,description:"仅在本回合中，获得2个法力水晶。",deal:function(e){e.hero.addMp(2)}},{name:"猎人印记",cost:0,description:"在本回合内，将1个随从的生命变为1。",deal:function(e){var n=e.randRole(!0);if(n)n.setPoint(null,1)}},{name:"图腾之力",cost:0,description:"使你的图腾获得+2生命值。",deal:function(e){}},{name:"牺牲契约",cost:0,description:"牺牲一个恶魔，为你的英雄恢复5点生命值。",deal:function(e){}},{name:"先祖治疗",cost:0,description:"为一个随从恢复所有生命值并使其获得嘲讽。",deal:function(e){var n=e.randRole(!0);if(n){if(e.shadow)n.dealDamage(n.hp);else n.restoreHealth(n.hp);n.addEffect("嘲讽",!0)}}},{name:"月火术",cost:0,description:"造成1点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(1)}},{name:"奥术飞弹",cost:1,description:"造成3点伤害，随机分配给敌方角色。",deal:function(e){for(var n=0;3>n;n++){var t=e.randRole(!1,!0);t.dealDamage(1)}}},{name:"奥术射击",cost:1,description:"造成2点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(2)}},{name:"保护之手",cost:1,description:"使一个随从获得圣盾。",deal:function(e){var n=e.randRole(!0);if(n)n.shield=!0}},{name:"冰霜震击",cost:1,description:"对一个敌方角色造成1点伤害，并使其冻结。",deal:function(e){var n=e.randRole(!1);n.dealDamage(1),n.frozen=!0}},{name:"腐蚀术",cost:1,description:"选择一个敌方随从，在你的回合开始时，消灭该随从。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.addEffect("在你的回合开始时，消灭该随从。",!0)}},{name:"镜像",cost:1,description:"召唤两个0/2，并具有嘲讽的随从。",deal:function(e){var n=e.addMinion({hp:2,name:"镜像",ap:0});n.addEffect("嘲讽",!0),n=e.addMinion({hp:2,name:"镜像",ap:0}),n.addEffect("嘲讽",!0)}},{name:"力量祝福",cost:1,description:"使一个随从获得+3攻击力。",deal:function(e){var n=e.randRole(!0);if(n)n.changePoint(3,0)}},{name:"灵魂之火",cost:1,description:"造成4点伤害，随机弃一张牌。",deal:function(e){var n=e.randRole();n.dealDamage(4),e.hero.supplementCard(-1)}},{name:"谦逊",cost:1,description:"使一个随从的攻击力变为1。",deal:function(e){var n=e.randRole(!0);if(n)n.setPoint(1,null)}},{name:"神圣惩击",cost:1,description:"造成2点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(2)}},{name:"石化武器",cost:1,description:"在本回合中，使一个友方角色获得+3攻击力。",deal:function(e){var n=e.randFriendlyRole();if(n)n.ap+=3}},{name:"死亡缠绕",cost:1,description:"对一个随从造成1点伤害，如果死亡缠绕将其杀死，抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)if(n.dealDamage(1),n.dead())e.hero.drawCard(1)}},{name:"心灵视界",cost:1,description:"随机复制你的对手手牌中的一张牌，将其置入你的手牌。",deal:function(e){if(e.enemy.cards>0)e.hero.supplementCard(1)}},{name:"旋风斩",cost:1,description:"对所有随从造成1点伤害。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(1)}}},{name:"影袭",cost:1,description:"对敌方英雄造成3点伤害。",deal:function(e){e.enemy.dealDamage(3)}},{name:"斩杀",cost:1,description:"消灭一个受过伤害的敌方随从。",deal:function(e){var n=e.randRole(!0,!0,function(e){return e.current<e.hp});if(n)n.current=0}},{name:"爪击",cost:1,description:"使你的英雄获得2点护甲值，并在本回合中获得+2攻击力。",deal:function(e){e.hero.addArmor(2),e.hero.ap+=2}},{name:"真言术：盾",cost:1,description:"使一个随从获得+2生命值。抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)n.changePoint(0,2),e.hero.drawCard(1)}},{name:"致命药膏",cost:1,description:"使你的武器获得+2攻击力。",deal:function(e){if(e.hero.weapon)e.hero.weapon+=2,e.hero.ap+=2}},{name:"追踪术",cost:1,description:"查看你卡堆顶部的3张牌，抽取1张，弃掉其它2张。",deal:function(e){e.hero.drawCard(1),e.hero.pushStack(-2)}},{name:"暗言术：痛",cost:2,description:"消灭一个攻击力小于或等于3的随从。",deal:function(e){var n=e.randRole(!0,!1,function(e){return e.ap<=3});if(n)n.current=0}},{name:"毒刃",cost:2,description:"造成1点伤害，抽一张牌。",deal:function(e){var n=e.randRole();n.dealDamage(1),e.hero.drawCard(1)}},{name:"风怒",cost:2,description:"使一个随从获得风怒。",deal:function(e){var n=e.randRole(!0);if(n)n.addEffect("风怒",!0)}},{name:"寒冰箭",cost:2,description:"对一个角色造成3点伤害，并使其冻结。",deal:function(e){var n=e.randRole();n.dealDamage(3),n.frozen=!0}},{name:"闷棍",cost:2,description:"将一个敌方随从移回其拥有者的手牌。",deal:function(e){var n=e.randRole(!0,!0);if(n){var t=e.enemyMinions.indexOf(n);e.enemyMinions.splice(t,1),e.enemy.supplementCard(1)}}},{name:"魔爆术",cost:2,description:"对所有敌方随从造成1点伤害。",deal:function(e){for(var n=e.allRole(!0,!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(1)}}},{name:"神圣之灵",cost:2,description:"使一个随从的生命值翻倍。",deal:function(e){var n=e.randRole(!0);if(n)n.current*=2,n.hp*=2}},{name:"圣光术",cost:2,description:"恢复6点生命值。",deal:function(e){var n=e.randRole();if(n)if(e.shadow)n.dealDamage(6);else n.restoreHealth(6)}},{name:"顺劈斩",cost:2,description:"对2个随机敌方随从造成2点伤害。",deal:function(e){for(var n=e.randTwoEnemy(),t=0;t<n.length;t++){var i=n[t];i.dealDamage(2)}}},{name:"心灵震爆",cost:2,description:"对敌方英雄造成5点伤害。",deal:function(e){e.enemy.dealDamage(5)}},{name:"野性成长",cost:2,description:"获得一颗空的法力水晶。",deal:function(e){e.hero.supplementCard(1)}},{name:"野性印记",cost:2,description:"使1个随从获得嘲讽以及+2/+2。",deal:function(e){var n=e.randRole(!0);if(n)n.changePoint(2,2),n.addEffect("嘲讽",!0)}},{name:"英勇打击",cost:2,description:"在本回合中，使你的英雄获得+4攻击力。",deal:function(e){e.hero.ap+=4}},{name:"暗言术：灭",cost:3,description:"消灭一个攻击力大于或等于5的随从。",deal:function(e){var n=e.randRole(!0,!1,function(e){return e.ap>=5});if(n)n.current=0}},{name:"暗影箭",cost:3,description:"对1名随从造成4点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(4)}},{name:"奥术智慧",cost:3,description:"抽2张牌。",deal:function(e){e.hero.drawCard(2)}},{name:"冰霜新星",cost:3,description:"冻结所有敌方随从。",deal:function(e){for(var n=e.allRole(!0,!0),t=0;t<n.length;t++){var i=n[t];i.frozen=!0}}},{name:"冲锋",cost:3,description:"使一个友方随从获得+2攻击力和冲锋。",deal:function(e){var n=e.randFriendlyRole(!0);if(n)n.changePoint(2,0),n.addEffect("冲锋",!0)}},{name:"刀扇",cost:3,description:"对所有敌方随从造成1点伤害，抽一张牌。",deal:function(e){for(var n=e.allRole(!0,!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(1)}e.hero.drawCard(1)}},{name:"动物伙伴",cost:3,description:"随机召唤1头野兽宠物。",deal:function(e){var n=Math.floor(3*Math.random());if(1===n)e.addMinion({name:"雷欧克",ap:2,hp:4});else if(2===n){var t=e.addMinion({name:"霍夫",ap:4,hp:2});t.addEffect("冲锋",!0)}else{var i=e.addMinion({name:"米莎",ap:4,hp:4});i.addEffect("嘲讽",!0)}}},{name:"盾牌格挡",cost:3,description:"获得5点护甲。抽1张牌。",deal:function(e){e.hero.addArmor(5),e.hero.drawCard(1)}},{name:"杀戮命令",cost:3,description:"造成3点伤害。如果你有野兽，那么造成5点伤害取而代之。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3)}},{name:"吸取生命",cost:3,description:"造成2点伤害，为你的英雄恢复2点生命值。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(4);if(e.shadow)e.hero.dealDamage(2);else e.hero.restoreHealth(2)}},{name:"妖术",cost:3,description:"使一个随从变形成为一个0/1并具有嘲讽的青蛙。",deal:function(e){var n=e.randRole(!0);if(n){var t=e.friendlyMinions.indexOf(n);if(t>=0){e.friendlyMinions.splice(t,1);var i=e.addMinion({hp:1,ap:0,name:"青蛙"});i.addEffect("嘲讽")}else{t=e.enemyMinions.indexOf(n),e.enemyMinions.splice(t,1);var a=e.addEnemyMinion({hp:1,ap:0,name:"青蛙"});a.addEffect("嘲讽")}}}},{name:"野蛮咆哮",cost:3,description:"在本回合中，使你的所有角色获得+2攻击力。",deal:function(e){for(var n=e.allFriendlyRole(),t=0;t<n.length;t++){var i=n[t];i.ap+=2}}},{name:"治疗之触",cost:3,description:"恢复8点生命值。",deal:function(e){var n=e.randRole();if(n)if(e.shadow)n.dealDamage(8);else n.restoreHealth(8)}},{name:"变形术",cost:4,description:"使一个随从变形成为1/1的绵羊。",deal:function(e){var n=e.randRole(!0);if(n){var t=e.friendlyMinions.indexOf(n);if(t>=0){e.friendlyMinions.splice(t,1);e.addMinion({hp:1,ap:1,name:"绵羊"})}else{t=e.enemyMinions.indexOf(n),e.enemyMinions.splice(t,1);e.addEnemyMinion({hp:1,ap:1,name:"绵羊"})}}}},{name:"地狱烈焰",cost:4,description:"对所有角色造成3点伤害。",deal:function(e){for(var n=e.allRole(),t=0;t<n.length;t++){var i=n[t];i.dealDamage(3)}}},{name:"多重射击",cost:4,description:"随机对2名敌对随从造成3点伤害。",deal:function(e){for(var n=e.randTwoEnemy(),t=0;t<n.length;t++){var i=n[t];i.dealDamage(3)}}},{name:"愤怒之锤",cost:4,description:"造成3点伤害，抽一张牌。",deal:function(e){var n=e.randRole();n.dealDamage(3),e.hero.drawCard(1)}},{name:"奉献",cost:4,description:"对所有敌人造成2点伤害。",deal:function(e){for(var n=e.allRole(!1,!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(2)}}},{name:"横扫",cost:4,description:"对一个敌人造成4点伤害，并对所有其他敌人造成1点伤害。",deal:function(e){for(var n=e.allRole(!1,!0),t=e.randRole(!1,!0),i=0;i<n.length;i++){var a=n[i];if(a!==t)a.dealDamage(1);else a.dealDamage(4)}}},{name:"火球术",cost:4,description:"造成6点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(6)}},{name:"王者祝福",cost:4,description:"使一个随从获得+4/+4。",deal:function(e){var n=e.randRole(!0);if(n)n.changePoint(4,4)}},{name:"刺杀",cost:5,description:"消灭一个敌方随从。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0}},{name:"神圣新星",cost:5,description:"对所有敌方角色造成2点伤害，为所有友方角色恢复2点生命值。",deal:function(e){for(var n=e.allRole(!1,!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(2)}n=e.allFriendlyRole();for(var a=0;a<n.length;a++){var r=n[a];if(e.shadow)r.dealDamage(2);else r.restoreHealth(2)}}},{name:"嗜血",cost:5,description:"在本回合中，使你的随从获得+3攻击力。",deal:function(e){for(var n=e.allFriendlyRole(!0),t=0;t<n.length;t++){var i=n[t];i.ap+=3}}},{name:"消失",cost:6,description:"将所有随从移回其拥有者的手牌。",deal:function(e){for(var n=e.allRole(!0,!0),t=0;t<n.length;t++){var i=n[t],a=e.enemyMinions.indexOf(i);e.enemyMinions.splice(a,1),e.enemy.supplementCard(1)}n=e.allFriendlyRole(!0);for(var r=0;r<n.length;r++){var o=n[r],s=e.friendlyMinions.indexOf(o);e.friendlyMinions.splice(s,1),e.hero.supplementCard(1)}}},{name:"星火术",cost:6,description:"造成5点伤害，抽1张牌。",deal:function(e){var n=e.randRole();n.dealDamage(5),e.hero.drawCard(1)}},{name:"疾跑",cost:7,description:"抽4张牌。",deal:function(e){e.hero.drawCard(4)}},{name:"烈焰风暴",cost:7,description:"对所有敌方随从造成4点伤害。",deal:function(e){for(var n=e.allRole(!0,!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(4)}}},{name:"精神控制",cost:10,description:"获得一个敌方随从的控制权。",deal:function(e){var n=e.randRole(!0,!0);if(n&&e.allFriendlyRole(!0).length<=6){var t=e.enemyMinions.indexOf(n);e.enemyMinions.splice(t,1),e.friendlyMinions.push(n)}}},{name:"暗影步",cost:0,description:"使一个友方随从移回你的手牌，它的法力值消耗减少(2)点。",deal:function(e){var n=e.randFriendlyRole(!0);if(n){var t=e.friendlyMinions.indexOf(n);e.friendlyMinions.splice(t,1),e.hero.supplementCard(1)}}},{name:"沉默",cost:0,description:"沉默一个随从。",deal:function(e){var n=e.randRole(!0);if(n)n.shield=!1,n.frozen=!1,n.effect=[]}},{name:"怒火中烧",cost:0,description:"对一个随从造成1点伤害，该随从获得+2攻击力。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(1),n.ap+=2}},{name:"伺机待发",cost:0,description:"在本回合中，你所施放的下一个法术的法力值消耗减少(3)点。",deal:function(e){e.hero.addMp(3)}},{name:"治疗之环",cost:0,description:"为所有随从恢复4点生命值。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];if(e.shadow)i.dealDamage(4);else i.restoreHealth(4)}}},{name:"冰枪术",cost:1,description:"使一个角色冻结，如果它已经被冻结，则改为对其造成4点伤害。",deal:function(e){var n=e.randRole();if(n.frozen)n.dealDamage(4);n.frozen=!0}},{name:"叉状闪电",cost:1,description:"对2个随机敌方随从造成2点伤害，过载：(2)",deal:function(e){for(var n=e.randTwoEnemy(),t=0;t<n.length;t++){var i=n[t];i.dealDamage(2)}}},{name:"忏悔",cost:1,description:"奥秘：当你的对手召唤一个随从，使该随从的生命值降为1。",deal:function(e){e.hero.addSecret("忏悔")}},{name:"崇高牺牲",cost:1,description:"奥秘：每当一个敌人攻击时，召唤一个2/1的防御者，并使其成为攻击的目标。",deal:function(e){e.hero.addSecret("崇高牺牲")}},{name:"大地震击",cost:1,description:"沉默一个随从，然后对其造成1点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.shield=!1,n.frozen=!1,n.effect=[],n.dealDamage(1)}},{name:"盾牌猛击",cost:1,description:"你每有1点护甲值，便对一个随从造成1点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(e.hero.armor)}},{name:"救赎",cost:1,description:"奥秘：当一个你的随从死亡时，使其回到战场，并具有1点生命值。",deal:function(e){e.hero.addSecret("救赎")}},{name:"狂野怒火",cost:1,description:"在本回合内，使1个野兽获得+2攻击和免疫。",deal:function(e){}},{name:"冷血",cost:1,description:"使一个随从获得+2攻击力；连击：改为获得+4攻击力。",deal:function(e){var n=e.randRole(!0);if(n)n.ap+=2}},{name:"力量的代价",cost:1,description:"直到回合结束，使一个友方随从获得+4/+4，然后将其消灭。",deal:function(e){var n=e.randFriendlyRole(!0);if(n)n.changePoint(4,4),n.addEffect("在你的回合结束将其消灭",!0)}},{name:"闪电箭",cost:1,description:"造成3点伤害，过载：(1)",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3)}},{name:"升级！",cost:1,description:"如果你有一把武器，使它获得+1/+1。否则，装备一把1/3的武器。",deal:function(e){e.hero.weapon+=1,e.hero.ap+=1}},{name:"心灵之火",cost:1,description:"使一个随从的攻击力等同于其生命值。",deal:function(e){var n=e.randRole(!0);if(n)n.ap=n.current}},{name:"野蛮之击",cost:1,description:"对一个随从造成等同于你的英雄攻击力的伤害。",deal:function(e){var n=e.hero.ap,t=e.randRole(!0);if(t&&n)t.dealDamage(n)}},{name:"以眼还眼",cost:1,description:"奥秘：每当你的英雄受到伤害时，对敌方英雄造成等量的伤害。",deal:function(e){e.hero.addSecret("以眼还眼")}},{name:"隐藏",cost:1,description:"直到你的下个回合，使所有友方随从获得潜行。",deal:function(e){for(var n=e.allFriendlyRole(!0),t=0;t<n.length;t++){var i=n[t];i.addEffect("潜行",!0)}}},{name:"智慧祝福",cost:1,description:"选择一个随从，每当它进行攻击时，抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)n.addEffect("攻击时，抽一张牌。")}},{name:"自然平衡",cost:1,description:"消灭一个随从，你的对手抽两张牌。",deal:function(e){var n=e.randRole(!0);if(n)n.current=0;e.enemy.drawCard(2)}},{name:"爆炸陷阱",cost:2,description:"奥秘：当你的英雄受到攻击时，对所有敌人造成2点伤害。",deal:function(e){e.hero.addSecret("爆炸陷阱")}},{name:"背叛",cost:2,description:"一个敌方随从对其相邻的随从造成等同于其攻击力的伤害。",deal:function(e){var n=e.randRole(!0,!0);if(n)for(var t=e.neighbouringRoles(n),i=0;i<t.length;i++){var a=t[i];a.dealDamage(n.ap)}}},{name:"冰冻陷阱",cost:2,description:"奥秘：当1个敌对随从攻击时，让其返回到所有者手中，并令其消耗增加(2)",deal:function(e){e.hero.addSecret("冰冻陷阱")}},{name:"刺骨",cost:2,description:"造成2点伤害。连击：造成4点伤害取而代之。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(2)}},{name:"毒蛇陷阱",cost:2,description:"奥秘：当你的1个随从遭到攻击时，召唤3条1/1毒蛇。",deal:function(e){e.hero.addSecret("毒蛇陷阱")}},{name:"恶魔之火",cost:2,description:"对一个随从造成2点伤害，如果该随从是友方恶魔，则改为使其获得+2/+2。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(2)}},{name:"愤怒",cost:2,description:"抉择：对一个随从造成3点伤害；或者造成1点伤害并抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)if(Math.random()<.5)n.dealDamage(3);else n.dealDamage(1),e.hero.drawCard(1)}},{name:"剑刃乱舞",cost:2,description:"摧毁你的武器，对所有敌方角色造成等同于其攻击力的伤害。",deal:function(e){if(e.hero.weapon){var n=e.hero.weapon;e.hero.weapon=0,e.hero.ap-=n;for(var t=e.allRole(!1,!0),i=0;i<t.length;i++){var a=t[i];a.dealDamage(n)}}}},{name:"狙击",cost:2,description:"奥秘：当对手打出1个随从时，对该随从造成4点伤害。",deal:function(e){e.hero.addSecret("狙击")}},{name:"狂暴",cost:2,description:"使一个受过伤害的随从获得+3/+3。",deal:function(e){var n=e.randRole(!0,!1,function(e){return e.current<e.hp});if(n)n.changePoint(3,3)}},{name:"猛击",cost:2,description:"对一个随从造成2点伤害，如果它依然存活，则抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)if(n.dealDamage(2),!n.dead())e.hero.drawCard(1)}},{name:"命令怒吼",cost:2,description:"本回合内，你随从的血量无法低于1点。抽一张牌。",deal:function(e){for(var n=e.allFriendlyRole(!0),t=0;t<n.length;t++){var i=n[t];i.minHp=1}e.hero.drawCard(1)}},{name:"生而平等",cost:2,description:"将所有随从的生命值变为1。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.current=i.hp=1}}},{name:"误导",cost:2,description:"奥秘：当一个角色攻击你的英雄时，让他随机攻击另外一个角色取而代之。",deal:function(e){e.hero.addSecret("误导")}},{name:"先祖之魂",cost:2,description:"选择一个随从，当该随从被消灭时，它将返回战场。",deal:function(e){var n=e.randRole(!0);if(n)n.addEffect("亡语：重新召唤此生物。")}},{name:"野性之力",cost:2,description:"抉择：使你的随从获得+1/+1；或者召唤一个3/2的猎豹。",deal:function(e){if(Math.random()<.5)e.addMinion({name:"猎豹",ap:3,hp:2});else for(var n=e.allFriendlyRole(!0),t=0;t<n.length;t++){var i=n[t];i.changePoint(1,1)}}},{name:"战斗怒火",cost:2,description:"每有一个受到伤害的友方角色，便抽一张牌。",deal:function(e){var n=e.allFriendlyRole(!1,function(e){return e.current<e.hp});e.hero.drawCard(n.length)}},{name:"照明弹",cost:2,description:"使所有随从失去潜行效果。摧毁敌方所有奥秘。抽1张牌。",deal:function(e){e.hero.drawCard(1)}},{name:"暗影形态",cost:3,description:"你的英雄技能变为“造成2点伤害”，如果已经处于暗影形态下：改为“造成3点伤害”。",deal:function(e){}},{name:"法术反制",cost:3,description:"奥秘：当你的对手施放法术时，反制该法术。",deal:function(e){e.hero.addSecret("法术反制")}},{name:"感知恶魔",cost:3,description:"从你的牌库中随机将2张恶魔牌置入你的手牌。",deal:function(e){e.hero.supplementCard(2)}},{name:"关门放狗",cost:3,description:"战场上每有一个敌方随从，便召唤一个1/1并具有冲锋的猎犬。",deal:function(e){for(var n=e.allRole(!0,!0).length,t=0;n>t;t++){var i=e.addMinion({name:"猎犬",ap:1,hp:1});i.addEffect("冲锋")}}},{name:"寒冰护体",cost:3,description:"奥秘：当你的英雄受到攻击时，获得8点护甲值。",deal:function(e){e.hero.addSecret("寒冰护体")}},{name:"寒冰屏障",cost:3,description:"奥秘：每当你的英雄将要承受致命伤害时，防止这些伤害，并使其在本回合中获得免疫。",deal:function(e){e.hero.addSecret("寒冰屏障")}},{name:"镜像实体",cost:3,description:"奥秘：当一个敌方随从进行攻击时，召唤一个该随从的复制。",deal:function(e){e.hero.addSecret("镜像实体")}},{name:"裂颅之击",cost:3,description:"对敌方英雄造成2点伤害；连击：在下个回合将其移回你的手牌。",deal:function(e){e.enemy.dealDamage(2)}},{name:"扰咒术",cost:3,description:"奥秘：当一个敌方法术以一个随从为目标时，召唤一个1/3的随从并使其成为新的目标。",deal:function(e){e.hero.addSecret("扰咒术")}},{name:"熔岩爆裂",cost:3,description:"造成5点伤害，过载：(2)",deal:function(e){var n=e.randRole();if(n)n.dealDamage(5)}},{name:"闪电风暴",cost:3,description:"对所有敌方随从造成2到3点伤害，过载：(2)",deal:function(e){for(var n=e.allRole(!0,!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(2+Math.floor(2*Math.random()))}}},{name:"神恩术",cost:3,description:"抽若干数量的牌，直到你的手牌数量等同于你的对手的手牌数量。",deal:function(e){if(e.hero.cards<e.enemy.cards)e.hero.drawCard(e.enemy.cards-e.hero.cards)}},{name:"视界术",cost:3,description:"抽一张牌，该牌的法力值消耗减少(3)点。",deal:function(e){e.hero.drawCard(1)}},{name:"思维窃取",cost:3,description:"复制对手的牌库中的2张牌，并将其置入你的手牌。",deal:function(e){e.hero.supplementCard(2)}},{name:"野性狼魂",cost:3,description:"召唤2个2/3并具有嘲讽的幽灵狼。过载：(2)",deal:function(e){var n=e.addMinion({name:"幽灵狼",ap:2,hp:3});n.addEffect("嘲讽",!0),n=e.addMinion({name:"幽灵狼",ap:2,hp:3}),n.addEffect("嘲讽",!0)}},{name:"蒸发",cost:3,description:"奥秘：当一个随从攻击你的英雄，将其消灭。",deal:function(e){e.hero.addSecret("蒸发")}},{name:"致命射击",cost:3,description:"随机摧毁1个敌对随从。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0}},{name:"自然印记",cost:3,description:"抉择：使一个随从获得+4攻击力；或者+4生命值并具有嘲讽。",deal:function(e){var n=e.randRole(!0);if(n)if(Math.random()<.5)n.changePoint(4,0);else n.changePoint(0,4),n.addEffect("嘲讽",!0)}},{name:"暗影狂乱",cost:4,description:"直到回合结束，获得一个攻击力小于或等于3的敌方随从的控制权。",deal:function(e){var n=e.randRole(!0,!0,function(e){return e.ap<=3});if(n&&e.allFriendlyRole(!0).length<=6){var t=e.enemyMinions.indexOf(n);e.enemyMinions.splice(t,1),e.friendlyMinions.push(n),n.addEffect("在回合结束回到敌方")}}},{name:"暗影烈焰",cost:4,description:"消灭一个友方随从，对所有敌方随从造成等同于其攻击力的伤害。",deal:function(e){var n=e.randFriendlyRole(!0);if(n){var t=e.allRole(!0,!0);n.current=0;for(var i=0;i<t.length;i++){var a=t[i];a.dealDamage(n.ap)}}}},{name:"冰锥术",cost:4,description:"冻结一个随从和其相邻的随从，并对它们造成1点伤害。",deal:function(e){var n=e.randRole(!0);if(n)for(var t=e.neighbouringRoles(n).concat(n),i=0;i<t.length;i++){var a=t[i];a.frozen=!0,a.dealDamage(1)}}},{name:"丛林之魂",cost:4,description:"使你的随从获得“亡语：召唤一个2/2的树人。”",deal:function(e){for(var n=e.allFriendlyRole(!0),t=0;t<n.length;t++){var i=n[t];i.addEffect("亡语：召唤一个2/2的树人。")}}},{name:"控心术",cost:4,description:"随机复制对手的牌库中的一张随从牌，并将其置入战场。",deal:function(e){e.addMinion({name:"随机生物",ap:4,hp:5})}},{name:"群体驱散",cost:4,description:"沉默所有敌方随从，抽一张牌。",deal:function(e){for(var n=e.allRole(!0,!0),t=0;t<n.length;t++){var i=n[t];i.shield=!1,i.frozen=!1,i.effect=[],i.dealDamage(1)}e.hero.drawCard(1)}},{name:"撕咬",cost:4,description:"在本回合中，使你的英雄获得+4攻击力和4点护甲值。",deal:function(e){e.hero.addArmor(4),e.hero.ap+=4}},{name:"致死打击",cost:4,description:"造成4点伤害；如果你的英雄的生命值小于或等于12点，则改为造成6点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(e.hero.hp<=12?6:4)}},{name:"爆炸射击",cost:5,description:"对1个随从造成5点伤害，并对相邻目标造成2点伤害。",deal:function(e){var n=e.randRole(!0);if(n){var t=e.neighbouringRoles(n);n.dealDamage(5);for(var i=0;i<t.length;i++){var a=t[i];a.dealDamage(2)}}}},{name:"绝命乱斗",cost:5,description:"随机选择一个随从，消灭除了该随从外的所有其他随从。",deal:function(e){for(var n=e.randRole(!0),t=e.allRole(!0),i=0;i<t.length;i++){var a=t[i];if(a!==n)a.current=0}}},{name:"末日灾祸",cost:5,description:"对一个角色造成2点伤害，如果末日灾祸杀死该角色，随机召唤一个恶魔。",deal:function(e){var n=e.randRole();if(n.dealDamage(2),n.dead())e.addMinion({name:"随机恶魔",ap:4,hp:5})}},{name:"神圣愤怒",cost:5,description:"抽一张牌，并造成等同于其法力值消耗的伤害。",deal:function(e){var n=e.randRole(),t=Math.floor(11*Math.random());n.dealDamage(t),e.hero.drawCard(1)}},{name:"受祝福的勇士",cost:5,description:"使一个随从的攻击力翻倍。",deal:function(e){var n=e.randRole(!0);if(n)n.ap*=2}},{name:"星辰坠落",cost:5,description:"抉择：对一个随从造成5点伤害；或者对所有敌方随从造成2点伤害。",deal:function(e){if(!(Math.random()>.5))for(var n=e.allRole(!0,!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(2)}else{var a=e.randRole(!0);if(a)a.dealDamage(5)}}},{name:"滋养",cost:5,description:"抉择：获得2个法力水晶；或者抽3张牌。",deal:function(e){if(Math.random()<.5)e.hero.drawCard(3);else e.hero.addMp(2)}},{name:"暴风雪",cost:6,description:"对所有敌方随从造成2点伤害，并使其冻结。",deal:function(e){for(var n=e.allRole(!0,!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(2),i.frozen=!0}}},{name:"复仇之怒",cost:6,description:"造成8点伤害，随机分配给敌方角色。",deal:function(e){for(var n=0;8>n;n++){var t=e.randRole(!1,!0);t.dealDamage(1)}}},{name:"灵魂虹吸",cost:6,description:"消灭一个随从，为你的英雄恢复3点生命值。",deal:function(e){var n=e.randRole(!0);if(n)if(n.current=0,e.shadow)e.hero.dealDamage(3);else e.hero.restoreHealth(3)}},{name:"神圣之火",cost:6,description:"造成5点伤害。为你的英雄恢复5点生命值。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(5);if(e.shadow)e.hero.dealDamage(5);else e.hero.restoreHealth(5)}},{name:"自然之力",cost:6,description:"召唤3个2/2并具有冲锋的树人，在回合结束时，消灭这些树人。",deal:function(e){var n=e.addMinion({name:"树人",ap:2,hp:2});n.addEffect("冲锋",!0),n.addEffect("回合结束时，消灭这个随从",!0),n=e.addMinion({name:"树人",ap:2,hp:2}),n.addEffect("冲锋",!0),n.addEffect("回合结束时，消灭这个随从",!0),n=e.addMinion({name:"树人",ap:2,hp:2}),n.addEffect("冲锋",!0),n.addEffect("回合结束时，消灭这个随从",!0)}},{name:"扭曲虚空",cost:8,description:"消灭所有随从。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.current=0}}},{name:"圣疗术",cost:8,description:"恢复8点生命。抽3张牌。",deal:function(e){var n=e.randRole();if(e.shadow)n.dealDamage(8);else n.restoreHealth(8);e.hero.drawCard(3)}},{name:"炎爆术",cost:10,description:"造成10点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(10)}},{name:"复仇",cost:1,description:"奥秘：当你的随从死亡时，使一个随机友方随从获得+3/+2。",deal:function(e){e.hero.addSecret("复仇")}},{name:"转生",cost:2,description:"消灭一个随从，然后将其复活，并恢复所有生命值。",deal:function(e){var n=e.randRole(!0);if(n)n.current=n.hp}},{name:"复制",cost:3,description:"当一个友方随从死亡时，将两个该随从的复制置入你的手牌。",deal:function(e){e.hero.addSecret("复制")}},{name:"剧毒之种",cost:4,description:"消灭所有随从，并召唤等量的2/2的树人代替他们。",deal:function(e){for(var n=e.allRole(!0,!0).length,t=e.allRole(!0),i=0;i<t.length;i++){var a=t[i];a.current=0}for(var r=0;n>r;r++)e.addEnemyMinion({name:"树人",ap:2,hp:2});for(var o=0;o<t.length-n;o++)e.addMinion({name:"树人",ap:2,hp:2})}},{name:"纳鲁之光",cost:1,description:"恢复3点生命值。如果该目标仍处于受伤状态，则召唤一个圣光护卫者。",deal:function(e){var n=e.randRole();if(e.shadow)n.dealDamage(3);else n.restoreHealth(3);if(n.current<n.hp)e.addMinion({name:"圣光护卫者",ap:1,hp:3})}},{name:"暗色炸弹",cost:2,description:"造成3点伤害。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3)}},{name:"不稳定的传送门",cost:2,description:"将一个随机随从卡牌加入你的手牌。该随从的法力值消耗减少(3)点。",deal:function(e){e.hero.supplementCard(1)}},{name:"光明圣印",cost:2,description:"为你的英雄恢复4点生命值，并在本回合中获得+2攻击力。",deal:function(e){if(e.shadow)e.hero.dealDamage(4);else e.hero.restoreHealth(4);e.hero.ap+=2}},{name:"假死",cost:2,description:"触发所有友方随从亡语效果。",deal:function(e){}},{name:"连环爆裂",cost:2,description:"造成3到6点伤害，过载：(1)。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3+Math.floor(3*Math.random()))}},{name:"烈焰轰击",cost:2,description:"对一个随机敌方随从造成4点伤害。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.dealDamage(4)}},{name:"召唤宠物",cost:2,description:"抽一张牌。如果该牌是野兽牌，则其法力值消耗减少(4)点。",deal:function(e){e.hero.drawCard(1)}},{name:"弹射之刃",cost:3,description:"对一个随机随从造成1点伤害。重复此效果，直到某个随从死亡。",deal:function(e){var n=null;do if(n=e.randRole(!0))n.dealDamage(1);while(n&&!n.dead())}},{name:"维纶的恩泽",cost:3,description:"使一个随从获得+2/+4并具有法术伤害+1。",deal:function(e){var n=e.randRole(!0);if(n)n.changePoint(2,4)}},{name:"作战动员",cost:3,description:"召唤三个1/1白银之手新兵，装备一把1/4的武器。",deal:function(e){e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1});var n=e.hero.weapon;e.hero.weapon=1,e.hero.ap-=n-1}},{name:"暗中破坏",cost:4,description:"消灭一个随机敌方随从，连击：并且摧毁你的对手的武器。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0}},{name:"麦迪文的残影",cost:4,description:"复制你的所有随从，并将其置入你的手牌。",deal:function(e){var n=e.allFriendlyRole(!0).length;e.hero.supplementCard(n)}},{name:"先祖召唤",cost:4,description:"每个玩家从手牌中将一个随机随从置入战场。",deal:function(e){if(e.hero.cards>0)e.addMinion({name:"随机生物",ap:4,hp:5}),e.hero.cards--;if(e.enemy.cards>0)e.addEnemyMinion({name:"随机生物",ap:4,hp:5}),e.enemy.cards--}},{name:"小鬼爆破",cost:4,description:"对一个随从造成2-4点伤害。每造成1点伤害，便召唤一个1/1的小鬼。",deal:function(e){var n=2+Math.floor(3*Math.random()),t=e.randRole(!0);if(t){t.dealDamage(n);for(var i=0;n>i;i++)e.addMinion({name:"小鬼",ap:1,hp:1})}}},{name:"修补匠的磨刀油",cost:4,description:"使你的武器获得+3攻击力。连击：使一个随机友方随从获得+3攻击力。",deal:function(e){if(e.hero.weapon)e.hero.weapon+=3,e.hero.ap+=3}},{name:"恶魔之心",cost:5,description:"对一个随从造成5点伤害，如果该随从是友方恶魔，则改为使其获得+5/+5。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(5)}},{name:"眼镜蛇射击",cost:5,description:"对一个随从和敌方英雄造成3点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(3);e.enemy.dealDamage(3)}},{name:"黑暗低语者",cost:6,description:"抉择：召唤5个小精灵；或者使一个随从获得+5/+5并具有嘲讽。",deal:function(e){if(Math.random()<.5){var n=e.randRole(!0);if(n)n.addEffect("嘲讽",!0),n.changePoint(5,5)}else e.addMinion({name:"小精灵",ap:1,hp:1}),e.addMinion({name:"小精灵",ap:1,hp:1}),e.addMinion({name:"小精灵",ap:1,hp:1}),e.addMinion({name:"小精灵",ap:1,hp:1}),e.addMinion({name:"小精灵",ap:1,hp:1})}},{name:"回收",cost:6,description:"将一个敌方随从洗回你的对手的牌库。",deal:function(e){var n=e.randRole(!0,!0);if(n){var t=e.enemyMinions.indexOf(n);e.enemyMinions.splice(t,1),e.enemy.pushStack(1)}}},{name:"圣光炸弹",cost:6,description:"对所有随从造成等同于其攻击力的伤害。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(i.ap)}}},{name:"重碾",cost:7,description:"消灭一个随从。如果你控制任何受伤的随从，该法术的法力值消耗减少(4)点。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.current=0}},{name:"生命之树",cost:9,description:"为所有角色恢复所有生命值。",deal:function(e){for(var n=e.allRole(),t=0;t<n.length;t++){var i=n[t];i.current=i.hp}}},{name:"复仇打击",cost:2,description:"对所有随从造成1点伤害。如果你的生命值小于或等于12点，则改为造成3点伤害。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(e.hero.hp<=12?3:1)}}},{name:"复活术",cost:2,description:"随机召唤一个在本局对战中死亡的友方随从。",deal:function(e){e.addMinion({name:"随机生物",ap:4,hp:5})}},{name:"快速射击",cost:2,description:"造成3点伤害。如果你没有其他手牌，则抽一张牌。",deal:function(e){var n=e.randRole();if(n.dealDamage(3),0===e.hero.cards)e.hero.drawCard(1)}},{name:"熔岩震击",cost:2,description:"造成2点伤害。将你所有过载的法力水晶解锁。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(2)}},{name:"夜幕奇袭",cost:2,description:"选择一个随从。将该随从的3个复制洗入你的牌库。",deal:function(e){var n=e.randRole(!0);if(n)e.hero.pushStack(3)}},{name:"恶魔之怒",cost:3,description:"对所有非恶魔随从造成2点伤害。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(2)}}},{name:"龙息术",cost:5,description:"造成4点伤害。在本回合中每有一个随从死亡，该牌的法力值消耗就减少(1)点。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(4)}},{name:"严正警戒",cost:5,description:"抽两张牌。在本回合中每有一个随从死亡，该牌的法力值消耗就减少(1)点。",deal:function(e){e.hero.drawCard(2)}},{name:"奥数冲击",cost:1,description:"对一个随从造成2点伤害。该法术在受到法术伤害的增益效果时，效果翻倍。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(2)}},{name:"活体根须",cost:1,description:"抉择：造成2点伤害；或者召唤两个1/1的树苗。",deal:function(e){if(Math.random()<.5){var n=e.randRole();n.dealDamage(2)}else e.addMinion({name:"树苗",ap:1,hp:1}),e.addMinion({name:"树苗",ap:1,hp:1})}},{name:"快速治疗",cost:1,description:"恢复5点生命值。",deal:function(e){var n=e.randRole();if(n)if(e.shadow)n.dealDamage(5);else n.restoreHealth(5)}},{name:"真言术：耀",cost:1,description:"选择一个随从。每当其进行攻击，为你的英雄恢复4点生命值。",deal:function(e){var n=e.randRole(!0);if(n)n.addEffect("每当其进行攻击，为你的英雄恢复4点生命值。")}},{name:"争强好胜",cost:1,description:"奥秘：在你的回合开始时，使你的随从获得+1/+1。",deal:function(e){e.hero.addSecret("争强好胜")}},{name:"捕熊陷阱",cost:2,description:"奥秘：在你的英雄受到攻击后，召唤一个3/3并具有嘲讽的灰熊",deal:function(e){e.hero.addSecret("捕熊陷阱")}},{name:"策反",cost:2,description:"复制一个敌方随从，并将其置入你的手牌。",deal:function(e){e.hero.supplementCard(1)}},{name:"恶魔融合",cost:2,description:"使一个恶魔获得+3/+3，使你的对手获得一个法力水晶。",deal:function(e){}},{name:"加固",cost:2,description:"使你具有嘲讽的随从获得+2/+2。",deal:function(e){for(var n=e.allFriendlyRole(!0,function(e){return e.effect.indexOf("嘲讽")>=0}),t=0;t<n.length;t++){var i=n[t];i.changePoint(2,2)}}},{name:"迷乱",cost:2,description:"使所有随从的攻击力和生命值互换。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.hp=i.ap,i.ap=i.current,i.current=i.hp}}},{name:"先祖知识",cost:2,description:"抽两张牌。过载：(2)",deal:function(e){e.hero.drawCard(2)}},{name:"子弹上膛",cost:2,description:"在本回合中，每当你施放一个法术，随机将一张猎人职业牌置入你的手牌。",deal:function(e){}},{name:"变形术：野猪",cost:3,description:"使一个随从变形为4/2并具有冲锋的野猪。",deal:function(e){var n=e.randRole(!0);if(n){var t=e.friendlyMinions.indexOf(n);if(t>=0){e.friendlyMinions.splice(t,1);var i=e.addMinion({
hp:2,ap:4,name:"野猪"});i.addEffect("冲锋")}else{t=e.enemyMinions.indexOf(n),e.enemyMinions.splice(t,1);var a=e.addEnemyMinion({hp:2,ap:4,name:"野猪"});a.addEffect("冲锋")}}}},{name:"腐根",cost:3,description:"消灭一个随从。随机将一个随从置入你对手的手牌。",deal:function(e){var n=e.randRole(!0);if(n)n.current=0,e.enemy.supplementCard(1)}},{name:"轮回",cost:3,description:"奥秘：当一个友方随从死亡时，随机召唤一个法力值消耗相同的随从。",deal:function(e){e.hero.addSecret("轮回")}},{name:"怒袭",cost:3,description:"造成3点伤害。获得3点护甲值。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3);e.hero.addArmor(3)}},{name:"剽窃",cost:3,description:"随机将两张（你的对手职业的）职业卡牌加入你的手牌。",deal:function(e){e.hero.supplementCard(2)}},{name:"潜于地下",cost:3,description:"将三张“伏击”牌洗入你对手的牌库，当你的对手抽到该牌时，你召唤一个4/4的蛛魔。",deal:function(e){e.enemy.pushStack(3)}},{name:"强风射击",cost:3,description:"对一个随从及其相邻的随从造成2点伤害。",deal:function(e){var n=e.randRole(!0);if(n){var t=e.neighbouringRoles(n);n.dealDamage(2);for(var i=0;i<t.length;i++){var a=t[i];a.dealDamage(2)}}}},{name:"英勇圣印",cost:3,description:"使一个随从获得+3攻击力，并具有圣盾。",deal:function(e){var n=e.randRole(!0);if(n)n.ap+=3,n.shield=!0}},{name:"元素毁灭",cost:3,description:"对所有随从造成4-5点伤害。过载：(5)",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(4+Math.floor(2*Math.random()))}}},{name:"治疗波",cost:3,description:"恢复7点生命值。揭示双方牌库里的一张随从牌，如果你的牌法力消耗较大，则恢复14点生命值。",deal:function(e){var n=e.randRole();if(e.shadow)n.dealDamage(7);else n.restoreHealth(7);if(Math.random()<.5)if(e.shadow)n.dealDamage(7);else n.restoreHealth(7)}},{name:"加拉克苏斯之拳",cost:4,description:"当你打出或丢弃该牌时，对一个随机敌人造成4点伤害。",deal:function(e){var n=e.randRole(!0,!0);if(n)n.dealDamage(4)}},{name:"星界沟通",cost:4,description:"获得十个法力水晶。弃掉你的手牌。",deal:function(e){e.hero.cards=1}},{name:"烈焰长枪",cost:5,description:"对一个随从造成8点伤害。",deal:function(e){var n=e.randRole(!0);if(n)n.dealDamage(8)}},{name:"黑暗契约",cost:6,description:"随机消灭两个敌方随从。随机弃两张牌。",deal:function(e){for(var n=e.randTwoEnemy(),t=0;t<n.length;t++){var i=n[t];i.current=0}e.hero.supplementCard(-2)}},{name:"精英对决",cost:6,description:"除了每个玩家攻击力最高的随从之外，消灭其他所有随从。",deal:function(e){var n=e.friendlyMinions.filter(function(e){return!e.dead()});if(n.length>1){for(var t=0,i=null,a=0;a<n.length;a++){var r=n[a];if(r.ap>=t)t=r.ap,i=r}for(var o=0;o<n.length;o++){var s=n[o];if(s!==i)s.current=0}}if(n=e.enemyMinions.filter(function(e){return!e.dead()}),n.length>1){for(var l=0,c=null,d=0;d<n.length;d++){var f=n[d];if(f.ap>=l)l=f.ap,c=f}for(var h=0;h<n.length;h++){var u=n[h];if(u!==c)u.current=0}}}},{name:"天降蛛群",cost:6,description:"召唤三个1/1的结网蛛。",deal:function(e){var n=e.addMinion({name:"结网蛛",ap:1,hp:1});n.addEffect("亡语：将一个随机野兽放到你的手牌"),n=e.addMinion({name:"结网蛛",ap:1,hp:1}),n.addEffect("亡语：将一个随机野兽放到你的手牌"),n=e.addMinion({name:"结网蛛",ap:1,hp:1}),n.addEffect("亡语：将一个随机野兽放到你的手牌")}},{name:"审判",cost:1,description:"奥秘：当你的对手打出一张随从牌时，如果他控制至少三个随从，则将其消灭。",deal:function(e){e.hero.addSecret("审判")}},{name:"乌鸦神像",cost:1,description:"抉择：发现一张随从牌；或者发现一张法术牌。",deal:function(e){e.hero.supplementCard(1)}},{name:"毒镖陷阱",cost:2,description:"奥秘：当对方使用英雄技能时，对一个随机敌人造成5点伤害。",deal:function(e){e.hero.addSecret("毒镖陷阱")}},{name:"拉法姆的诅咒",cost:2,description:"使你的对手获得一张“诅咒！”牌。在对手的回合开始时，如果它在对手的手牌中，则造成2点伤害。",deal:function(e){e.enemy.supplementCard(1)}},{name:"探险帽",cost:2,description:"使一个随从获得+1/+1，以及亡语：将一个探险帽置入你的手牌。",deal:function(e){var n=e.randRole(!0);if(n)n.changePoint(1,1),n.addEffect("亡语：将一个探险帽置入你的手牌。")}},{name:"老旧的火把",cost:3,description:"造成3点伤害。将一张可造成6点伤害的“炽烈的火把”洗入你的牌库。",deal:function(e){var n=e.randRole();if(n)n.dealDamage(3),e.hero.pushStack(1)}},{name:"极恶之咒",cost:5,description:"对所有随从造成3点伤害。将该牌洗入你对手的牌库。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.dealDamage(3)}e.enemy.supplementCard(1)}},{name:"埋葬",cost:6,description:"选择一个敌方随从。将该随从洗入你的牌库。",deal:function(e){var n=e.randRole(!0,!0);if(n){var t=e.enemyMinions.indexOf(n);e.enemyMinions.splice(t,1),e.hero.pushStack(1)}}},{name:"鱼人恩典",cost:7,description:"使你的随从获得+2/+2。你每控制一个鱼人，该牌的法力值消耗便减少(1)点。",deal:function(e){for(var n=e.allFriendlyRole(!0),t=0;t<n.length;t++){var i=n[t];i.changePoint(2,2)}}},{name:"亡者归来",cost:10,description:"召唤七个在本局对战中死亡的鱼人。",deal:function(e){}},{name:"禁忌畸变",cost:0,description:"消耗你所有的法力值，随机召唤一个法力值消耗相同的随从。",deal:function(e){e.addMinion({name:"随机随从",hp:e.hero.mp||1,ap:e.hero.mp||1}),e.hero.mp=0}},{name:"禁忌烈焰",cost:0,description:"消耗你所有的法力值，对一个随从造成等同于所消耗法力值数量的伤害。",deal:function(e){if(e.hero.mp){var n=e.randRole(!0);if(n)n.dealDamage(e.hero.mp),e.hero.mp=0}}},{name:"禁忌治疗",cost:0,description:"消耗你所有的法力值，恢复等同于所消耗法力值数量两倍的生命值。",deal:function(e){if(e.hero.mp){var n=e.randRole(!0);if(n){if(e.shadow)n.dealDamage(2*e.hero.mp);else n.restoreHealth(2*e.hero.mp);e.hero.mp=0}}}},{name:"弃暗投明",cost:2,description:"将你的英雄技能和术士职业牌替换成其他职业的。这些牌的法力消耗减少(1)点。",deal:function(e){}},{name:"亚煞极印记",cost:2,description:"使一个随从获得+2/+2。如果该随从是野兽，抽一张牌。",deal:function(e){var n=e.randRole(!0);if(n)n.addEffect(2,2)}},{name:"寄生感染",cost:3,description:"使你的所有随从获得“亡语：随机将一张野兽牌置入你的手牌。”",deal:function(e){for(var n=e.allFriendlyRole(!0),t=0;t<n.length;t++){var i=n[t];i.addEffect("亡语：将一个随机野兽放到你的手牌")}}},{name:"暗言术：骇",cost:4,description:"消灭所有攻击力小于或等于2的随从。",deal:function(e){for(var n=e.allRole(!0,!1,function(e){return e.ap<=2}),t=0;t<n.length;t++){var i=n[t];i.current=0}}},{name:"惩黑除恶",cost:5,description:"召唤五个1/1的白银之手新兵。",deal:function(e){e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1}),e.addMinion({name:"白银之手新兵",ap:1,hp:1})}},{name:"秘法宝典",cost:5,description:"随机将三张法师的法术牌置入你的手牌。",deal:function(e){e.hero.supplementCard(3)}},{name:"末日降临",cost:10,description:"消灭所有随从。每消灭一个随从，便抽一张牌。",deal:function(e){for(var n=e.allRole(!0),t=0;t<n.length;t++){var i=n[t];i.current=0}e.hero.drawCard(n.length)}},{name:"狂乱传染",cost:3,description:"造成9点伤害，随机分配到所有角色身上",deal:function(e){for(var n=0;9>n;n++){var t=e.randRole();t.dealDamage(1)}}},{name:"菊花茶",cost:6,description:"抽一张牌，并添加两个该牌的复制到你的手牌",deal:function(e){e.hero.drawCard(1),e.hero.supplementCard(2)}},{name:"暗影之拥",cost:6,description:"在本回合内，你的恢复生命值的效果改为造成伤害。",deal:function(e){e.shadow=!0}}];return e}),define("yogg/common/Magic",["require","babel-runtime/helpers/classCallCheck","./config"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=require("./config"),exports={},t=function(){function n(t){if(e(this,n),this.name="",this.cost=0,this.description="",this.name=t.name,this.cost=t.cost,this.description=t.description,t.deal)this.deal=t.deal}return n.prototype.deal=function(e){throw new Error("必须重写操作函数")},n}(),i=exports.MAGIC_LIST=n.map(function(e){return new t(e)}),a=exports.MAGIC_MAP={};i.forEach(function(e){return a[e.name]=e});exports.Magic=function(){function n(t,i,a){e(this,n),this.list=[],this.scene=null,this.index=0,this.scene=t;for(var r=0;i>r;r++)this.list.push(n.randomMagic(a))}return n.prototype.deal=function(){if(this.index>=this.list.length)return!1;var e=this.list[this.index++];e.deal(this.scene);for(var n=this.scene.friendlyMinions.concat(this.scene.enemyMinions),t=0;t<n.length;t++){var i=n[t],a=void 0;if(i.dead()&&(a=i.effect.indexOf("亡语：将一个随机野兽放到你的手牌"))>=0)i.effect.splice(a,1),this.scene.hero.supplementCard(1);if(i.dead()&&(a=i.effect.indexOf("亡语：将一个探险帽置入你的手牌。"))>=0)i.effect.splice(a,1),this.scene.hero.supplementCard(1);if(i.dead()&&(a=i.effect.indexOf("亡语：召唤一个2/2的树人。"))>=0)i.effect.splice(a,1),this.scene.addMinion({ap:2,hp:2,name:"树人"});if(i.dead()&&(a=i.effect.indexOf("亡语：重新召唤此生物。"))>=0)i.effect.splice(a,1),this.scene.addMinion({ap:i.ap,hp:i.hp,name:i.name})}if(this.scene.finished())return this.list.splice(this.index,this.list.length),!1;else return!0},n.randomMagic=function(e){var n=Math.floor(Math.random()*(e?i.length-27:i.length));if(n>150&&e)n+=27;return i[n]},n}();return exports}),define("yogg/common/Scene",["require","babel-runtime/helpers/classCallCheck","./Hero","./Minion","./Magic"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=require("./Hero"),t=require("./Minion"),i=require("./Magic"),a=i.Magic,r=function(){function i(a){if(e(this,i),this.hero=null,this.enemy=null,this.friendlyMinions=null,this.enemyMinions=null,this.shadow=!1,this.hero=new n(a.hero),this.enemy=new n(a.enemy),this.friendlyMinions=a.friendlyMinions.map(function(e){return new t(e)}),this.enemyMinions=a.enemyMinions.map(function(e){return new t(e)}),this.friendlyMinions.length>6)throw new Error("不能添加超过6个友方随从，不然没办法使用YOGG");this.friendlyMinions.push(new t({name:"尤格萨隆",hp:5,ap:7}))}return i.prototype.finished=function(){return this.hero.dead()||this.enemy.dead()},i.prototype.randRole=function(e,n,t){var i=this.allRole(e,n,t),a=Math.floor(Math.random()*i.length);return i[a]},i.prototype.randFriendlyRole=function(e,n){var t=this.allFriendlyRole(e,n),i=Math.floor(Math.random()*t.length);return t[i]},i.prototype.allRole=function(e,n,t){var i=[];if(!e){if(!n)i.push(this.hero);i.push(this.enemy)}if(!n)i.push.apply(i,this.friendlyMinions.filter(function(e){return!e.dead()}));if(i.push.apply(i,this.enemyMinions.filter(function(e){return!e.dead()})),t)return i.filter(t);else return i},i.prototype.allFriendlyRole=function(e,n){var t=[];if(!e)t.push(this.hero);if(t.push.apply(t,this.friendlyMinions.filter(function(e){return!e.dead()})),n)return t.filter(n);else return t},i.prototype.neighbouringRoles=function(e){var n=this.allRole(!0,!0),t=n.indexOf(e);if(0>t)n=this.friendlyMinions.filter(function(e){return!e.dead()}),t=n.indexOf(e);var i=[];if(t-1>=0)i.push(n[t-1]);if(t+1<n.length)i.push(n[t+1]);return i},i.prototype.randTwoEnemy=function(){var e=this.allRole(!0,!0);if(e.length<2)return[];var n=Math.floor(Math.random()*e.length),t=e[n];n=Math.floor(Math.random()*e.length);for(var i=e[n];t===i;)n=Math.floor(Math.random()*e.length),i=e[n];return[t,i]},i.prototype.addMinion=function(e){var n=this.friendlyMinions.filter(function(e){return!e.dead()}),i=new t(e);if(n.length<7)this.friendlyMinions.push(i);return i},i.prototype.addEnemyMinion=function(e){var n=this.enemyMinions.filter(function(e){return!e.dead()}),i=new t(e);if(n.length<7)this.enemyMinions.push(i);return i},i.prototype.info=function(){return{hero:this.hero.info(),enemy:this.enemy.info(),friendlyMinions:this.friendlyMinions.map(function(e){return e.info()}),enemyMinions:this.enemyMinions.map(function(e){return e.info()})}},i.prototype.createMagic=function(e,n){return new a(this,e,n)},i}();return r}),define("babel-runtime/helpers/toConsumableArray",[],function(){function e(e){for(var n=[],t=0,i=+e.length,a=0;i>a;)n[t++]=e[a++];if(isNaN(i))for(;void 0!==e[a];)n[t++]=e[a++];return n}return e}),define("yogg/common/SceneStatistician",["require","babel-runtime/helpers/toConsumableArray","babel-runtime/helpers/classCallCheck","./Scene"],function(require){var e=require("babel-runtime/helpers/toConsumableArray"),n=require("babel-runtime/helpers/classCallCheck"),t=require("./Scene"),i=function(){function i(e,t,a){n(this,i),this.origin=null,this.num=0,this.isStandard=!1,this.result={heroHpMap:{},heroMpMap:{},heroCardsMap:{},heroDrawnMap:{},heroStackMap:{},heroOverflowMap:{}},this.times=0,this.origin=e,this.num=t,this.isStandard=a}return i.prototype.run=function(){this.times++;for(var e=new t(this.origin),n=e.createMagic(this.num,this.isStandard);;)if(!n.deal())break;this.statistic(e.info())},i.prototype.statistic=function(e){var n=this.result,t=e.hero,i=(e.enemy,e.friendlyMinions,e.enemyMinions,t.dead?0:t.hp+t.armor);n.heroHpMap[i]=n.heroHpMap[i]||0,n.heroHpMap[i]++;var a=t.mp>10?10:t.mp;n.heroMpMap[a]=n.heroMpMap[a]||0,n.heroMpMap[a]++;var r=t.cards;n.heroCardsMap[r]=n.heroCardsMap[r]||0,n.heroCardsMap[r]++;var o=t.drawn;n.heroDrawnMap[o]=n.heroDrawnMap[o]||0,n.heroDrawnMap[o]++;var s=t.stack;n.heroStackMap[s]=n.heroStackMap[s]||0,n.heroStackMap[s]++;var l=t.overflow;n.heroOverflowMap[l]=n.heroOverflowMap[l]||0,n.heroOverflowMap[l]++},i.prototype.statisticHeroHp=function(){for(var n=this.result.heroHpMap,t=this.origin.hero.hp+this.origin.hero.armor,i=[],a=Math.max.apply(Math,e(Object.keys(n))),r=Math.min.apply(Math,e(Object.keys(n))),o=0;a>o;o++)i[o]=n[o]||0;var s=(i.reduce(function(e,n,i){return e+n*(i-t)},0)/this.times).toFixed(4);return{max:a,min:r,hp:i,average:s,origin:t}},i.prototype.statisticHeroMp=function(){for(var n=this.result.heroMpMap,t=[],i=Math.max.apply(Math,e(Object.keys(n))),a=Math.min.apply(Math,e(Object.keys(n))),r=0;i>r;r++)t[r]=n[r]||0;var o=(t.reduce(function(e,n,t){return e+n*t},0)/this.times).toFixed(4);return{max:i,min:a,mp:t,average:o}},i.prototype.statisticHeroCards=function(){for(var n=this.result.heroCardsMap,t=this.origin.hero.cards,i=[],a=Math.max.apply(Math,e(Object.keys(n))),r=Math.min.apply(Math,e(Object.keys(n))),o=0;a>o;o++)i[o]=n[o]||0;var s=(i.reduce(function(e,n,i){return e+n*(i-t)},0)/this.times).toFixed(4);return{max:a,min:r,cards:i,average:s}},i.prototype.statisticHeroDrawn=function(){for(var n=this.result.heroDrawnMap,t=[],i=Math.max.apply(Math,e(Object.keys(n))),a=Math.min.apply(Math,e(Object.keys(n))),r=0;i>r;r++)t[r]=n[r]||0;var o=(t.reduce(function(e,n,t){return e+n*t},0)/this.times).toFixed(4);return{max:i,min:a,drawn:t,average:o}},i.prototype.statisticHeroStack=function(){for(var n=this.result.heroStackMap,t=this.origin.hero.stack,i=[],a=Math.max.apply(Math,e(Object.keys(n))),r=Math.min.apply(Math,e(Object.keys(n))),o=0;a>o;o++)i[o]=n[o]||0;var s=(i.reduce(function(e,n,i){return e+n*(i-t)},0)/this.times).toFixed(4);return{max:a,min:r,stack:i,average:s}},i.prototype.statisticHeroOverflow=function(){for(var n=this.result.heroOverflowMap,t=[],i=Math.max.apply(Math,e(Object.keys(n))),a=Math.min.apply(Math,e(Object.keys(n))),r=0;i>r;r++)t[r]=n[r]||0;var o=(t.reduce(function(e,n,t){return e+n*t},0)/this.times).toFixed(4);return{max:i,min:a,overflow:t,average:o}},i.prototype.getResult=function(){return{hero:{hp:this.statisticHeroHp(),mp:this.statisticHeroMp(),cards:this.statisticHeroCards(),drawn:this.statisticHeroDrawn(),stack:this.statisticHeroStack(),overflow:this.statisticHeroOverflow()}}},i}();return i}),define("yogg/index/index.tpl",[],function(){return'<!-- target: scene -->\n<header>\n    <label>请选择场景：</label>\n    <span data-role="scene-select"></span>\n    <!--<input type="button" data-role="scene-edit" class="btn-white" value="修改">-->\n    <input type="button" data-role="scene-load" class="btn-blue" value="加载">\n    <!-- <input type="button" data-role="scene-create" class="btn-orange" value="创建新场景"> -->\n    <span class="form-msg"></span>\n</header>\n<aside>\n    <div class="magic-title">运行日志：</div>\n    <ul data-role="magic-list"></ul>\n</aside>\n<main></main>\n<footer>\n    <label>法术数量：<input data-role="scene-num" type="text" value="10"></label>\n    <label><input type="checkbox" data-role="scene-standard" checked>标准模式</label>\n    <label><input type="checkbox" data-role="scene-animate">步骤运行</label>\n    <input type="button" data-role="scene-run" class="btn-blue btn-disabled" value="运行" disabled>\n    <input type="button" data-role="scene-statistic" class="btn-orange btn-disabled" value="统计" disabled>\n    <input type="button" data-role="scene-reset" class="btn-white btn-disabled" disabled value="重置">\n    <span class="form-msg"></span>\n</footer>\n\n<!-- target: scene-info -->\n<div class="scene-enemy">\n    <div class="scene-title">敌方信息</div>\n    <!-- use: scene-hero(data = ${enemy}) -->\n    <div class="scene-minions">\n        <!-- for: ${enemyMinions} as ${minion} -->\n        <!-- if: !${minion.dead} -->\n        <!-- use: scene-minion(data = ${minion}) -->\n        <!-- /if -->\n        <!-- /for -->\n    </div>\n    <div class="scene-dead">\n        <div class="scene-title">坟场</div>\n        <ul>\n            <!-- for: ${enemyMinions} as ${minion} -->\n            <!-- if: ${minion.dead} -->\n            <li>${minion.name}已经死亡</li>\n            <!-- /if -->\n            <!-- /for -->\n        </ul>\n    </div>\n</div>\n<div class="scene-friend">\n    <div class="scene-title">友方信息</div>\n    <!-- use: scene-hero(data = ${hero}) -->\n    <div class="scene-minions">\n        <!-- for: ${friendlyMinions} as ${minion} -->\n        <!-- if: !${minion.dead} -->\n        <!-- use: scene-minion(data = ${minion}) -->\n        <!-- /if -->\n        <!-- /for -->\n    </div>\n    <div class="scene-dead">\n        <div class="scene-title">坟场</div>\n        <ul>\n            <!-- for: ${friendlyMinions} as ${minion} -->\n            <!-- if: ${minion.dead} -->\n            <li>${minion.name}已经死亡</li>\n            <!-- /if -->\n            <!-- /for -->\n        </ul>\n    </div>\n</div>\n\n<!-- target: scene-hero -->\n<div class="scene-hero">\n    <p class="scene-title">${data.name}</p>\n    <p>\n        <!-- if: ${data.hp} <= 0 -->\n        已阵亡\n        <!-- else -->\n        <label>血量：<span class="scene-red">${data.hp}</span></label>\n        <label>护甲：<span class="scene-red">${data.armor}</span></label>\n        <!-- /if -->\n    </p>\n    <p>\n        <label>法力：<span class="scene-red">${data.mp}</span></label>\n        <label>伤害：<span class="scene-red">${data.ap}</span></label>\n    </p>\n    <p>共有<span class="scene-yellow">${data.cards}</span>张手牌，牌库剩<span class="scene-yellow">${data.stack}</span>张</p>\n    <!-- if: ${data.drawn} || ${data.overflow}-->\n    <p>\n        共抽取<span class="scene-yellow">${data.drawn}</span>张牌\n        <!-- if: ${data.overflow}-->\n        ，共爆掉<span class="scene-yellow">${data.overflow}</span>张牌\n        <!-- /if -->\n    </p>\n    <!-- /if -->\n    <!-- var: secret = ${data.secret} && ${data.secret}.join(\'，\') -->\n    <!-- if: ${secret} -->\n    <p>奥秘：${secret}</p>\n    <!-- /if -->\n</div>\n\n<!-- target: scene-minion -->\n<div class="scene-minion">\n    <p class="scene-minion-title">${data.name}</p>\n    <p>攻击：<span class="scene-red">${data.ap}</span></p>\n    <p>血量：<span class="scene-red">${data.hp}</span></p>\n    <!-- var: effect = ${data.effect}.filter(function(a) { return a.length <= 2}).join(\'，\') -->\n    <!-- if: ${data.effect.length} -->\n    <p>${effect}</p>\n    <!-- /if -->\n    <!-- var: effect = ${data.effect}.filter(function(a) { return a.length > 2}) -->\n    <!-- if: ${effect.length} -->\n    <div class="scene-ellipsis">\n        <!-- for: ${effect} as ${item} -->\n        <p title="${item}">${item}</p>\n        <!-- /for -->\n    </div>\n    <!-- /if -->\n</div>\n\n<!-- target: form -->\n<form class="lice-form">\n    <!-- for: ${fields} as ${field}, ${name} -->\n    <div class="form-container">\n        <label class="form-label" title="${field.title}">\n            ${field.title}：\n            <!-- if: ${field.required} -->\n            <em>*</em>\n            <!-- /if -->\n        </label>\n        <div class="form-item">\n            <!-- if: ${field.type} === \'text\' -->\n            <input type="text" class="form-text" name="${name}">\n            <!-- elif: ${field.type} === \'number\' -->\n            <input type="text" class="form-text" name="${name}">\n            <!-- elif: ${field.type} === \'calendar\' -->\n            <!-- elif: ${field.type} === \'uploader\' -->\n            <div class="form-uploader-container">\n                <div class="form-uploader" data-name="${name}"></div>\n                <div class="form-uploader-tip">请上传不超过20M的图片！</div>\n                <span class="form-msg"></span>\n            </div>\n            <!-- elif: ${field.type} === \'select\' -->\n            <div data-name="${name}"></div>\n            <!-- elif: ${field.type} === \'radio\' -->\n            <!-- elif: ${field.type} === \'checkbox\' -->\n            <!-- elif: ${field.type} === \'address\' -->\n            <!-- /if -->\n            <span class="form-msg"></span>\n        </div>\n    </div>\n    <!-- /for -->\n</form>\n\n<!-- target: result -->\n<li>\n    <label>英雄：</label>\n    <!-- if: ${hero.hp.average} < 0 -->\n    <!-- var: v = - ${hero.hp.average} -->\n    平均受到<span class="magic-red">${v}</span>点伤害,\n    <!-- else -->\n    平均获得<span class="magic-green">${hero.hp.average}</span>点治疗,\n    <!-- /if -->\n    平均获得<span class="magic-green">${hero.mp.average}</span>个法力水晶，\n    <!-- if: ${hero.cards.average} < 0 -->\n    <!-- var: v = - ${hero.cards.average} -->\n    平均丢弃<span class="magic-red">${v}</span>张手牌,\n    <!-- else -->\n    平均增加<span class="magic-green">${hero.cards.average}</span>张手牌,\n    <!-- /if -->\n    平均抽<span class="magic-green">${hero.drawn.average}</span>张牌,\n    <!-- if: ${hero.stack.average} < 0 -->\n    <!-- var: v = - ${hero.stack.average} -->\n    平均减少<span class="magic-red">${v}</span>张牌库,\n    <!-- else -->\n    平均增加<span class="magic-green">${hero.stack.average}</span>张牌库,\n    <!-- /if -->\n    平均暴<span class="magic-green">${hero.overflow.average}</span>张牌,\n</li>\n\n<!-- target: null -->\n原始生命值${hero.hp.origin}，\n最小生命值<span class="magic-red">${hero.hp.min}</span>，\n最大生命值<span class="magic-green">${hero.hp.max}</span>，\n最小获得<span class="magic-red">${hero.mp.min}</span>个法力水晶，\n最大获得<span class="magic-green">${hero.mp.max}</span>个法力水晶'}),define("yogg/index/index",["require","babel-runtime/helpers/classCallCheck","jquery","etpl","moye/ui/Select","../common/Scene","../common/SceneStatistician","./index.tpl"],function(require){var e=require("babel-runtime/helpers/classCallCheck"),n=require("jquery"),t=require("etpl"),i=require("moye/ui/Select"),a=require("../common/Scene"),r=require("../common/SceneStatistician"),o=require("./index.tpl"),s=new t.Engine;s.compile(o);var l=function(){function t(i){e(this,t),this.container=null,this.scenes=null,this.current=null,this.scene=null,this.timer=null,this.container=i,this.scenes=JSON.parse(localStorage.getItem("scene")||"[]"),n(i).addClass("scene").html(s.render("scene")),this.initSceneEvent(),this.initMagicEvevt()}return t.prototype.initSceneEvent=function(){var e=this,t=this.container,a=this.scenes,r=new i({main:n("[data-role=scene-select]",t)[0],skin:["scene"],datasource:Object.keys(a).map(function(e){return{value:e,name:a[e].name}})}).render();n("[data-role=scene-load]",t).click(function(i){var o=r.getValue();if(!o)n(i.target).nextAll("span.form-msg").html("请选择或者场景");else n(i.target).nextAll("span.form-msg").html(""),e.current=a[o].scene,n("[data-role=scene-reset]",t).removeClass("btn-disabled").prop("disabled",!1),e.loadScene()}),n("[data-role=scene-edit]",t).click(function(e){n(e.target).nextAll("span.form-msg").html("")}),n("[data-role=scene-create]",t).click(function(e){n(e.target).nextAll("span.form-msg").html("")})},t.prototype.initMagicEvevt=function(){var e=this,t=this.container;n("[data-role=scene-reset]",t).click(function(){e.loadScene()}),n("[data-role=scene-run]",t).click(function(i){var a=+n("[data-role=scene-num]",t).val();if(a!==a||0>=a||a!==Math.floor(a))return void n(i.target).nextAll("span.form-msg").html("数量必须为正整数");if(a>1e3)return void n(i.target).nextAll("span.form-msg").html("数量最多为1000个");n("[data-role=scene-run], [data-role=scene-statistic]",t).addClass("btn-disabled").prop("disabled",!0);var r=n("[data-role=scene-standard]",t).prop("checked"),o=n("[data-role=scene-animate]",t).prop("checked"),s=e.scene.createMagic(a,r);if(!o){for(;;)if(!s.deal())break;for(var l="",c=s.list,d=0;d<c.length;d++){var f=c[d];l+="<li><label>"+f.name+"("+f.cost+")：</label>"+f.description+"</li>"}n("[data-role=magic-list]",t).append(l),e.render()}else!function(){var i=function(){var a=s.deal();if(e.render(),a){var r=s.list[s.index-1];n("[data-role=magic-list]",t).append("<li><label>"+r.name+"("+r.cost+")：</label>"+r.description+"</li>"),e.timer=setTimeout(i,2500)}else n("[data-role=magic-list]",t).append("<li><label>执行完成！</label></li>")};i()}()}),n("[data-role=scene-statistic]",t).click(function(i){var a=+n("[data-role=scene-num]",t).val();if(a!==a||0>=a||a!==Math.floor(a))return void n(i.target).nextAll("span.form-msg").html("数量必须为正整数");if(a>1e3)return void n(i.target).nextAll("span.form-msg").html("数量最多为1000个");n("[data-role=scene-run], [data-role=scene-statistic]",t).addClass("btn-disabled").prop("disabled",!0);var r=n("[data-role=scene-standard]",t).prop("checked");e.statisticScene(a,r)})},t.prototype.loadScene=function(){var e=this.current,t=this.container;if(this.scene=new a(e),n("[data-role=scene-run], [data-role=scene-statistic]",t).removeClass("btn-disabled").prop("disabled",!1),n("[data-role=magic-list]",t).html(""),this.timer)clearTimeout(this.timer),this.timer=null;this.render()},t.prototype.statisticScene=function(e,t){var i=this,a=this.container,o=this.current,l=new r(o,e,t);n("[data-role=magic-list]",a).append("<li>开始分析，分析过程可能会持续一段时间，请耐心等待</li>");var c=function(){l.run();var e=l.times;if(e%1e4===0)n("[data-role=magic-list]",a).append("<li>已经运行"+e+"次</li>");if(e>=1e5)n("[data-role=magic-list]",a).append("<li>已经运行"+e+"次，分析完成！<li>"),n("[data-role=magic-list]",a).append("<li><label>分析结果如下：</label></li>"),n("[data-role=magic-list]",a).append(s.render("result",l.getResult()));else if(e%100===0)i.timer=setTimeout(c,0);else c()};c()},t.prototype.render=function(){var e=s.render("scene-info",this.scene.info());n(this.container).children("main").html(e)},t.create=function(e){return new t(e)},t}(),c=function(){l.create(n("#scene")[0])};return c});