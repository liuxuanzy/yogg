/*! 2016 Baidu Inc. All Rights Reserved */
define("eform-lang/format",[],function(){function e(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!e)return e;else return e.replace(t,function(e,t){for(var n=t.split("."),r=i[n.shift()];n.length&&null!=r;)r=r[n.shift()];return null==r?"":r})}var t=/\$\{(.+?)\}/g;return e}),define("eform-uploader/ImageViewer",["require","eform-lang","eform-lang/format"],function(require){function e(e){e=this.options=i({},l,e),this.guid=t("image_"),this.flash=null,this.image=null,this.ready=!1,this.main=e.main,this.src=e.src,this.init(e)}var t=require("eform-lang").guid,i=require("eform-lang").extend,n=require("eform-lang/format"),r=/data:image\/.*;base64,/,a=function(){var e=new Image,t=!0;return e.onload=e.onerror=function(){if(1!==this.width||1!==this.height)t=!1},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t}(),s='<object id="${id}" name="${id}" type="application/x-shockwave-flash" '+(window.ActiveXObject?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':"")+'data="${swf}" width="100%" height="100%" style="outline:0">    <param name="movie" value="${swf}"/>    <param name="wmode" value="transparent"/>    <param name="allowscriptaccess" value="always"/></object>';if(!a){var o={};window.onFlashReady=function(e){if(e&&o[e]){var t=o[e];delete o[e],t.ready=!0,r.test(t.src)&&t.change(t.src)}}}var l={swf:"",src:"",main:null};return e.prototype={constructor:e,init:function(e){if(!a)this.main.innerHTML=n(s,{id:this.guid,swf:e.swf}),this.flash=this.main.firstChild,o[this.guid]=this;this.main.style.overflow="hidden",this.change(e.src)},change:function(e){if(e)if(this.src=e,a||!r.test(e)){if(!this.image){var t=this.image=new Image;t.style.width=t.style.height="100%",t.src=e,this.main.insertBefore(t,this.main.firstChild)}else this.image.src=e;this.image.style.display="block"}else if(this.ready)this.image&&(this.image.style.display="none"),this.flash.showPic(e.replace(/data:image\/.*;base64,/,""))},dispose:function(){if(!a){var e=this.guid;o[e]&&delete o[e]}this.image=null,this.flash=null,this.main.innerHTML="",this.main=null}},e});